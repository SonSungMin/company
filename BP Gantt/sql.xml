<?xml version="1.0" encoding="utf-8"?>
<AppAftMidPlanQuerySource>

  <TSAA002_FIG_SHP_LIST_WC_SELECT>
    --TSAA002_FIG_SHP_LIST_WC_SELECT
    SELECT
    SHP_COD
    ,SHP_DES
    ,FIG_SHP
    ,YD_GBN
    ,DCK_COD
    ,STD_SHP
    ,MAK_TM
    ,SHP_KND
    ,SHP_TYP
    ,SHP_TYP_QTY
    ,SHP_TYP_NM
    ,WC
    ,KL
    ,FT
    ,LC
    ,DL
    ,PNT_YN
    ,BLD_COD
    ,LOA
    ,LBP
    ,WID
    ,DEP
    ,TOT_TON
    ,CG_TON
    ,ORI_OWN_NM
    ,ORI_NAT
    ,SFIG_NO
    ,FIG_NO
    ,PLN_YN
    ,SHP_GBN
    ,SHP_STS
    ,REL_FIG_SHP
    ,BD_STA
    ,PSP_NR
    ,IN_DAT
    ,UP_DAT
    ,DE_DAT
    ,IN_USR
    ,UP_USR
    ,WCT
    ,WCH
    ,CPY_SHP
    ,OWNRP_NM
    ,NW_GEN_FLG
    ,PRJ_GBN
    ,KL2
    ,FT2
    ,FT3
    ,KL_DCK
    ,KL2_DCK
    ,FT_DCK
    ,FT2_DCK
    ,FT3_DCK
    ,(SELECT B.FIG_SHP FROM TSEN998 B WHERE B.BATCH_TYPE=:BATCH_TYPE AND B.FIG_SHP = A.FIG_SHP) BATCH_FIG_SHP
    FROM
    OPT.TSAA002 A
    WHERE
    (FIG_SHP IN (SELECT B.FIG_SHP FROM TSEN998 B WHERE B.BATCH_TYPE=:BATCH_TYPE AND B.FIG_SHP = A.FIG_SHP)
    OR (WC &gt;= :ST_DATE AND WC &lt;= :FI_DATE))
    AND SUBSTR(A.FIG_SHP,1,1) NOT IN ('C','E','F','G','L','Q')
    ORDER BY FIG_SHP
  </TSAA002_FIG_SHP_LIST_WC_SELECT>
  <TSAA002_FIG_SHP_LIST_WC_SELECT>
    --TSAA002_FIG_SHP_LIST_WC_SELECT
    SELECT
    SHP_COD
    ,SHP_DES
    ,FIG_SHP
    ,YD_GBN
    ,DCK_COD
    ,STD_SHP
    ,MAK_TM
    ,SHP_KND
    ,SHP_TYP
    ,SHP_TYP_QTY
    ,SHP_TYP_NM
    ,WC
    ,KL
    ,FT
    ,LC
    ,DL
    ,PNT_YN
    ,BLD_COD
    ,LOA
    ,LBP
    ,WID
    ,DEP
    ,TOT_TON
    ,CG_TON
    ,ORI_OWN_NM
    ,ORI_NAT
    ,SFIG_NO
    ,FIG_NO
    ,PLN_YN
    ,SHP_GBN
    ,SHP_STS
    ,REL_FIG_SHP
    ,BD_STA
    ,PSP_NR
    ,IN_DAT
    ,UP_DAT
    ,DE_DAT
    ,IN_USR
    ,UP_USR
    ,WCT
    ,WCH
    ,CPY_SHP
    ,OWNRP_NM
    ,NW_GEN_FLG
    ,PRJ_GBN
    ,KL2
    ,FT2
    ,FT3
    ,KL_DCK
    ,KL2_DCK
    ,FT_DCK
    ,FT2_DCK
    ,FT3_DCK
    ,(SELECT B.FIG_SHP FROM TSEN998 B WHERE B.BATCH_TYPE=:BATCH_TYPE AND B.FIG_SHP = A.FIG_SHP) BATCH_FIG_SHP
    FROM
    OPT.TSAA002 A
    WHERE
    (FIG_SHP IN (SELECT B.FIG_SHP FROM TSEN998 B WHERE B.BATCH_TYPE=:BATCH_TYPE AND B.FIG_SHP = A.FIG_SHP)
    OR (WC &gt;= :ST_DATE AND WC &lt;= :FI_DATE))
    AND SUBSTR(A.FIG_SHP,1,1) NOT IN ('C','E','F','G','L','Q')
    ORDER BY FIG_SHP
  </TSAA002_FIG_SHP_LIST_WC_SELECT>

  <TSAA002_SELECT>
    SELECT * FROM OPT.TSAA002 ORDER BY FIG_SHP
  </TSAA002_SELECT>

  <!--GANTT-TSAA002 BEGIN-->
  <TSAA002_SHIPLIST>
    SELECT  B.*
    FROM TSFN203 A, TSAA002 B
    WHERE  NOT ( B.LC &lt; :LC_START OR B.WC &gt; :WC_FINISH)
    --AND B.DCK_COD IN ('1')
    AND A.SHP_COD(+) = B.SHP_COD
    AND A.CASE_NO(+) = :CASE_NO
    ORDER BY A.FIG_SHP
  </TSAA002_SHIPLIST>

  <TSAA002_SHIPLIST_ALL>
    SELECT * FROM OPT.TSAA002
    ORDER BY FIG_SHP
  </TSAA002_SHIPLIST_ALL>

  <GANTT_DATALIST>
    <!--SELECT B.CASE_NO, B.FIG_SHP, B.LOW_BLK, B.ACT_COD, B.ITM_COD, B.N41_ST, B.ITM_DES, B.PE_AREA_ST, B.PE_AREA_FI
    FROM OPT.TSFN203 A, OPT.TSFN207 B,
    (
    SELECT FIG_SHP,ACT_COD,ERP_DPT_COD
    FROM    OPT.TSEA002
    WHERE (ERP_DPT_COD = 'C71000' OR ERP_DPT_COD = 'C74000' OR ERP_DPT_COD = 'C8C000' OR ERP_DPT_COD = 'C94000')
    AND     SUBSTR(ITM_COD,1,3) != 'M31'
    AND     SUBSTR(ITM_COD,1,3) != 'H11'
    AND     SUBSTR(ITM_COD,1,3) != 'H23'
    AND     SUBSTR(ITM_COD,5,1) IN ('2','3')
    UNION ALL
    SELECT FIG_SHP,ACT_COD,DPT_COD
    FROM    OPT.TSFA001
    WHERE (DPT_COD = 'C71000' OR DPT_COD = 'C74000' OR DPT_COD = 'C8C000' OR DPT_COD = 'C94000')
    AND     SUBSTR(ITM_COD,1,3) != 'M31'
    AND     SUBSTR(ITM_COD,1,3) != 'H11'
    AND     SUBSTR(ITM_COD,1,3) != 'H23'
    AND     SUBSTR(ITM_COD,5,1) IN ('2','3')
    ) C
    WHERE (A.CASE_NO = B.CASE_NO AND A.FIG_SHP = B.FIG_SHP)
    AND A.CASE_NO = :CASE_NO
    AND A.FIG_SHP IN ( :SHIP_LIST )
    :SHIP_LIST
    AND SUBSTR(B.ITM_COD,1,3) != 'M31'
    AND SUBSTR(B.ITM_COD,1,3) != 'H11'
    AND SUBSTR(B.ITM_COD,1,3) != 'H23'
    AND SUBSTR(B.ITM_COD,5,1) IN ('2','3')
    AND B.FIG_SHP = C.FIG_SHP
    AND B.ACT_COD = C.ACT_COD
    ORDER BY B.FIG_SHP, B.LOW_BLK-->
    SELECT  B.CASE_NO, B.FIG_SHP, B.LOW_BLK, B.ITM_COD, B.ACT_COD, B.N41_ACT_COD, B.SHP_COD, B.ITM_DES,
    B.LAYER, B.SEQ_NO, B.DECK,
    CASE WHEN B.PE_AREA IS NOT NULL THEN 'GCIN' ELSE 'GCOUT' END GC_GUBUN,
    B.PE_TYPE, B.LOW_SIZE, B.ITM_SIZE,
    B.CRANE1, B.CRANE1_CNT,B.CRANE2, B.CRANE2_CNT,B.CRANE3, B.CRANE3_CNT,
    B.BLK_PE_OST_MID, B.BLK_PE_OST_PS, B.BLK_PE_OST_PP, B.L41_ST, B.N41_ST,
    B.L41_N41_OST, B.MID_ST, B.PLN_ST, B.EST_ST, B.RST_ST, B.LOW_MUL_WGT,
    B.ITM_MUL_WGT, B.GC_PE_TIME, B.TRANS_PE_TIME, B.ETC_SUPP_TIME, B.USE_YN, B.RMK,
    B.PE_AREA_ST, B.PE_AREA_FI, B.PE_AREA_VOL,
    C.ERP_DPT_COD DPT_COD
    FROM    OPT.TSFN203 A, OPT.TSFN207 B,
    (
    SELECT FIG_SHP,ACT_COD,ERP_DPT_COD
    FROM    OPT.TSEA002
    WHERE (ERP_DPT_COD = 'C71000' OR ERP_DPT_COD = 'C74000' OR ERP_DPT_COD = 'C8C000' OR ERP_DPT_COD = 'C94000')
    AND     SUBSTR(ITM_COD,1,3) != 'M31'
    AND     SUBSTR(ITM_COD,1,3) != 'H11'
    AND     SUBSTR(ITM_COD,1,3) != 'H23'
    AND     SUBSTR(ITM_COD,5,1) IN ('2','3')
    UNION ALL
    SELECT FIG_SHP,ACT_COD,DPT_COD
    FROM    OPT.TSFA001
    WHERE (DPT_COD = 'C71000' OR DPT_COD = 'C74000' OR DPT_COD = 'C8C000' OR DPT_COD = 'C94000')
    AND     SUBSTR(ITM_COD,1,3) != 'M31'
    AND     SUBSTR(ITM_COD,1,3) != 'H11'
    AND     SUBSTR(ITM_COD,1,3) != 'H23'
    AND     SUBSTR(ITM_COD,5,1) IN ('2','3')
    ) C
    WHERE   A.CASE_NO = :CASE_NO
    :SHIP_LIST
    AND     A.CASE_NO = B.CASE_NO
    AND     A.FIG_SHP = B.FIG_SHP
    AND     A.DCK_COD IN (:WHERE_DOCK)
    AND     ((:ST_DATE BETWEEN B.PE_AREA_ST AND B.PE_AREA_FI)
    OR      (:FI_DATE BETWEEN B.PE_AREA_ST AND B.PE_AREA_FI )
    OR      (B.PE_AREA_ST BETWEEN :ST_DATE AND :FI_DATE )
    OR      (B.PE_AREA_FI BETWEEN :ST_DATE AND :FI_DATE ))
    AND     SUBSTR(B.ITM_COD,1,3) != 'M31'
    AND     SUBSTR(B.ITM_COD,1,3) != 'H11'
    AND     SUBSTR(B.ITM_COD,1,3) != 'H23'
    AND     SUBSTR(B.ITM_COD,5,1) IN ('2','3')
    AND     B.FIG_SHP = C.FIG_SHP
    AND     B.ACT_COD = C.ACT_COD
    :WHERE_LOAD
    :WHERE_DEPT
    ORDER BY B.FIG_SHP, B.ITM_COD, B.LOW_BLK
  </GANTT_DATALIST>

  <!--TSAA002 FINISH-->


  <TSXA012_PRO_NM_SELECT>
    -- TSXA012_PRO_NM_SELECT
    -- 프로시저 수행결과
    SELECT TRIM(PRO_STA) PRO_STA, ERR_DES
    FROM OPT.TSXA012
    WHERE PRO_NM = :PRO_NM
    AND USR_ID = :USR_ID
  </TSXA012_PRO_NM_SELECT>

  <!--TSFN002 BEGIN-->
  <TSFN002_STD_ACT_SHP_TYP_DCK_COD_MAP_SELECT>
    -- TSFN002_STD_ACT_SHP_TYP_DCK_COD_MAP_SELECT
    SELECT DISTINCT SUBSTR(A.STD_COD_DET, 1, 2) SHP_KND, A.STD_COD_DET SHP_TYP, A.STD_DES_SHO SHP_TYP_DES, B.DCK_COD
    FROM TSXA002 A, TSFN002 B
    WHERE A.STD_COD = 'PS102'
    AND A.STD_COD_DET = B.SHP_TYP(+)
    ORDER BY A.STD_COD_DET, B.DCK_COD
  </TSFN002_STD_ACT_SHP_TYP_DCK_COD_MAP_SELECT>
  <TSFN002_STD_ACT_SHP_TYP_DCK_COD_MAP_BY_DIV_COD_SELECT>
    -- TSFN002_STD_ACT_SHP_TYP_DCK_COD_MAP_BY_DIV_COD_SELECT
    SELECT DISTINCT SUBSTR(A.STD_COD_DET, 1, 2) SHP_KND, A.STD_COD_DET SHP_TYP, A.SHP_DES_SHO SHP_TYP_DES, B.DCK_COD
    FROM TSXA002 A, TSFN002 B
    WHERE A.STD_COD = 'PS102'
    AND A.STD_COD_DET = B.SHP_TYP(+)
    AND :DIV_COD = B.DIV_COD(+)
    ORDER BY A.STD_COD_DET, B.DCK_COD
  </TSFN002_STD_ACT_SHP_TYP_DCK_COD_MAP_BY_DIV_COD_SELECT>

  <TSFN002_DISTINCT_SHP_TYP_SELECT>
    --TSFN002_DISTINCT_SHP_TYP_SELECT
    SELECT X.*, FC_GET_STD_DES_SHO('PS102', X.SHP_TYP, 'C000') SHP_TYP_DES
    , X.SHP_TYP || '  ' || FC_GET_STD_DES_SHO('PS102', X.SHP_TYP, 'C000') SHP_TYP_DES_LON
    FROM (
    SELECT DISTINCT SHP_TYP SHP_TYP
    FROM TSFN002
    WHERE SHP_TYP LIKE ':WHERE_SHP_KND%' ) X
  </TSFN002_DISTINCT_SHP_TYP_SELECT>
  <TSFN002_DISTINCT_MODEL_NO_SELECT>
    --TSFN002_DISTINCT_MODEL_NO_SELECT
    SELECT DISTINCT MODEL_NO MODEL_NO
    FROM TSFN002
    WHERE SHP_TYP = :SHP_TYP
  </TSFN002_DISTINCT_MODEL_NO_SELECT>
  <TSFN002_DISTINCT_DIV_COD_SELECT>
    --TSFN002_DISTINCT_DIV_COD_SELECT
    SELECT DISTINCT 'N' SELECTED, DIV_COD, DIV_DES
    FROM TSFN002
    WHERE MODEL_NO = :MODEL_NO
  </TSFN002_DISTINCT_DIV_COD_SELECT>
  <TSFN002_MODEL_NO_SELECT>
    --TSFN002_MODEL_NO_SELECT
    SELECT A.MODEL_NO, A.ACT_ID, A.SHP_KND,
    A.SHP_TYP, A.DCK_COD, A.HO_GUBUN,
    A.ACT_DES, A.ACT_TYP, A.UPP_DIV,
    A.UPP_DIV_DES, A.DIV_COD, A.DIV_DES,
    A.ITM_COD_LST, A.DIV_COD2, A.SEALED_YN,
    A.STD_TRM, A.WRK_STG_TYP, A.WRK_STG_TYP_DES,
    A.WRK_STG, A.WRK_TYP, A.WRK_TYP2,
    B.WRK_TYP2_DES,
    FC_GET_STD_DES_SHO('PS106', A.WRK_TYP, 'C000') || ' ' || B.WRK_TYP2_DES AS WRK_DES,
    A.PNT_SCH, A.ST_OPT_PNT, A.ST_JOE_PNT,
    A.FI_JOE_PNT, A.FI_OPT_PNT, A.ST_DAY,
    A.RMK, A.USE_YN, A.IP,
    A.PID, A.IN_DAT, A.UP_DAT,
    A.IN_USR, A.UP_USR, A.VIEW_SEQ
    FROM TSFN002 A, TSFN004 B
    WHERE A.MODEL_NO = :MODEL_NO
    AND A.WRK_STG_TYP = B.WRK_STG_TYP(+)
    AND A.WRK_TYP2 = B.WRK_TYP2(+)
    --ORDER BY ACT_ID
    ORDER BY A.DIV_COD, A.VIEW_SEQ, A.ACT_ID
  </TSFN002_MODEL_NO_SELECT>
  <TSFN002_MODEL_NO_USE_YN_SELECT>
    --TSFN002_MODEL_NO_USE_YN_SELECT
    SELECT A.MODEL_NO, A.ACT_ID, A.SHP_KND,
    A.SHP_TYP, A.DCK_COD, A.HO_GUBUN,
    A.ACT_DES, A.ACT_TYP, A.UPP_DIV,
    A.UPP_DIV_DES, A.DIV_COD, A.DIV_DES,
    A.ITM_COD_LST, A.DIV_COD2, C.SEALED_YN,
    A.STD_TRM, A.WRK_STG_TYP, A.WRK_STG_TYP_DES,
    A.WRK_STG, A.WRK_TYP, A.WRK_TYP2,
    B.WRK_TYP2_DES,
    FC_GET_STD_DES_SHO('PS106', A.WRK_TYP, 'C000') || ' ' || B.WRK_TYP2_DES AS WRK_DES,
    A.PNT_SCH, A.ST_OPT_PNT, A.ST_JOE_PNT,
    A.FI_JOE_PNT, A.FI_OPT_PNT, A.ST_DAY,
    A.RMK, C.USE_YN, A.IP,
    A.PID, A.IN_DAT, A.UP_DAT,
    A.IN_USR, A.UP_USR, A.VIEW_SEQ
    FROM TSFN002 A, TSFN004 B, TSFN001 C
    WHERE A.MODEL_NO = :MODEL_NO
    AND A.WRK_STG_TYP = B.WRK_STG_TYP(+)
    AND A.WRK_TYP2 = B.WRK_TYP2(+)
    AND A.SHP_KND = C.SHP_KND
    AND A.DIV_COD = C.DIV_COD
    AND C.USE_YN = :USE_YN
    --ORDER BY ACT_ID
    ORDER BY A.DIV_COD, A.VIEW_SEQ, A.ACT_ID
  </TSFN002_MODEL_NO_USE_YN_SELECT>
  <TSFN002_MODEL_NO_DIV_COD_SELECT>
    --TSFN002_MODEL_NO_DIV_COD_SELECT
    SELECT A.MODEL_NO, A.ACT_ID, A.SHP_KND,
    A.SHP_TYP, A.DCK_COD, A.HO_GUBUN,
    A.ACT_DES, A.ACT_TYP, A.UPP_DIV,
    A.UPP_DIV_DES, A.DIV_COD, A.DIV_DES,
    A.ITM_COD_LST, A.DIV_COD2, A.SEALED_YN,
    A.STD_TRM, A.WRK_STG_TYP, A.WRK_STG_TYP_DES,
    A.WRK_STG, A.WRK_TYP, A.WRK_TYP2,
    B.WRK_TYP2_DES,
    FC_GET_STD_DES_SHO('PS106', A.WRK_TYP, 'C000') || ' ' || B.WRK_TYP2_DES AS WRK_DES,
    A.PNT_SCH, A.ST_OPT_PNT, A.ST_JOE_PNT,
    A.FI_JOE_PNT, A.FI_OPT_PNT, A.ST_DAY,
    A.RMK, A.USE_YN, A.IP,
    A.PID, A.IN_DAT, A.UP_DAT,
    A.IN_USR, A.UP_USR, A.VIEW_SEQ
    FROM TSFN002 A, TSFN004 B
    WHERE A.MODEL_NO = :MODEL_NO
    and A.DIV_COD = :DIV_COD
    AND A.WRK_STG_TYP = B.WRK_STG_TYP(+)
    AND A.WRK_TYP2 = B.WRK_TYP2(+)
    ORDER BY VIEW_SEQ
  </TSFN002_MODEL_NO_DIV_COD_SELECT>
  <TSFN002_SHP_KND_SHP_TYP_SELECT>
    -- TSFN002_SHP_KND_SHP_TYP_SELECT
    SELECT
    *
    FROM
    TSFN002
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    ORDER BY ACT_ID
  </TSFN002_SHP_KND_SHP_TYP_SELECT>
  <INSERT_TSFN002>
    -- INSERT_TSFN002
    INSERT INTO TSFN002 (
    SHP_KND
    ,SHP_TYP
    ,MODEL_NO
    ,DCK_COD
    ,ACT_ID
    ,HO_GUBUN
    ,ACT_DES
    ,ACT_TYP
    ,UPP_DIV
    ,UPP_DIV_DES
    ,DIV_COD
    ,DIV_DES
    ,ITM_COD_LST
    ,DIV_COD2
    ,SEALED_YN
    ,STD_TRM
    ,WRK_STG_TYP
    ,WRK_STG_TYP_DES
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,PNT_SCH
    ,ST_OPT_PNT
    ,ST_JOE_PNT
    ,FI_JOE_PNT
    ,FI_OPT_PNT
    ,RMK
    ,USE_YN
    ,VIEW_SEQ
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    ,ST_DAY
    )
    VALUES (
    :SHP_KND
    ,:SHP_TYP
    ,:MODEL_NO
    ,:DCK_COD
    ,:ACT_ID
    ,:HO_GUBUN
    ,:ACT_DES
    ,:ACT_TYP
    ,:UPP_DIV
    ,:UPP_DIV_DES
    ,:DIV_COD
    ,:DIV_DES
    ,:ITM_COD_LST
    ,:DIV_COD2
    ,:SEALED_YN
    ,:STD_TRM
    ,:WRK_STG_TYP
    ,:WRK_STG_TYP_DES
    ,:WRK_STG
    ,:WRK_TYP
    ,:WRK_TYP2
    ,:PNT_SCH
    ,:ST_OPT_PNT
    ,:ST_JOE_PNT
    ,:FI_JOE_PNT
    ,:FI_OPT_PNT
    ,:RMK
    ,:USE_YN
    ,:VIEW_SEQ
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:ST_DAY
    )
  </INSERT_TSFN002>
  <UPDATE_TSFN002>
    -- UPDATE_TSFN002
    UPDATE TSFN002 SET
    ACT_DES = :ACT_DES
    ,HO_GUBUN = :HO_GUBUN
    ,SHP_KND = :SHP_KND
    ,SHP_TYP = :SHP_TYP
    ,DCK_COD = :DCK_COD
    ,ACT_TYP = :ACT_TYP
    ,UPP_DIV = :UPP_DIV
    ,UPP_DIV_DES = :UPP_DIV_DES
    ,DIV_COD = :DIV_COD
    ,DIV_DES = :DIV_DES
    ,ITM_COD_LST = :ITM_COD_LST
    ,DIV_COD2 = :DIV_COD2
    ,SEALED_YN = :SEALED_YN
    ,STD_TRM = :STD_TRM
    ,WRK_STG_TYP = :WRK_STG_TYP
    ,WRK_STG_TYP_DES = :WRK_STG_TYP_DES
    ,WRK_STG = :WRK_STG
    ,WRK_TYP = :WRK_TYP
    ,WRK_TYP2 = :WRK_TYP2
    ,PNT_SCH = :PNT_SCH
    ,ST_OPT_PNT = :ST_OPT_PNT
    ,ST_JOE_PNT = :ST_JOE_PNT
    ,FI_JOE_PNT = :FI_JOE_PNT
    ,FI_OPT_PNT = :FI_OPT_PNT
    ,RMK = :RMK
    ,USE_YN = :USE_YN
    ,VIEW_SEQ = :VIEW_SEQ
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    ,ST_DAY = :ST_DAY
    WHERE
    MODEL_NO = :MODEL_NO
    AND ACT_ID = :ACT_ID
  </UPDATE_TSFN002>
  <DELETE_TSFN002>
    -- DELETE_TSFN002
    DELETE TSFN002
    WHERE
    MODEL_NO = :MODEL_NO
    AND ACT_ID = :ACT_ID
  </DELETE_TSFN002>
  <!--TSFN002 END-->

  <!--TSFN003 BEGIN-->
  <TSFN003_MODEL_NO_SELECT>
    --TSFN003_MODEL_NO_SELECT
    SELECT *
    FROM TSFN003
    WHERE MODEL_NO = :MODEL_NO
  </TSFN003_MODEL_NO_SELECT>
  <TSFN003_MODEL_NO_DIV_COD_SELECT>
    <!--중구획 간 전/후행 액트 관계데이터가 모두 필요함에 따라 수정 19.07.08 신성훈-->
    --TSFN003_MODEL_NO_DIV_COD_SELECT
    --SELECT A.*
    --FROM TSFN003 A, TSFN002 B, TSFN002 C
    --WHERE A.MODEL_NO = B.MODEL_NO
    --AND A.PRE_ACT_ID = B.ACT_ID
    --AND A.MODEL_NO = C.MODEL_NO
    --AND A.AFT_ACT_ID = C.ACT_ID
    --AND B.MODEL_NO = :MODEL_NO
    --AND B.DIV_COD =:DIV_COD
    --AND C.MODEL_NO = :MODEL_NO
    --AND C.DIV_COD =:DIV_COD
    SELECT DISTINCT AA.*
    FROM (
    SELECT A.*
    FROM TSFN003 A, TSFN002 B, TSFN002 C
    WHERE A.MODEL_NO = B.MODEL_NO
    AND A.PRE_ACT_ID = B.ACT_ID
    AND A.MODEL_NO = C.MODEL_NO
    AND A.AFT_ACT_ID = C.ACT_ID
    AND B.MODEL_NO = :MODEL_NO
    AND B.DIV_COD =:DIV_COD
    AND C.MODEL_NO = :MODEL_NO
    --AND C.DIV_COD =:DIV_COD
    UNION ALL
    SELECT A.*
    FROM TSFN003 A, TSFN002 B, TSFN002 C
    WHERE A.MODEL_NO = B.MODEL_NO
    AND A.PRE_ACT_ID = B.ACT_ID
    AND A.MODEL_NO = C.MODEL_NO
    AND A.AFT_ACT_ID = C.ACT_ID
    AND B.MODEL_NO = :MODEL_NO
    --AND B.DIV_COD =:DIV_COD
    AND C.MODEL_NO = :MODEL_NO
    AND C.DIV_COD =:DIV_COD
    ) AA
  </TSFN003_MODEL_NO_DIV_COD_SELECT>
  <TSFN003_SHP_KND_SHP_TYP_SELECT>
    -- TSFN003_SHP_KND_SHP_TYP_SELECT
    SELECT
    *
    FROM
    TSFN003
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
  </TSFN003_SHP_KND_SHP_TYP_SELECT>
  <INSERT_TSFN003>
    -- INSERT_TSFN003
    INSERT INTO TSFN003 (
    SHP_KND
    ,SHP_TYP
    ,MODEL_NO
    ,DCK_COD
    ,PRE_ACT_ID
    ,AFT_ACT_ID
    ,REL_TYP
    ,STD_OST
    ,RMK
    ,USE_YN
    ,LINE_COLOR
    ,LINE_THICKNESS
    ,LINE_STYLE
    ,LINE_SNAP_LOC
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :SHP_KND
    ,:SHP_TYP
    ,:MODEL_NO
    ,:DCK_COD
    ,:PRE_ACT_ID
    ,:AFT_ACT_ID
    ,:REL_TYP
    ,:STD_OST
    ,:RMK
    ,:USE_YN
    ,:LINE_COLOR
    ,:LINE_THICKNESS
    ,:LINE_STYLE
    ,:LINE_SNAP_LOC
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN003>
  <UPDATE_TSFN003>
    -- UPDATE_TSFN003
    UPDATE TSFN003 SET
    SHP_KND = :SHP_KND
    ,SHP_TYP = :SHP_TYP
    ,DCK_COD = :DCK_COD
    ,REL_TYP = :REL_TYP
    ,STD_OST = :STD_OST
    ,RMK = :RMK
    ,USE_YN = :USE_YN
    ,LINE_COLOR = :LINE_COLOR
    ,LINE_THICKNESS = :LINE_THICKNESS
    ,LINE_STYLE = :LINE_STYLE
    ,LINE_SNAP_LOC = :LINE_SNAP_LOC
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    MODEL_NO = :MODEL_NO
    AND PRE_ACT_ID = :PRE_ACT_ID
    AND AFT_ACT_ID = :AFT_ACT_ID
  </UPDATE_TSFN003>
  <DELETE_TSFN003>
    -- DELETE_TSFN003
    DELETE TSFN003
    WHERE
    MODEL_NO = :MODEL_NO
    AND PRE_ACT_ID = :PRE_ACT_ID
    AND AFT_ACT_ID = :AFT_ACT_ID
  </DELETE_TSFN003>
  <!--TSFN003 END-->

  <!--TSFN001 BEGIN-->
  <TSFN001_SHP_KND_DIV_COD_SELECT>
    --TSFN001_SHP_KND_DIV_COD_SELECT
    --SELECT '000' DIV_COD, '전체' DIV_DES  FROM TSFN001
    --UNION
    SELECT DIV_COD, DIV_DES
    FROM TSFN001
    WHERE SHP_KND = :SHP_KND  AND SHP_TYP = :SHP_TYP
    AND UPP_DIV IS NULL
    ORDER BY DIV_COD
  </TSFN001_SHP_KND_DIV_COD_SELECT>
  <TSFN001_SHP_KND_SHP_TYP_SELECT>
    -- TSFN001_SHP_KND_SHP_TYP_SELECT
    SELECT
    *
    FROM
    TSFN001
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    ORDER BY DIV_COD
  </TSFN001_SHP_KND_SHP_TYP_SELECT>
  <TSFN001_SHP_KND_SHP_TYP_SPC_SELECT>
    -- TSFN001_SHP_KND_SHP_TYP_SPC_SELECT
    SELECT
    *
    FROM
    TSFN001
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    AND SPC_YN = 'Y'
    ORDER BY DIV_COD
  </TSFN001_SHP_KND_SHP_TYP_SPC_SELECT>
  <TSFN001_SHP_KND_SHP_TYP_USE_YN_SELECT>
    -- TSFN001_SHP_KND_SHP_TYP_USE_YN_SELECT
    SELECT
    *
    FROM
    TSFN001
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    AND USE_YN = :USE_YN

    ORDER BY UPP_DIV, DIV_COD
  </TSFN001_SHP_KND_SHP_TYP_USE_YN_SELECT>
  <TSFN001_TSFN021_SHP_KND_SHP_TYP_USE_YN_SELECT>
    -- TSFN001_TSFN021_SHP_KND_SHP_TYP_USE_YN_SELECT
    SELECT
    DISTINCT B.SHP_KND
    ,        B.SHP_TYP
    ,        A.DIV_COD
    ,        A.UPP_DIV
    ,        A.DIV_LVL
    ,        A.DIV_DES
    ,        A.DIV_COD2
    ,        A.ITM_COD
    ,        A.MIS_COD
    ,        B.DIV_OFFSET
    ,        B.SEALED_YN
    ,        A.BLK_MIS_IND
    ,        A.DIV_BLK_IND
    ,        B.DIV_CNT
    ,        B.RMK
    ,        B.USE_YN
    ,        B.SPC_YN
    ,        B.IP
    ,        B.PID
    ,        A.IN_DAT
    ,        A.UP_DAT
    ,        A.IN_USR
    ,        A.UP_USR
    FROM
    TSFN021 A, TSFN001 B
    WHERE
    A.CASE_NO = :CASE_NO
    AND A.FIG_SHP = :FIG_SHP
    AND B.SHP_KND(+) = :SHP_KND
    AND B.SHP_TYP(+) = :SHP_TYP
    AND B.DIV_COD(+) = A.DIV_COD
    AND B.USE_YN = :USE_YN
    ORDER BY A.UPP_DIV, A.DIV_COD
  </TSFN001_TSFN021_SHP_KND_SHP_TYP_USE_YN_SELECT>
  
  <!-- 모델선인 경우 -->
  <TSFN001_TSFN021_SHP_KND_SHP_TYP_USE_YN_SELECT_MODEL>
    SELECT DISTINCT B.SHP_KND,
    B.SHP_TYP,
    A.DIV_COD,
    A.UPP_DIV,
    A.DIV_LVL,
    A.DIV_DES,
    A.DIV_COD2,
    A.ITM_COD,
    A.MIS_COD,
    B.DIV_OFFSET,
    B.SEALED_YN,
    A.BLK_MIS_IND,
    A.DIV_BLK_IND,
    B.DIV_CNT,
    B.RMK,
    B.USE_YN,
    B.SPC_YN,
    B.IP,
    B.PID,
    A.IN_DAT,
    A.UP_DAT,
    A.IN_USR,
    A.UP_USR,
    A.FIG_NO
    FROM TSMG_TSFN021 A, TSFN001 B
    WHERE A.FIG_NO = :FIG_NO
    AND A.CASE_NO = '000000000000'
    AND A.FIG_SHP = :FIG_SHP
    AND B.SHP_KND(+) = :SHP_KND
    AND B.SHP_TYP(+) = :SHP_TYP
    AND B.DIV_COD(+) = A.DIV_COD
    AND B.USE_YN = :USE_YN
    ORDER BY A.UPP_DIV, A.DIV_COD
  </TSFN001_TSFN021_SHP_KND_SHP_TYP_USE_YN_SELECT_MODEL>
  <INSERT_TSFN001>
    -- INSERT_TSFN001
    INSERT INTO TSFN001 (
    SHP_KND
    ,SHP_TYP
    ,DIV_COD
    ,UPP_DIV
    ,DIV_LVL
    ,DIV_DES
    ,DIV_COD2
    ,ITM_COD
    ,MIS_COD
    ,DIV_OFFSET
    ,SEALED_YN
    ,BLK_MIS_IND
    ,DIV_BLK_IND
    ,RMK
    ,DIV_CNT
    ,USE_YN
    ,SPC_YN
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :SHP_KND
    ,:SHP_TYP
    ,:DIV_COD
    ,:UPP_DIV
    ,:DIV_LVL
    ,:DIV_DES
    ,:DIV_COD2
    ,:ITM_COD
    ,:MIS_COD
    ,:DIV_OFFSET
    ,:SEALED_YN
    ,:BLK_MIS_IND
    ,:DIV_BLK_IND
    ,:RMK
    ,:DIV_CNT
    ,:USE_YN
    ,:SPC_YN
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN001>
  <UPDATE_TSFN001>
    -- UPDATE_TSFN001
    UPDATE TSFN001 SET
    UPP_DIV = :UPP_DIV
    ,DIV_LVL = :DIV_LVL
    ,DIV_DES = :DIV_DES
    ,DIV_COD2 = :DIV_COD2
    ,ITM_COD = :ITM_COD
    ,MIS_COD = :MIS_COD
    ,DIV_OFFSET = :DIV_OFFSET
    ,SEALED_YN = :SEALED_YN
    ,BLK_MIS_IND = :BLK_MIS_IND
    ,DIV_BLK_IND = :DIV_BLK_IND
    ,RMK = :RMK
    ,DIV_CNT = :DIV_CNT
    ,USE_YN = :USE_YN
    ,SPC_YN = :SPC_YN
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    AND DIV_COD = :DIV_COD
  </UPDATE_TSFN001>
  <DELETE_TSFN001>
    -- DELETE_TSFN001
    DELETE TSFN001
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    AND DIV_COD = :DIV_COD
  </DELETE_TSFN001>
  <!--TSFN001 END-->

  <!--TSEE101 BEGIN-->
  <TSEE101_SELECT>
    -- TSEE101_SELECT
    SELECT
    SHP_KND
    ,DPT_COD
    ,RULE_DES
    ,RULE_ID
    ,SPC_RULE_ID
    ,ADD_RULE_ID1
    ,ADD_RULE_ID2
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    ,DE_DAT
    FROM
    TSEE101
  </TSEE101_SELECT>
  <INSERT_TSEE101>
    -- INSERT_TSEE101
    INSERT INTO TSEE101 (
    SHP_KND
    ,DPT_COD
    ,RULE_DES
    ,RULE_ID
    ,SPC_RULE_ID
    ,ADD_RULE_ID1
    ,ADD_RULE_ID2
    ,IN_DAT
    ,IN_USR
    ,DE_DAT
    )
    VALUES (
    :SHP_KND
    ,:DPT_COD
    ,:RULE_DES
    ,:RULE_ID
    ,:SPC_RULE_ID
    ,:ADD_RULE_ID1
    ,:ADD_RULE_ID2
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:DE_DAT
    )
  </INSERT_TSEE101>
  <UPDATE_TSEE101>
    -- UPDATE_TSEE101
    UPDATE TSEE101 SET
    RULE_DES = :RULE_DES
    ,RULE_ID = :RULE_ID
    ,SPC_RULE_ID = :SPC_RULE_ID
    ,ADD_RULE_ID1 = :ADD_RULE_ID1
    ,ADD_RULE_ID2 = :ADD_RULE_ID2
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    ,DE_DAT = :DE_DAT
    WHERE
    SHP_KND = :SHP_KND
    AND DPT_COD = :DPT_COD
  </UPDATE_TSEE101>
  <DELETE_TSEE101>
    -- DELETE_TSEE101
    DELETE TSEE101
    WHERE
    SHP_KND = :SHP_KND
    AND DPT_COD = :DPT_COD
  </DELETE_TSEE101>

  <TSEE101_SELECT_ALL_DESC>
    -- TSEE101_SELECT_ALL_DESC
    SELECT
    SHP_KND
    ,DPT_COD
    ,FC_GET_DPT_DESC(DPT_COD) DPT_DESC
    ,RULE_DES
    ,RULE_ID
    ,SPC_RULE_ID
    ,ADD_RULE_ID1
    ,ADD_RULE_ID2
    from TSEE101
    ORDER BY SHP_KND, DPT_COD
  </TSEE101_SELECT_ALL_DESC>


  <TSEE101_INSERT>
    INSERT INTO TSEE101
    (SHP_KND, DPT_COD,RULE_DES, RULE_ID, SPC_RULE_ID, ADD_RULE_ID1,ADD_RULE_ID2, IN_USR, IN_DAT)
    VALUES
    (:SHP_KND, :DPT_COD,:RULE_DES, :RULE_ID, :SPC_RULE_ID, :ADD_RULE_ID1,:ADD_RULE_ID2,:IN_USR,
    TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI'))
  </TSEE101_INSERT>

  <TSEE101_UPDATE>
    UPDATE TSEE101
    SET
    RULE_DES = :RULE_DES
    ,RULE_ID = :RULE_ID
    ,SPC_RULE_ID = :SPC_RULE_ID
    ,ADD_RULE_ID1 = :ADD_RULE_ID1
    ,ADD_RULE_ID2 = :ADD_RULE_ID2
    ,UP_USR = :UP_USR
    ,UP_DAT=TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
    WHERE SHP_KND = :SHP_KND AND DPT_COD = :DPT_COD
  </TSEE101_UPDATE>

  <TSEE101_DELETE>
    DELETE TSEE101
    WHERE SHP_KND = :SHP_KND AND DPT_COD = :DPT_COD
  </TSEE101_DELETE>
  <!--TSEE101 END-->

  <!--TSEE102 BEGIN-->
  <TSEE102_SELECT>
    -- TSEE102_SELECT
    SELECT
    RULE_ID
    ,SHP_KND
    ,BLK_STR
    ,BLK_STR_LEN
    ,LOT_STR
    ,PRE_WRK_STG
    ,PRE_WRK_TYP
    ,NXT_WRK_STG
    ,NXT_WRK_TYP
    ,REL_TYP
    ,STD_OST
    ,TRM_TYP
    ,STD_TRM
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    ,DE_DAT
    FROM
    TSEE102
  </TSEE102_SELECT>
  <INSERT_TSEE102>
    -- INSERT_TSEE102
    INSERT INTO TSEE102 (
    RULE_ID
    ,SHP_KND
    ,BLK_STR
    ,BLK_STR_LEN
    ,LOT_STR
    ,PRE_WRK_STG
    ,PRE_WRK_TYP
    ,NXT_WRK_STG
    ,NXT_WRK_TYP
    ,REL_TYP
    ,STD_OST
    ,TRM_TYP
    ,STD_TRM
    ,IN_DAT
    ,IN_USR
    ,DE_DAT
    )
    VALUES (
    :RULE_ID
    ,:SHP_KND
    ,:BLK_STR
    ,:BLK_STR_LEN
    ,:LOT_STR
    ,:PRE_WRK_STG
    ,:PRE_WRK_TYP
    ,:NXT_WRK_STG
    ,:NXT_WRK_TYP
    ,:REL_TYP
    ,:STD_OST
    ,:TRM_TYP
    ,:STD_TRM
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:DE_DAT
    )
  </INSERT_TSEE102>
  <UPDATE_TSEE102>
    -- UPDATE_TSEE102
    UPDATE TSEE102 SET
    REL_TYP = :REL_TYP
    ,STD_OST = :STD_OST
    ,TRM_TYP = :TRM_TYP
    ,STD_TRM = :STD_TRM
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    ,DE_DAT = :DE_DAT
    WHERE
    RULE_ID = :RULE_ID
    AND SHP_KND = :SHP_KND
    AND BLK_STR = :BLK_STR
    AND BLK_STR_LEN = :BLK_STR_LEN
    AND LOT_STR = :LOT_STR
    AND PRE_WRK_STG = :PRE_WRK_STG
    AND PRE_WRK_TYP = :PRE_WRK_TYP
    AND NXT_WRK_STG = :NXT_WRK_STG
    AND NXT_WRK_TYP = :NXT_WRK_TYP
  </UPDATE_TSEE102>
  <DELETE_TSEE102>
    -- DELETE_TSEE102
    DELETE TSEE102
    WHERE
    RULE_ID = :RULE_ID
    AND SHP_KND = :SHP_KND
    AND BLK_STR = :BLK_STR
    AND BLK_STR_LEN = :BLK_STR_LEN
    AND LOT_STR = :LOT_STR
    AND PRE_WRK_STG = :PRE_WRK_STG
    AND PRE_WRK_TYP = :PRE_WRK_TYP
    AND NXT_WRK_STG = :NXT_WRK_STG
    AND NXT_WRK_TYP = :NXT_WRK_TYP
  </DELETE_TSEE102>


  <TSEE102_INSERT>
    INSERT INTO TSEE102
    ( RULE_ID ,SHP_KND,BLK_STR,BLK_STR_LEN, LOT_STR,PRE_WRK_STG,PRE_WRK_TYP, NXT_WRK_STG,
    NXT_WRK_TYP, REL_TYP, STD_OST,TRM_TYP,STD_TRM,IN_USR, IN_DAT)
    VALUES
    (:RULE_ID ,:SHP_KND,:BLK_STR, :BLK_STR_LEN, :LOT_STR, :PRE_WRK_STG, :PRE_WRK_TYP, :NXT_WRK_STG,
    :NXT_WRK_TYP, :REL_TYP, :STD_OST,:TRM_TYP,:STD_TRM,:IN_USR, TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI'))
  </TSEE102_INSERT>

  <TSEE102_DELETE>
    DELETE TSEE102
    WHERE RULE_ID=:RULE_ID AND SHP_KND=:SHP_KND AND BLK_STR =:BLK_STR AND BLK_STR_LEN=:BLK_STR_LEN
    AND LOT_STR=:LOT_STR AND PRE_WRK_STG=:PRE_WRK_STG AND PRE_WRK_TYP=:PRE_WRK_TYP AND NXT_WRK_STG=:NXT_WRK_STG
    AND NXT_WRK_TYP=:NXT_WRK_TYP
  </TSEE102_DELETE>

  <TSEE102_UPDATE>
    UPDATE TSEE102
    SET
    REL_TYP = :REL_TYP
    ,STD_OST = :STD_OST
    ,TRM_TYP = :TRM_TYP
    ,STD_TRM = :STD_TRM
    ,UP_USR = :UP_USR
    ,UP_DAT=TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
    WHERE RULE_ID=:RULE_ID AND SHP_KND=:SHP_KND AND BLK_STR =:BLK_STR AND BLK_STR_LEN=:BLK_STR_LEN
    AND LOT_STR=:LOT_STR AND PRE_WRK_STG=:PRE_WRK_STG AND PRE_WRK_TYP=:PRE_WRK_TYP AND NXT_WRK_STG=:NXT_WRK_STG
    AND NXT_WRK_TYP=:NXT_WRK_TYP
  </TSEE102_UPDATE>

  <TSEE102_SELECT_ALL_DESC>
    select RULE_ID,
    SHP_KND
    ,FC_GET_CODDESC(SHP_KND, 'PS101' ) SHP_KND_DESC
    ,BLK_STR
    ,BLK_STR_LEN
    ,LOT_STR
    ,PRE_WRK_STG
    ,FC_GET_WRKSTG_DESC(PRE_WRK_STG) PRE_WRK_STG_DESC
    ,PRE_WRK_TYP
    ,FC_GET_WRKTYP_DESC(PRE_WRK_TYP) PRE_WRK_TYP_DESC
    ,NXT_WRK_STG
    ,FC_GET_WRKSTG_DESC(NXT_WRK_STG) NXT_WRK_STG_DESC
    ,NXT_WRK_TYP
    ,FC_GET_WRKTYP_DESC(NXT_WRK_TYP) NXT_WRK_TYP_DESC
    ,REL_TYP
    ,STD_OST
    ,TRM_TYP
    ,STD_TRM
    from TSEE102
    ORDER BY RULE_ID, BLK_STR, NXT_WRK_STG, NXT_WRK_TYP
  </TSEE102_SELECT_ALL_DESC>

  <!--TSEE102 END-->


  <TSAA002_SELECT_FIG_SHP>
    SELECT FIG_SHP, SHP_DES FROM TSAA002 ORDER BY FIG_SHP
  </TSAA002_SELECT_FIG_SHP>

  <TSFC001_SELECT_DIV_COD_LIST>
    Select distinct(DIV_COD) DIV_COD , ( DIV_COD || '  ' || DIV_DES )DIV_COD_DES FROM TSFC001 WHERE FIG_SHP = :FIG_SHP
  </TSFC001_SELECT_DIV_COD_LIST>

  <TSFA001_SELECT_FIG_SHP>
    SELECT * from TSFA001
    WHERE FIG_SHP = :FIG_SHP AND PLN_FI IS NOT NULL AND PLN_ST IS NOT NULL
  </TSFA001_SELECT_FIG_SHP>

  <TSFA001_SELECT_FIG_SHP_WITH_DIV_COD>
    SELECT * from TSFA001
    WHERE FIG_SHP = :FIG_SHP AND DIV_COD = :DIV_COD AND PLN_FI IS NOT NULL AND PLN_ST IS NOT NULL
  </TSFA001_SELECT_FIG_SHP_WITH_DIV_COD>


  <TSFA001_SELECT_SHPCOD_CONTAINS_DIV>
    SELECT A.SHP_COD, A.ACT_COD, A.ACT_DES, A.PLN_ST, A.PLN_FI,
    A.NET_ST, A.NET_FI, A.STD_TRM, A.PLN_TRM, A.NET_TRM,
    A.MHR_TOT, A.MHR_REL, A.ITM_COD, A.MIS_COD, A.DIV_COD,
    A.DCK_COD, A.WRK_STG, A.WRK_TYP, A.WRK_TYP2,A.DPT_COD,
    A.PNT_SCH, A.ST_OPT_PNT, A.ST_JOE_PNT, A.FI_JOE_PNT,
    A.CPY_SHP, A.QUAY_YN, A.JOO_YN, A.FIG_SHP, A.MHR_GBN,
    A.HO_GUBUN, A.DPT_COD_OR,
    B.DIV_TYP,
    (SELECT DIV_DES FROM TSFC001
    WHERE SHP_COD=A.SHP_COD AND DIV_COD=A.DIV_COD AND ROWNUM =1) DIV_DES
    FROM TSFA001 A, TSFC006 B
    WHERE A.SHP_COD = :SHP_COD
    AND A.DIV_COD IS NOT NULL
    AND A.SHP_COD = B.SHP_COD
    AND A.DIV_COD = B.DIV_COD
    ORDER BY A.DIV_COD, A.WRK_STG, A.WRK_TYP, A.WRK_TYP2
  </TSFA001_SELECT_SHPCOD_CONTAINS_DIV>


  <TSFA001_UPDATE_HHIOMPExtActivityList>
    UPDATE TSFA001 SET
    ACT_DES = :ACT_DES ,PLN_ST = :PLN_ST ,PLN_FI = :PLN_FI
    ,NET_ST = :NET_ST ,NET_FI = :NET_FI ,STD_TRM = :STD_TRM ,PLN_TRM = :PLN_TRM ,NET_TRM = :NET_TRM
    ,MHR_TOT = :MHR_TOT ,MHR_REL = :MHR_REL ,ITM_COD = :ITM_COD ,MIS_COD = :MIS_COD ,DIV_COD = :DIV_COD
    ,DCK_COD = :DCK_COD ,WRK_STG = :WRK_STG ,WRK_TYP = :WRK_TYP ,WRK_TYP2 = :WRK_TYP2 ,DPT_COD = :DPT_COD
    ,PNT_SCH = :PNT_SCH ,ST_OPT_PNT = :ST_OPT_PNT ,ST_JOE_PNT = :ST_JOE_PNT ,FI_JOE_PNT = :FI_JOE_PNT
    ,CPY_SHP = :CPY_SHP ,QUAY_YN = :QUAY_YN ,JOO_YN = :JOO_YN ,FIG_SHP = :FIG_SHP ,MHR_GBN = :MHR_GBN
    ,HO_GUBUN = :HO_GUBUN ,DPT_COD_OR = :DPT_COD_OR ,IP = :IP ,UP_USR = :UP_USR, UP_DAT=TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
    WHERE SHP_COD = :SHP_COD AND ACT_COD = :ACT_COD
  </TSFA001_UPDATE_HHIOMPExtActivityList>

  <!--TSFA003 BEGIN-->
  <TSFA003_SELECT>
    -- TSFA003_SELECT
    SELECT
    SHP_COD
    ,PRE_ACT
    ,AFT_ACT
    ,PRE_NWK
    ,AFT_NWK
    ,HO_GUBUN1
    ,HO_GUBUN2
    ,REL_TYP
    ,STD_OST
    ,OFF_SET
    ,FIG_SHP
    ,IN_DAT
    ,UP_DAT
    ,DE_DAT
    ,IN_USR
    ,UP_USR
    ,PRE_ACT_ID
    ,AFT_ACT_ID
    FROM
    TSFA003
  </TSFA003_SELECT>

  <TSFA003_SHP_COD_SELECT>
    --TSFA003_SHP_COD_SELECT
    SELECT
    SHP_COD
    ,PRE_ACT
    ,AFT_ACT
    ,PRE_NWK
    ,AFT_NWK
    ,HO_GUBUN1
    ,HO_GUBUN2
    ,REL_TYP
    ,STD_OST
    ,OFF_SET
    ,FIG_SHP
    ,IN_DAT
    ,UP_DAT
    ,DE_DAT
    ,IN_USR
    ,UP_USR
    ,PRE_ACT_ID
    ,AFT_ACT_ID
    FROM
    TSFA003
    WHERE SHP_COD = :SHP_COD
  </TSFA003_SHP_COD_SELECT>

  <INSERT_TSFA003>
    -- INSERT_TSFA003
    INSERT INTO TSFA003 (
    SHP_COD
    ,PRE_ACT
    ,AFT_ACT
    ,PRE_NWK
    ,AFT_NWK
    ,HO_GUBUN1
    ,HO_GUBUN2
    ,REL_TYP
    ,STD_OST
    ,OFF_SET
    ,FIG_SHP
    ,IN_DAT
    ,DE_DAT
    ,IN_USR
    ,PRE_ACT_ID
    ,AFT_ACT_ID
    )
    VALUES (
    :SHP_COD
    ,:PRE_ACT
    ,:AFT_ACT
    ,:PRE_NWK
    ,:AFT_NWK
    ,:HO_GUBUN1
    ,:HO_GUBUN2
    ,:REL_TYP
    ,:STD_OST
    ,:OFF_SET
    ,:FIG_SHP
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:DE_DAT
    ,:IN_USR
    ,:PRE_ACT_ID
    ,:AFT_ACT_ID
    )
  </INSERT_TSFA003>
  <UPDATE_TSFA003>
    -- UPDATE_TSFA003
    UPDATE TSFA003 SET
    PRE_NWK = :PRE_NWK
    ,AFT_NWK = :AFT_NWK
    ,HO_GUBUN1 = :HO_GUBUN1
    ,HO_GUBUN2 = :HO_GUBUN2
    ,REL_TYP = :REL_TYP
    ,STD_OST = :STD_OST
    ,OFF_SET = :OFF_SET
    ,FIG_SHP = :FIG_SHP
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,DE_DAT = :DE_DAT
    ,UP_USR = :UP_USR
    ,PRE_ACT_ID = :PRE_ACT_ID
    ,AFT_ACT_ID = :AFT_ACT_ID
    WHERE
    SHP_COD = :SHP_COD
    AND PRE_ACT = :PRE_ACT
    AND AFT_ACT = :AFT_ACT
  </UPDATE_TSFA003>
  <DELETE_TSFA003>
    -- DELETE_TSFA003
    DELETE TSFA003
    WHERE
    SHP_COD = :SHP_COD
    AND PRE_ACT = :PRE_ACT
    AND AFT_ACT = :AFT_ACT
  </DELETE_TSFA003>
  <!--TSFA003 END-->

  <!--TSEA001 BEGIN-->
  <TSEA001_SELECT>
    -- TSEA001_SELECT
    SELECT
    SHP_COD
    ,ACT_COD
    ,LOD_COD
    ,MUL_QTY
    ,MUL_UNT
    ,FIG_SHP
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    ,DE_DAT
    ,MUL_QTY_REAL
    ,MUL_QTY_FORE
    ,LD_COD
    ,ASM_LOD_TOT
    ,MUL_FIX
    FROM
    TSEA001
  </TSEA001_SELECT>
  <TSEA001_SHP_COD_SELECT>
    -- TSEA001_SHP_COD_SELECT
    SELECT
    SHP_COD
    ,ACT_COD
    ,LOD_COD
    ,MUL_QTY
    ,MUL_UNT
    ,FIG_SHP
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    ,DE_DAT
    ,MUL_QTY_REAL
    ,MUL_QTY_FORE
    ,LD_COD
    ,ASM_LOD_TOT
    ,MUL_FIX
    FROM
    TSEA001
    WHERE SHP_COD = :SHP_COD
  </TSEA001_SHP_COD_SELECT>

  <INSERT_TSEA001>
    -- INSERT_TSEA001
    INSERT INTO TSEA001 (
    SHP_COD
    ,ACT_COD
    ,LOD_COD
    ,MUL_QTY
    ,MUL_UNT
    ,FIG_SHP
    ,IN_DAT
    ,IN_USR
    ,DE_DAT
    ,MUL_QTY_REAL
    ,MUL_QTY_FORE
    ,LD_COD
    ,ASM_LOD_TOT
    ,MUL_FIX
    ,MUL_QTY_ORI
    ,FACTOR
    )
    VALUES (
    :SHP_COD
    ,:ACT_COD
    ,:LOD_COD
    ,:MUL_QTY
    ,:MUL_UNT
    ,:FIG_SHP
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:DE_DAT
    ,:MUL_QTY_REAL
    ,:MUL_QTY_FORE
    ,:LD_COD
    ,:ASM_LOD_TOT
    ,:MUL_FIX
    ,:MUL_QTY_ORI
    ,:FACTOR
    )
  </INSERT_TSEA001>
  <UPDATE_TSEA001>
    -- UPDATE_TSEA001
    UPDATE TSEA001 SET
    MUL_QTY = :MUL_QTY
    ,MUL_UNT = :MUL_UNT
    ,FIG_SHP = :FIG_SHP
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    ,DE_DAT = :DE_DAT
    ,MUL_QTY_REAL = :MUL_QTY_REAL
    ,MUL_QTY_FORE = :MUL_QTY_FORE
    ,LD_COD = :LD_COD
    ,ASM_LOD_TOT = :ASM_LOD_TOT
    ,MUL_FIX = :MUL_FIX
    WHERE
    SHP_COD = :SHP_COD
    AND ACT_COD = :ACT_COD
    AND LOD_COD = :LOD_COD
  </UPDATE_TSEA001>
  <DELETE_TSEA001>
    -- DELETE_TSEA001
    DELETE TSEA001
    WHERE
    SHP_COD = :SHP_COD
    AND ACT_COD = :ACT_COD
    AND LOD_COD = :LOD_COD
  </DELETE_TSEA001>
  <!--TSEA001 END-->

  <!--TCM_SAMPLE001 BEGIN-->
  <TCM_SAMPLE001_SELECT>
    -- TCM_SAMPLE001_SELECT
    SELECT
    USER_ID
    ,USER_PW
    ,USER_NAME
    ,USER_DIV
    FROM
    TCM_SAMPLE001
  </TCM_SAMPLE001_SELECT>
  <INSERT_TCM_SAMPLE001>
    -- INSERT_TCM_SAMPLE001
    INSERT INTO TCM_SAMPLE001 (
    USER_ID
    ,USER_PW
    ,USER_NAME
    ,USER_DIV
    )
    VALUES (
    :USER_ID
    ,:USER_PW
    ,:USER_NAME
    ,:USER_DIV
    )
  </INSERT_TCM_SAMPLE001>
  <UPDATE_TCM_SAMPLE001>
    -- UPDATE_TCM_SAMPLE001
    UPDATE TCM_SAMPLE001 SET
    USER_PW = :USER_PW
    ,USER_NAME = :USER_NAME
    ,USER_DIV = :USER_DIV
    WHERE
    USER_ID = :USER_ID
  </UPDATE_TCM_SAMPLE001>
  <DELETE_TCM_SAMPLE001>
    -- DELETE_TCM_SAMPLE001
    DELETE TCM_SAMPLE001
    WHERE
    USER_ID = :USER_ID
  </DELETE_TCM_SAMPLE001>
  <!--TCM_SAMPLE001 END-->

  <!--TSFA001 BEGIN-->
  <TSFA001_SELECT>
    -- TSFA001_SELECT
    SELECT
    SHP_COD
    ,ACT_COD
    ,NWK_ID
    ,ACT_ID
    ,ACT_DES
    ,ACT_TYP
    ,PLN_ST
    ,PLN_FI
    ,PLN_ST_INI
    ,PLN_FI_INI
    ,EST_ST
    ,EST_FI
    ,NET_ST
    ,NET_FI
    ,STD_TRM
    ,PLN_TRM
    ,PLN_TRM_INI
    ,NET_TRM
    ,DPT_COD
    ,MHR_TOT
    ,MHR_STU
    ,MHR_SGI
    ,MHR_REL
    ,MHR_LOD
    ,SCV_TYP
    ,ITM_COD
    ,MIS_COD
    ,DIV_COD
    ,DCK_COD
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,PNT_SCH
    ,ST_OPT_PNT
    ,ST_JOE_PNT
    ,FI_JOE_PNT
    ,FI_OPT_PNT
    ,CPY_SHP
    ,QUAY_YN
    ,JOO_YN
    ,FIG_SHP
    ,IN_DAT
    ,UP_DAT
    ,DE_DAT
    ,IN_USR
    ,UP_USR
    ,MHR_GBN
    ,HO_GUBUN
    ,POS_ID
    ,DPT_COD_OR
    ,UNI_STG
    ,STD_DPT_YN
    ,IP
    ,PID
    ,FIXED_YN
    ,DPT_FIXED_YN
    FROM
    TSFA001
  </TSFA001_SELECT>
  <INSERT_TSFA001>
    -- INSERT_TSFA001
    INSERT INTO TSFA001 (
    SHP_COD
    ,ACT_COD
    ,NWK_ID
    ,ACT_ID
    ,ACT_DES
    ,ACT_TYP
    ,PLN_ST
    ,PLN_FI
    ,PLN_ST_INI
    ,PLN_FI_INI
    ,EST_ST
    ,EST_FI
    ,NET_ST
    ,NET_FI
    ,STD_TRM
    ,PLN_TRM
    ,PLN_TRM_INI
    ,NET_TRM
    ,DPT_COD
    ,MHR_TOT
    ,MHR_STU
    ,MHR_SGI
    ,MHR_REL
    ,MHR_LOD
    ,SCV_TYP
    ,ITM_COD
    ,MIS_COD
    ,DIV_COD
    ,DCK_COD
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,PNT_SCH
    ,ST_OPT_PNT
    ,ST_JOE_PNT
    ,FI_JOE_PNT
    ,FI_OPT_PNT
    ,CPY_SHP
    ,QUAY_YN
    ,JOO_YN
    ,FIG_SHP
    ,IN_DAT
    ,DE_DAT
    ,IN_USR
    ,MHR_GBN
    ,HO_GUBUN
    ,POS_ID
    ,DPT_COD_OR
    ,UNI_STG
    ,STD_DPT_YN
    ,IP
    ,PID
    ,FIXED_YN
    ,DPT_FIXED_YN
    )
    VALUES (
    :SHP_COD
    ,:ACT_COD
    ,:NWK_ID
    ,:ACT_ID
    ,:ACT_DES
    ,:ACT_TYP
    ,:PLN_ST
    ,:PLN_FI
    ,:PLN_ST_INI
    ,:PLN_FI_INI
    ,:EST_ST
    ,:EST_FI
    ,:NET_ST
    ,:NET_FI
    ,:STD_TRM
    ,:PLN_TRM
    ,:PLN_TRM_INI
    ,:NET_TRM
    ,:DPT_COD
    ,:MHR_TOT
    ,:MHR_STU
    ,:MHR_SGI
    ,:MHR_REL
    ,:MHR_LOD
    ,:SCV_TYP
    ,:ITM_COD
    ,:MIS_COD
    ,:DIV_COD
    ,:DCK_COD
    ,:WRK_STG
    ,:WRK_TYP
    ,:WRK_TYP2
    ,:PNT_SCH
    ,:ST_OPT_PNT
    ,:ST_JOE_PNT
    ,:FI_JOE_PNT
    ,:FI_OPT_PNT
    ,:CPY_SHP
    ,:QUAY_YN
    ,:JOO_YN
    ,:FIG_SHP
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:DE_DAT
    ,:IN_USR
    ,:MHR_GBN
    ,:HO_GUBUN
    ,:POS_ID
    ,:DPT_COD_OR
    ,:UNI_STG
    ,:STD_DPT_YN
    ,:IP
    ,:PID
    ,:FIXED_YN
    ,:DPT_FIXED_YN
    )
  </INSERT_TSFA001>
  <UPDATE_TSFA001>
    -- UPDATE_TSFA001
    UPDATE TSFA001 SET
    NWK_ID = :NWK_ID
    ,ACT_ID = :ACT_ID
    ,ACT_DES = :ACT_DES
    ,ACT_TYP = :ACT_TYP
    ,PLN_ST = :PLN_ST
    ,PLN_FI = :PLN_FI
    ,PLN_ST_INI = :PLN_ST_INI
    ,PLN_FI_INI = :PLN_FI_INI
    ,EST_ST = :EST_ST
    ,EST_FI = :EST_FI
    ,NET_ST = :NET_ST
    ,NET_FI = :NET_FI
    ,STD_TRM = :STD_TRM
    ,PLN_TRM = :PLN_TRM
    ,PLN_TRM_INI = :PLN_TRM_INI
    ,NET_TRM = :NET_TRM
    ,DPT_COD = :DPT_COD
    ,MHR_TOT = :MHR_TOT
    ,MHR_STU = :MHR_STU
    ,MHR_SGI = :MHR_SGI
    ,MHR_REL = :MHR_REL
    ,MHR_LOD = :MHR_LOD
    ,SCV_TYP = :SCV_TYP
    ,ITM_COD = :ITM_COD
    ,MIS_COD = :MIS_COD
    ,DIV_COD = :DIV_COD
    ,DCK_COD = :DCK_COD
    ,WRK_STG = :WRK_STG
    ,WRK_TYP = :WRK_TYP
    ,WRK_TYP2 = :WRK_TYP2
    ,PNT_SCH = :PNT_SCH
    ,ST_OPT_PNT = :ST_OPT_PNT
    ,ST_JOE_PNT = :ST_JOE_PNT
    ,FI_JOE_PNT = :FI_JOE_PNT
    ,FI_OPT_PNT = :FI_OPT_PNT
    ,CPY_SHP = :CPY_SHP
    ,QUAY_YN = :QUAY_YN
    ,JOO_YN = :JOO_YN
    ,FIG_SHP = :FIG_SHP
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,DE_DAT = :DE_DAT
    ,UP_USR = :UP_USR
    ,MHR_GBN = :MHR_GBN
    ,HO_GUBUN = :HO_GUBUN
    ,POS_ID = :POS_ID
    ,DPT_COD_OR = :DPT_COD_OR
    ,UNI_STG = :UNI_STG
    ,STD_DPT_YN = :STD_DPT_YN
    ,IP = :IP
    ,PID = :PID
    ,FIXED_YN = :FIXED_YN
    ,DPT_FIXED_YN = :DPT_FIXED_YN
    WHERE
    SHP_COD = :SHP_COD
    AND ACT_COD = :ACT_COD
  </UPDATE_TSFA001>
  <DELETE_TSFA001>
    -- DELETE_TSFA001
    DELETE TSFA001
    WHERE
    SHP_COD = :SHP_COD
    AND ACT_COD = :ACT_COD
  </DELETE_TSFA001>
  <!--TSFA001 END-->

  <!--TSEG105 BEGIN-->
  <TSEG105_SELECT>
    -- TSEG105_SELECT
    SELECT
    RULE_DES
    ,SHP_KND
    ,DCK_COD
    ,H_ITM_COD_LEFT_LEN
    ,H_ITM_COD_CHAR
    ,H_WRK_STG
    ,H_WRK_TYP
    ,H_DPT_COD
    ,EQ_ITM_COD
    ,O_WRK_STG
    ,IN_WRK_TYP
    ,IN_WRK_TYP2
    ,NOTIN_WRK_TYP2
    ,O_DPT_COD
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    ,DE_DAT
    FROM
    TSEG105
  </TSEG105_SELECT>
  <INSERT_TSEG105>
    -- INSERT_TSEG105
    INSERT INTO TSEG105 (
    RULE_DES
    ,SHP_KND
    ,DCK_COD
    ,H_ITM_COD_LEFT_LEN
    ,H_ITM_COD_CHAR
    ,H_WRK_STG
    ,H_WRK_TYP
    ,H_DPT_COD
    ,EQ_ITM_COD
    ,O_WRK_STG
    ,IN_WRK_TYP
    ,IN_WRK_TYP2
    ,NOTIN_WRK_TYP2
    ,O_DPT_COD
    ,IN_DAT
    ,IN_USR
    ,DE_DAT
    )
    VALUES (
    :RULE_DES
    ,:SHP_KND
    ,:DCK_COD
    ,:H_ITM_COD_LEFT_LEN
    ,:H_ITM_COD_CHAR
    ,:H_WRK_STG
    ,:H_WRK_TYP
    ,:H_DPT_COD
    ,:EQ_ITM_COD
    ,:O_WRK_STG
    ,:IN_WRK_TYP
    ,:IN_WRK_TYP2
    ,:NOTIN_WRK_TYP2
    ,:O_DPT_COD
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:DE_DAT
    )
  </INSERT_TSEG105>
  <UPDATE_TSEG105>
    -- UPDATE_TSEG105
    UPDATE TSEG105 SET
    H_ITM_COD_LEFT_LEN = :H_ITM_COD_LEFT_LEN
    ,H_ITM_COD_CHAR = :H_ITM_COD_CHAR
    ,H_WRK_STG = :H_WRK_STG
    ,H_WRK_TYP = :H_WRK_TYP
    ,H_DPT_COD = :H_DPT_COD
    ,EQ_ITM_COD = :EQ_ITM_COD
    ,O_WRK_STG = :O_WRK_STG
    ,IN_WRK_TYP = :IN_WRK_TYP
    ,IN_WRK_TYP2 = :IN_WRK_TYP2
    ,NOTIN_WRK_TYP2 = :NOTIN_WRK_TYP2
    ,O_DPT_COD = :O_DPT_COD
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    ,DE_DAT = :DE_DAT
    WHERE
    RULE_DES = :RULE_DES
    AND SHP_KND = :SHP_KND
    AND DCK_COD = :DCK_COD
  </UPDATE_TSEG105>
  <DELETE_TSEG105>
    -- DELETE_TSEG105
    DELETE TSEG105
    WHERE
    RULE_DES = :RULE_DES
    AND SHP_KND = :SHP_KND
    AND DCK_COD = :DCK_COD
  </DELETE_TSEG105>
  <TSEG105_SELECT_ALL>
    SELECT
    RULE_DES, SHP_KND, DCK_COD
    ,H_ITM_COD_LEFT_LEN, H_ITM_COD_CHAR
    ,H_WRK_STG, FC_GET_WRKSTG_DESC(H_WRK_STG) H_WRKSTG_DES
    ,H_DPT_COD, FC_GET_DPT_DESC(H_DPT_COD) H_DPT_DES
    ,H_WRK_TYP, FC_GET_WRKTYP_DESC(H_WRK_TYP) H_WRKTYP_DES
    ,EQ_ITM_COD
    ,O_WRK_STG, FC_GET_WRKSTG_DESC(O_WRK_STG) O_WRKSTG_DES
    ,IN_WRK_TYP
    ,IN_WRK_TYP2
    ,NOTIN_WRK_TYP2
    ,O_DPT_COD, FC_GET_DPT_DESC(O_DPT_COD) O_DPT_DES
    FROM TSEG105
    ORDER BY RULE_DES, SHP_KND, DCK_COD, H_WRK_STG,H_WRK_TYP, H_DPT_COD, O_WRK_STG, IN_WRK_TYP
  </TSEG105_SELECT_ALL>
  <!--TSEG105 END-->

  <TSAF100_SELECT_DOCK_CODE>
    SELECT DISTINCT(DCK_COD) DCK_COD
    FROM TSAF100
    WHERE FIG_NO=:FIG_NO ORDER BY DCK_COD
  </TSAF100_SELECT_DOCK_CODE>

  <SELECT_FIG_NO_OWNER_LIST>
    -- SELECT_FIG_NO_OWNER_LIST
    SELECT DISTINCT X.OWNRP_NM AS 선주
    FROM OPT.TSAA002 X
    WHERE :WHERE_DATE
    ORDER BY X.OWNRP_NM
  </SELECT_FIG_NO_OWNER_LIST>

  <SELECT_FIG_NO_SHP_KND_LIST>
    --SELECT_FIG_NO_SHP_KND_LIST
    SELECT DISTINCT Y.STD_DES_SHO AS WRK_STG_NM
    FROM OPT.TSAA002 X,OPT.TSXA002 Y
    WHERE :WHERE_DATE
    AND X.SHP_KND = Y.STD_COD_DET
    AND Y.STD_COD = 'PS101'
    ORDER BY STD_DES_SHO
  </SELECT_FIG_NO_SHP_KND_LIST>

  <TSFC008_SELECT_ALL>
    SELECT DIV_TYP FROM TSFC008 ORDER BY DIV_TYP
  </TSFC008_SELECT_ALL>

  <!--TSFC006 BEGIN-->
  <TSFC006_SELECT>
    -- TSFC006_SELECT
    SELECT
    SHP_COD
    ,DIV_COD
    ,FIG_SHP
    ,DIV_TYP
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFC006
  </TSFC006_SELECT>
  <INSERT_TSFC006>
    -- INSERT_TSFC006
    INSERT INTO TSFC006 (
    SHP_COD
    ,DIV_COD
    ,FIG_SHP
    ,DIV_TYP
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :SHP_COD
    ,:DIV_COD
    ,:FIG_SHP
    ,:DIV_TYP
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFC006>
  <UPDATE_TSFC006>
    -- UPDATE_TSFC006
    UPDATE TSFC006 SET
    DIV_COD = :DIV_COD
    ,FIG_SHP = :FIG_SHP
    ,DIV_TYP = :DIV_TYP
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    SHP_COD = :SHP_COD
  </UPDATE_TSFC006>
  <DELETE_TSFC006>
    -- DELETE_TSFC006
    DELETE TSFC006
    WHERE
    SHP_COD = :SHP_COD
  </DELETE_TSFC006>
  <TSFC006_UPDATE>
    UPDATE TSFC006 SET DIV_TYP=:DIV_TYP, UP_USR=:UP_USR, UP_DAT=TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
    WHERE SHP_COD=:SHP_COD AND DIV_COD=:DIV_COD
  </TSFC006_UPDATE>

  <TSFC006_FIGSHP_SELECT>
    SELECT X.SHP_COD,
    X.DES,
    X.DIV_COD,
    X.DIV_DES,
    Y.ITM_COD,
    X.UPP_DIV,
    X.MIN_ST,
    X.MAX_FI,
    DECODE (X.LVL, 1, X.DIV_OFFSET, Y.DIV_OFFSET) DIV_OFFSET,
    Z.DIV_TYP,
    Y.FIG_SHP
    FROM (SELECT SHP_COD,
    DECODE (
    SUBSTR (DIV_COD, 2, 2),
    '00', DIV_DES || '(' || DIV_COD || ')',
    (SELECT C.DIV_DES || '(' || A.UPP_DIV || ')'
    FROM TSFC001 C
    WHERE     C.DIV_COD = A.UPP_DIV
    AND C.SHP_COD = A.SHP_COD
    AND ROWNUM = 1))
    DES,
    DECODE (SUBSTR (DIV_COD, 2, 2), '00', 1, 2) LVL,
    DIV_COD,
    DIV_DES,
    UPP_DIV,
    MIN_ST,
    MAX_FI,
    DIV_OFFSET
    FROM (  SELECT SHP_COD,
    DIV_COD,
    DIV_DES,
    UPP_DIV,
    MIN (EREC_ST) MIN_ST,
    MAX (EREC_FI) MAX_FI,
    MAX (DIV_OFFSET) DIV_OFFSET
    FROM
    (
    SELECT A.SHP_COD,
    A.DIV_COD,
    A.DIV_DES,
    A.UPP_DIV,
    A.ITM_COD,
    A.MIS_COD,
    A.DIV_OFFSET,
    (SELECT PLN_ST FROM TSEA002 B
    WHERE A.SHP_COD = B.SHP_COD AND A.MIS_COD = B.MIS_COD
    AND B.WRK_STG='N' AND B.WRK_TYP = '41') EREC_ST,
    (SELECT PLN_FI FROM TSEA002 B
    WHERE A.SHP_COD = B.SHP_COD AND A.MIS_COD = B.MIS_COD
    AND B.WRK_STG='N' AND B.WRK_TYP = '41') EREC_FI
    FROM TSFC001 A
    WHERE A.SHP_COD = :SHP_COD AND A.DIV_COD &lt;&gt; '000'
    )
    GROUP BY SHP_COD,
    DIV_COD,
    DIV_DES,
    UPP_DIV
    ) A) X,
    TSFC002 Y,
    TSFC006 Z
    WHERE     X.SHP_COD = Y.SHP_COD
    AND X.DIV_COD = Y.DIV_COD
    AND X.SHP_COD = Z.SHP_COD
    AND X.DIV_COD = Z.DIV_COD
  </TSFC006_FIGSHP_SELECT>
  <!--TSFC006 END-->

  <!--TSFC001 BEGIN-->
  <TSFC001_SELECT>
    -- TSFC001_SELECT
    SELECT
    SHP_COD
    ,DIV_COD
    ,ITM_COD
    ,MIS_COD
    ,DIV_LVL
    ,DIV_DES
    ,UPP_DIV
    ,MIS_ST
    ,MIS_FI
    ,FIG_SHP
    ,IN_DAT
    ,UP_DAT
    ,DE_DAT
    ,IN_USR
    ,UP_USR
    ,DIV_OFFSET
    ,BLK_MIS_IND
    ,DIV_BLK_IND
    FROM
    TSFC001
  </TSFC001_SELECT>
  <INSERT_TSFC001>
    -- INSERT_TSFC001
    INSERT INTO TSFC001 (
    SHP_COD
    ,DIV_COD
    ,ITM_COD
    ,MIS_COD
    ,DIV_LVL
    ,DIV_DES
    ,UPP_DIV
    ,MIS_ST
    ,MIS_FI
    ,FIG_SHP
    ,IN_DAT
    ,DE_DAT
    ,IN_USR
    ,DIV_OFFSET
    ,BLK_MIS_IND
    ,DIV_BLK_IND
    )
    VALUES (
    :SHP_COD
    ,:DIV_COD
    ,:ITM_COD
    ,:MIS_COD
    ,:DIV_LVL
    ,:DIV_DES
    ,:UPP_DIV
    ,:MIS_ST
    ,:MIS_FI
    ,:FIG_SHP
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:DE_DAT
    ,:IN_USR
    ,:DIV_OFFSET
    ,:BLK_MIS_IND
    ,:DIV_BLK_IND
    )
  </INSERT_TSFC001>
  <UPDATE_TSFC001>
    -- UPDATE_TSFC001
    UPDATE TSFC001 SET
    MIS_COD = :MIS_COD
    ,DIV_LVL = :DIV_LVL
    ,DIV_DES = :DIV_DES
    ,UPP_DIV = :UPP_DIV
    ,MIS_ST = :MIS_ST
    ,MIS_FI = :MIS_FI
    ,FIG_SHP = :FIG_SHP
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,DE_DAT = :DE_DAT
    ,UP_USR = :UP_USR
    ,DIV_OFFSET = :DIV_OFFSET
    ,BLK_MIS_IND = :BLK_MIS_IND
    ,DIV_BLK_IND = :DIV_BLK_IND
    WHERE
    SHP_COD = :SHP_COD
    AND DIV_COD = :DIV_COD
    AND ITM_COD = :ITM_COD
  </UPDATE_TSFC001>
  <DELETE_TSFC001>
    -- DELETE_TSFC001
    DELETE TSFC001
    WHERE
    SHP_COD = :SHP_COD
    AND DIV_COD = :DIV_COD
    AND ITM_COD = :ITM_COD
  </DELETE_TSFC001>
  <!--TSFC001 END-->


  <!-- 의장 중일정 마스터 스케줄 -->
  <TSDC001_TSDC002_SELECT_COUNT>
    SELECT COUNT(*) COUNT
    FROM :TABLE_NAME
    WHERE SHP_COD = :SHP_COD
    :AND_FIG_NO
  </TSDC001_TSDC002_SELECT_COUNT>
  <!-- 'F' 이후 선각 Act  -->
  <TSEA002_TSEG005_SELECT_HULL_ACT>
    SELECT ACT_COD, ACT_DES, PLN_ST, PLN_FI, PLN_TRM, STD_TRM, DPT_COD
    , FC_GET_NETDAY(PLN_ST) PLN_ST_NET, FC_GET_NETDAY(PLN_FI) PLN_FI_NET
    , WRK_STG, WRK_TYP, WRK_TYP2, MIS_COD, ITM_COD
    , '' DIV_COD, '' DIV_DES, '' DIV_DES2, '1' HO_GUBUN
    , '' PNT_SCH, '' ST_JOE_PNT, null ST_OPT_PNT, '' FI_JOE_PNT, null FI_OPT_PNT
    , '' PNT_ST, '' PNT_FI, '' FIXED_YN, '' DPT_FIXED_YN
    , null MHR_TOT, null MHR_STU, null MHR_SGI, null MHR_REL
    FROM :TABLE_NAME
    WHERE SHP_COD = :SHP_COD
    AND WRK_STG &gt;= 'F'
    AND MIS_COD IS NOT NULL
    :AND_FIG_NO
    ORDER BY ACT_COD
  </TSEA002_TSEG005_SELECT_HULL_ACT>
  <TSFA001_SELECT_OUTFIT_BLOCK_ACT>
    SELECT A.SHP_COD, A.FIG_SHP, A.ACT_COD, A.MIS_COD, A.ITM_COD, A.DPT_COD
    , '' PLN_DPT_COD
    ,A.WRK_STG, A.WRK_TYP, A.WRK_TYP2
    ,A.HO_GUBUN
    ,B.SHP_KND, B.DCK_COD
    FROM TSFA001 A, TSAA002 B
    WHERE
    A.SHP_COD=:SHP_COD
    AND A.SHP_COD = B.SHP_COD
    AND A.WRK_STG &lt;= 'N'
    ORDER BY ACT_COD
  </TSFA001_SELECT_OUTFIT_BLOCK_ACT>


  <TSFC001_SELECT_DIV>
    SELECT D.SHP_COD, D.DIV_COD, D.DIV_DES, D.UPP_DIV, D.ITM_COD, D.MIS_COD, D.DIV_BLK_IND
    , D.DIV_OFFSET, A.PLN_ST MIS_ST, A.PLN_FI MIS_FI, D.MIS_ST ORG_MIS_ST, D.MIS_FI ORG_MIS_FI
    , DECODE(A.PLN_ST || A.PLN_FI, D.MIS_ST || D.MIS_FI, 'N', 'Y') MIS_CHANGED
    FROM
    (SELECT SHP_COD, DIV_COD, DIV_DES, UPP_DIV, ITM_COD, MIS_COD, MIS_ST, MIS_FI, DIV_BLK_IND, DIV_OFFSET
    FROM :DIV_TABLE_NAME
    WHERE SHP_COD = :SHP_COD
    :AND_FIG_NO ) D,
    (SELECT SHP_COD, ITM_COD, PLN_ST, PLN_FI
    FROM :HULL_ACT_TABLE_NAME
    WHERE SHP_COD = :SHP_COD
    AND WRK_STG = 'N'
    AND WRK_TYP = '41'
    :AND_FIG_NO ) A
    WHERE D.ITM_COD = A.ITM_COD(+)
    ORDER BY DIV_COD, MIS_ST, MIS_FI, MIS_COD
  </TSFC001_SELECT_DIV>

  <TSFA001_TSFG001_SELECT_ACT>
    SELECT TS1.ACT_COD, TS1.ACT_DES, TS1.PLN_ST, TS1.PLN_FI, TS1.PLN_TRM
    , FC_GET_NETDAY(PLN_ST) PLN_ST_NET, FC_GET_NETDAY(PLN_FI) PLN_FI_NET
    , TS1.STD_TRM, TS1.MIS_COD, TS1.ITM_COD, TS1.WRK_STG, TS1.WRK_TYP
    , TS1.WRK_TYP2, TS1.DPT_COD, TS1.MHR_TOT, TS1.MHR_STU, TS1.MHR_SGI, TS1.MHR_REL
    , TS1.DIV_COD, TS1.FIXED_YN, TS1.DPT_FIXED_YN
    , (select div_des from tsfc001 where shp_cod=TS1.shp_cod and div_cod = TS1.DIV_COD and rownum = 1) DIV_DES
    , TS1.HO_GUBUN, TS1.PNT_SCH, TS1.ST_JOE_PNT, TS1.ST_OPT_PNT, TS1.FI_JOE_PNT, TS1.FI_OPT_PNT
    , DECODE(SUBSTR(TS1.ST_JOE_PNT,4,1), '1', (SELECT PLN_ST FROM TSDC002 A
    WHERE A.SHP_COD = TS1.SHP_COD
    AND A.WRK_PNT = DECODE(SUBSTR(TS1.ST_JOE_PNT,3,1) ,'0', TS1.ST_JOE_PNT,
    SUBSTR(TS1.ST_JOE_PNT,1,2) || '0' || SUBSTR(TS1.ST_JOE_PNT,3,1))
    ),
    (SELECT PLN_FI FROM TSDC002 A
    WHERE A.SHP_COD = TS1.SHP_COD
    AND A.WRK_PNT = DECODE(SUBSTR(TS1.ST_JOE_PNT,3,1) ,'0', TS1.ST_JOE_PNT,
    SUBSTR(TS1.ST_JOE_PNT,1,2) || '0' || SUBSTR(TS1.ST_JOE_PNT,3,1))
    )) AS PNT_ST
    , DECODE(SUBSTR(TS1.FI_JOE_PNT,4,1), '1', (SELECT PLN_ST FROM TSDC002 A
    WHERE A.SHP_COD = TS1.SHP_COD
    AND A.WRK_PNT = DECODE(SUBSTR(TS1.FI_JOE_PNT,3,1) ,'0', TS1.FI_JOE_PNT,
    SUBSTR(TS1.FI_JOE_PNT,1,2) || '0' || SUBSTR(TS1.FI_JOE_PNT,3,1))
    ),
    (SELECT PLN_FI FROM TSDC002 A
    WHERE A.SHP_COD = TS1.SHP_COD
    AND A.WRK_PNT = DECODE(SUBSTR(TS1.FI_JOE_PNT,3,1) ,'0', TS1.FI_JOE_PNT,
    SUBSTR(TS1.FI_JOE_PNT,1,2) || '0' || SUBSTR(TS1.FI_JOE_PNT,3,1))
    )) AS PNT_FI
    , TRUNC(TO_DATE(TS2.DL,'YYYYMMDDHH24MISS') - to_date(TS1.PLN_ST,'YYYYMMDDHH24MISS')) ST_CHK
    , TRUNC(TO_DATE(TS2.DL,'YYYYMMDDHH24MISS') - to_date(TS1.PLN_FI,'YYYYMMDDHH24MISS')) FI_CHK
    FROM :TABLE_NAME TS1,
    TSAA002 TS2
    WHERE TS1.SHP_COD = TS2.SHP_COD
    AND TS1.SHP_COD = :SHP_COD
    ORDER BY TS1.ACT_COD
  </TSFA001_TSFG001_SELECT_ACT>
  <TSFA003_TSFG002_SELECT_REL>
    SELECT HO_GUBUN1, HO_GUBUN2, PRE_ACT, AFT_ACT, REL_TYP, STD_OST, OFF_SET
    FROM :TABLE_NAME
    WHERE SHP_COD = :SHP_COD
    :AND_FIG_NO
    ORDER BY PRE_ACT, AFT_ACT
  </TSFA003_TSFG002_SELECT_REL>
  <!-- 의장 중일정 관계 삭제 -->
  <TSFA003_DELETE_REL>
    -- 의장 관계 삭제
    DELETE :TABLE_NAME
    WHERE SHP_COD = :SHP_COD
    AND (PRE_ACT = :ACT_COD OR AFT_ACT = :ACT_COD)
    :AND_FIG_NO
  </TSFA003_DELETE_REL>

  <!-- 의장 중일정 Act 삭제 -->
  <TSFA001_DELETE_ACT>
    -- 의장 Act 삭제
    DELETE :TABLE_NAME
    WHERE SHP_COD = :SHP_COD
    AND ACT_COD = :ACT_COD
    :AND_FIG_NO
  </TSFA001_DELETE_ACT>

  <!-- 의장 Act I/F 목록 -->
  <TSFI_TSEI_SELECT_IF_LIST>
    SELECT 'N' IS_CHECKED, FIG_SHP, SHP_COD, SHP_DES, PSP_NR,
    'N' IS_DIV_CHECKED, DIV_CNT, 'Y' DIV_RESULT, 'N' IS_ACT_CHECKED, ACT_CNT, 'Y' ACT_RESULT,
    'N' IS_REL_CHECKED, REL_CNT, 'Y' REL_RESULT, 'N' IS_MUL_CHECKED, MUL_CNT, 'Y' MUL_RESULT,
    (SELECT MAX (IN_DATE)
    FROM TSEI002
    WHERE TSEI002.PSP_NR = PSP_NR
    AND HO_GUBUN IN ('2', '3')) ACT_IN_DATE ,
    (SELECT MAX (IN_DATE)
    FROM TSEI003
    WHERE TSEI003.PSP_NR = PSP_NR
    AND TSEI003.PRE_STG_TYP IN (SELECT WRK_STG || WRK_TYP
    FROM TSEE002
    WHERE HO_GUBUN IN ('2','3'))
    AND TSEI003.AFT_STG_TYP IN (SELECT WRK_STG || WRK_TYP
    FROM TSEE002
    WHERE HO_GUBUN IN ('2','3'))) REL_IN_DATE
    FROM (SELECT B.FIG_SHP FIG_SHP, B.SHP_COD SHP_COD, B.SHP_DES SHP_DES, A.PSP_NR PSP_NR,
    (SELECT COUNT (*) DIVCNT
    FROM TSFI001
    WHERE PSP_NR = A.PSP_NR) DIV_CNT,
    (SELECT COUNT (*) ACTCNT
    FROM TSEI002
    WHERE PSP_NR = A.PSP_NR
    AND HO_GUBUN IN ('2','3')) ACT_CNT,
    (SELECT COUNT (*) RELCNT
    FROM TSEI003
    WHERE PSP_NR = A.PSP_NR
    AND TSEI003.PRE_STG_TYP IN (SELECT WRK_STG || WRK_TYP
    FROM TSEE002
    WHERE HO_GUBUN IN ('2','3'))
    AND TSEI003.AFT_STG_TYP IN (SELECT WRK_STG || WRK_TYP
    FROM TSEE002
    WHERE HO_GUBUN IN ('2','3'))) REL_CNT,
    (SELECT COUNT (*) MULCNT
    FROM TSEI001
    WHERE PSP_NR = A.PSP_NR) MUL_CNT
    FROM (SELECT PSP_NR FROM TSFI001 WHERE PSP_NR &lt;&gt; 0
    UNION
    SELECT PSP_NR FROM TSEI002 WHERE PSP_NR &lt;&gt; 0
    UNION
    SELECT PSP_NR FROM TSEI003 WHERE PSP_NR &lt;&gt; 0
    UNION
    SELECT PSP_NR FROM TSEI001 WHERE PSP_NR &lt;&gt; 0
    ) A,
    TSAA002 B
    WHERE A.PSP_NR = B.PSP_NR
    ) DD
    WHERE DD.DIV_CNT &gt; 0 OR DD.ACT_CNT &gt; 0 OR DD.REL_CNT &gt; 0 OR DD.MUL_CNT &gt; 0
    ORDER BY FIG_SHP
  </TSFI_TSEI_SELECT_IF_LIST>
  <!-- 의장 ACT 업데이트 -->
  <TSFA001_TSFG001_UPDATE_ACT>
    UPDATE :TABLE_NAME
    SET PLN_ST = :PLN_ST
    , PLN_FI = :PLN_FI
    , PLN_TRM = :PLN_TRM
    , DPT_COD = :DPT_COD
    , FIXED_YN = :FIXED_YN
    , DPT_FIXED_YN = :DPT_FIXED_YN
    , UP_DAT = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
    , UP_USR = :UP_USR
    WHERE SHP_COD = :SHP_COD
    AND ACT_COD = :ACT_COD
    :AND_FIG_NO
  </TSFA001_TSFG001_UPDATE_ACT>
  <!-- 탑재 일정 업데이트 -->
  <TSEA002_TSEG005_UPDATE_EREC_ACT>
    -- 탑재일정 업데이트
    UPDATE :TABLE_NAME
    SET PLN_FI = :PLN_FI
    , PLN_TRM = :PLN_TRM
    , UP_DAT = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
    , UP_USR = :UP_USR
    WHERE SHP_COD = :SHP_COD
    AND ACT_COD = :ACT_COD
    AND WRK_STG = 'N'
    AND WRK_TYP = '41'
    :AND_FIG_NO
  </TSEA002_TSEG005_UPDATE_EREC_ACT>
  <!-- 의장 대표 구획 정보 -->
  <TSFC002_TSFG004_SELECT_DAEDIV>
    SELECT ITM_COD, DIV_COD, DIV_OFFSET
    FROM :TABLE_NAME
    WHERE SHP_COD = :SHP_COD
    :AND_FIG_NO
    ORDER BY ITM_COD
  </TSFC002_TSFG004_SELECT_DAEDIV>
  <!-- 의장 구획 정보 -->
  <TSFC001_TSFG003_SELECT_DIV>
    SELECT MIS_COD, UPP_DIV, DIV_COD, ITM_COD, DIV_DES
    FROM :TABLE_NAME
    WHERE SHP_COD = :SHP_COD
    AND MIS_COD IS NOT NULL
    :AND_FIG_NO
    ORDER BY MIS_COD, UPP_DIV, DIV_COD
  </TSFC001_TSFG003_SELECT_DIV>
  <!-- 의장 절점 정보, 원본 소스에는 사업계획 구분 없음 -->
  <TSDC002_SELECT_MILESTONE>
    SELECT A.PLN_ST, A.PLN_FI, A.WRK_PNT, B.WRK_PNT_SHT, B.SIGN
    FROM TSDC002 A,
    TSDB001 B
    WHERE A.SHP_COD = :SHP_COD
    AND A.WRK_PNT = B.WRK_PNT
    AND A.PLN_ST IS NOT NULL
    AND A.PLN_FI IS NOT NULL
    ORDER BY PLN_ST
  </TSDC002_SELECT_MILESTONE>
  <!-- 탑재 일정 업데이트 -->

  <!-- 표준절점 BEGIN -->
  <TSDB002_SHP_TYP_SELECT>
    -- TSDB002_SHP_TYP_SELECT
    -- 표준절점
    SELECT A.SHP_KND, A.SHP_TYP, B.WRK_PNT, B.WRK_PNT_KOR, B.WRK_PNT_ENG,
    B.WRK_PNT_SHT, B.SIGN, B.PNT_SEQ,

    B.PNT_GBN, B.PNT_CNT, B.TOT_PNT,
    B.QUAY_PNT, B.HULL_PNT, B.SPEC_PNT,
    B.RPT_PNT, B.IN_DAT, B.UP_DAT,
    B.IN_USR, B.UP_USR, B.DE_DAT,
    B.MAIN_SEQ, B.SHP_STA_PNT, B.OFFS_PNT
    FROM TSDB002 A, TSDB001 B
    WHERE A.SHP_TYP = :SHP_TYP
    AND A.WRK_PNT = B.WRK_PNT
    ORDER BY B.MAIN_SEQ, B.WRK_PNT
  </TSDB002_SHP_TYP_SELECT>
  <TSDB001_SELECT>
    -- 표준절점 전체
    SELECT A.WRK_PNT, A.WRK_PNT_KOR, A.WRK_PNT_ENG,
    A.WRK_PNT_SHT, A.SIGN, A.PNT_SEQ,
    A.PNT_GBN, A.PNT_CNT, A.TOT_PNT,
    A.QUAY_PNT, A.HULL_PNT, A.SPEC_PNT,
    A.RPT_PNT, A.IN_DAT, A.UP_DAT,
    A.IN_USR, A.UP_USR, A.DE_DAT,
    A.MAIN_SEQ, A.SHP_STA_PNT, A.OFFS_PNT
    FROM TSDB001 A
    ORDER BY A.MAIN_SEQ, A.WRK_PNT
  </TSDB001_SELECT>
  <!-- 표준절점 END -->

  <!--TSDC002 BEGIN-->
  <TSDC002_FIG_SHP_SELECT>
    -- TSDC002_FIG_SHP_SELECT
    SELECT
    A.SHP_COD
    ,A.WRK_PNT
    ,A.PLN_ST
    ,A.PLN_FI
    ,A.PLN_TRM_NET
    ,A.PLN_TRM_CAL
    ,A.NET_ST
    ,A.NET_FI
    ,A.ST_JOE_PNT
    ,A.ST_CDT_TM
    ,A.FI_JOE_PNT
    ,A.FINI_CDT_TM
    ,A.FIG_SHP
    ,B.WRK_PNT_ENG
    ,B.WRK_PNT_KOR
    ,B.WRK_PNT_SHT
    ,B.SIGN
    ,B.PNT_SEQ
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.DE_DAT
    ,A.IN_USR
    ,A.UP_USR
    ,A.DELAY_TYP
    FROM TSDC002 A, TSDB001 B
    WHERE A.FIG_SHP = :FIG_SHP
    AND A.WRK_PNT = B.WRK_PNT(+)
    ORDER BY A.WRK_PNT
  </TSDC002_FIG_SHP_SELECT>

  <!-- 모델선인 경우 -->
  <TSDC002_FIG_SHP_SELECT_MODEL>
    SELECT A.SHP_COD,
    A.WRK_PNT,
    A.PLN_ST,
    A.PLN_FI,
    A.PLN_TRM_NET,
    A.PLN_TRM_CAL,
    A.NET_ST,
    A.NET_FI,
    A.ST_JOE_PNT,
    A.ST_CDT_TM,
    A.FI_JOE_PNT,
    A.FINI_CDT_TM,
    A.FIG_SHP,
    B.WRK_PNT_ENG,
    B.WRK_PNT_KOR,
    B.WRK_PNT_SHT,
    B.SIGN,
    B.PNT_SEQ,
    A.IN_DAT,
    A.UP_DAT,
    A.DE_DAT,
    A.IN_USR,
    A.UP_USR,
    A.DELAY_TYP,
    A.FIG_NO
    FROM TSMG_TSDC002 A, TSDB001 B
    WHERE A.FIG_NO = :FIG_NO
    AND A.FIG_SHP = :FIG_SHP
    AND A.WRK_PNT = B.WRK_PNT(+)
    ORDER BY A.WRK_PNT
  </TSDC002_FIG_SHP_SELECT_MODEL>
  
  
  
  <TSDC002_SELECT>
    -- TSDC002_SELECT
    SELECT
    SHP_COD
    ,WRK_PNT
    ,PLN_ST
    ,PLN_FI
    ,PLN_TRM_NET
    ,PLN_TRM_CAL
    ,NET_ST
    ,NET_FI
    ,ST_JOE_PNT
    ,ST_CDT_TM
    ,FI_JOE_PNT
    ,FINI_CDT_TM
    ,FIG_SHP
    ,IN_DAT
    ,UP_DAT
    ,DE_DAT
    ,IN_USR
    ,UP_USR
    ,DELAY_TYP
    FROM
    TSDC002
  </TSDC002_SELECT>
  <INSERT_TSDC002>
    -- INSERT_TSDC002
    INSERT INTO TSDC002 (
    SHP_COD
    ,WRK_PNT
    ,PLN_ST
    ,PLN_FI
    ,PLN_TRM_NET
    ,PLN_TRM_CAL
    ,NET_ST
    ,NET_FI
    ,ST_JOE_PNT
    ,ST_CDT_TM
    ,FI_JOE_PNT
    ,FINI_CDT_TM
    ,FIG_SHP
    ,IN_DAT
    ,DE_DAT
    ,IN_USR
    ,DELAY_TYP
    )
    VALUES (
    :SHP_COD
    ,:WRK_PNT
    ,:PLN_ST
    ,:PLN_FI
    ,:PLN_TRM_NET
    ,:PLN_TRM_CAL
    ,:NET_ST
    ,:NET_FI
    ,:ST_JOE_PNT
    ,:ST_CDT_TM
    ,:FI_JOE_PNT
    ,:FINI_CDT_TM
    ,:FIG_SHP
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:DE_DAT
    ,:IN_USR
    ,:DELAY_TYP
    )
  </INSERT_TSDC002>
  <UPDATE_TSDC002>
    -- UPDATE_TSDC002
    UPDATE TSDC002 SET
    PLN_ST = :PLN_ST
    ,PLN_FI = :PLN_FI
    ,PLN_TRM_NET = :PLN_TRM_NET
    ,PLN_TRM_CAL = :PLN_TRM_CAL
    ,NET_ST = :NET_ST
    ,NET_FI = :NET_FI
    ,ST_JOE_PNT = :ST_JOE_PNT
    ,ST_CDT_TM = :ST_CDT_TM
    ,FI_JOE_PNT = :FI_JOE_PNT
    ,FINI_CDT_TM = :FINI_CDT_TM
    ,FIG_SHP = :FIG_SHP
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,DE_DAT = :DE_DAT
    ,UP_USR = :UP_USR
    ,DELAY_TYP = :DELAY_TYP
    WHERE
    SHP_COD = :SHP_COD
    AND WRK_PNT = :WRK_PNT
  </UPDATE_TSDC002>
  <DELETE_TSDC002>
    -- DELETE_TSDC002
    DELETE TSDC002
    WHERE
    SHP_COD = :SHP_COD
    AND WRK_PNT = :WRK_PNT
  </DELETE_TSDC002>
  <TSDC002_REV_FIG_SHP_REV_NO_SELECT>
    -- TSDC002_REV_FIG_SHP_REV_NO_SELECT
    -- 호선 절점일정계획 리비전 조회
    SELECT

    A.SHP_COD
    ,A.REV_NO
    ,A.REV_DES
    ,A.WRK_PNT
    ,A.PLN_ST
    ,A.PLN_FI
    ,A.PLN_TRM_NET
    ,A.PLN_TRM_CAL
    ,A.NET_ST
    ,A.NET_FI
    ,A.ST_JOE_PNT
    ,A.ST_CDT_TM
    ,A.FI_JOE_PNT
    ,A.FINI_CDT_TM
    ,A.FIG_SHP
    ,B.WRK_PNT_ENG
    ,B.WRK_PNT_KOR
    ,B.WRK_PNT_SHT
    ,B.SIGN
    ,B.PNT_SEQ
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.DE_DAT
    ,A.IN_USR
    ,A.UP_USR
    ,A.DELAY_TYP
    FROM TSDC002_REV A, TSDB001 B
    WHERE A.FIG_SHP = :FIG_SHP
    AND A.REV_NO = :REV_NO
    AND A.WRK_PNT = B.WRK_PNT(+)
    ORDER BY A.WRK_PNT
  </TSDC002_REV_FIG_SHP_REV_NO_SELECT>
  <TSDC002_REV_NO_LIST_SELECT>
    -- 호선 절점일정계획 리비전 목록
    SELECT DISTINCT FIG_SHP, REV_NO, REV_DES
    FROM TSDC002_REV
    WHERE FIG_SHP = :FIG_SHP
    ORDER BY REV_NO
  </TSDC002_REV_NO_LIST_SELECT>
  <!--TSDC002 END-->


  <TSEG104_COUNT_SHP_COD>
    SELECT COUNT(*) ROW_COUNT
    FROM TSEG104
    WHERE SHP_KND  =
    (SELECT SHP_KND FROM TSAA002
    WHERE SHP_COD=:SHP_COD)
  </TSEG104_COUNT_SHP_COD>


  <!--호선별 표준부서 지정-->
  <TSFA001_TSEG104_SELECT_DIFF_DPT_COD>
    SELECT  'Y' IS_CHECK
    , DECODE(PLN_DPT_COD, NVL(SPC_STD_DPT_COD, CMM_STD_DPT_COD), 'N', 'Y') IS_DIFF
    , SHP_COD, FIG_SHP, ACT_COD, SHP_KND,DCK_COD
    , WRK_TYP, WRK_STG,WRK_TYP2, DIV_COD,ITM_COD
    , PLN_DPT_COD, FC_GET_DPT_DESC(PLN_DPT_COD) PLN_DPT_DESC
    , NVL(SPC_STD_DPT_COD, CMM_STD_DPT_COD) STD_DPT_COD
    , FC_GET_DPT_DESC(NVL(SPC_STD_DPT_COD, CMM_STD_DPT_COD)) STD_DPT_DESC
    FROM
    (
    SELECT A.SHP_COD, A.FIG_SHP, A.ACT_COD, B.SHP_KND, B.DCK_COD
    , A.WRK_TYP, A.WRK_STG,A.WRK_TYP2, A.DIV_COD,A.ITM_COD
    , A.DPT_COD PLN_DPT_COD
    , B.DPT_COD CMM_STD_DPT_COD
    , C.DPT_COD SPC_STD_DPT_COD
    FROM
    (
    SELECT A.SHP_COD, A.FIG_SHP, A.ACT_COD
    , A.WRK_TYP, A.WRK_STG,A.WRK_TYP2, A.DIV_COD,A.ITM_COD
    , A.DPT_COD
    , B.SHP_KND, B.DCK_COD
    FROM TSFA001 A, TSAA002 B
    WHERE A.SHP_COD=:SHP_COD
    AND A.SHP_COD = B.SHP_COD
    -- 선각 연동 룰에서 빠진 ACT는 TSEG104 의 룰을 타도록 하기 위해서 DIV_DOC 없어도 모두 로드함
    --AND A.DIV_COD IS NOT NULL
    )
    A, TSEG104 B, TSEG104 C
    WHERE A.SHP_KND = B.SHP_KND(+)
    AND A.DCK_COD = B.DCK_COD(+)
    AND A.WRK_TYP = B.WRK_TYP(+)
    AND B.WRK_TYP2 = '*'
    AND A.SHP_KND = C.SHP_KND(+)
    AND A.DCK_COD = C.DCK_COD(+)
    AND A.WRK_TYP = C.WRK_TYP(+)
    AND A.WRK_TYP2 = C.WRK_TYP2(+)
    ) :TSFA001_TSEG104_WHERE_DIFF_DPT_COD
    ORDER BY DIV_COD
  </TSFA001_TSEG104_SELECT_DIFF_DPT_COD>

  <TSFA001_TSEG004_SELECT_DIFF_DPT_COD>
    SELECT  'Y' IS_CHECK,A.SHP_COD
    , DECODE(A.DPT_COD,B.DPT_COD,'N', 'Y') IS_DIFF
    , A.FIG_SHP, A.ACT_COD,A.SHP_KND, B.DCK_COD
    , A.WRK_TYP, A.WRK_STG,A.WRK_TYP2, A.DIV_COD,A.ITM_COD
    , A.DPT_COD PLN_DPT_COD, FC_GET_DPT_DESC(A.DPT_COD) PLN_DPT_DESC
    , B.DPT_COD STD_DPT_COD, FC_GET_DPT_DESC(B.DPT_COD) STD_DPT_DESC
    FROM
    (
    SELECT A.SHP_COD, A.FIG_SHP, A.ACT_COD
    , A.WRK_TYP, A.WRK_STG,A.WRK_TYP2, A.DIV_COD,A.ITM_COD
    , A.DPT_COD
    , B.SHP_KND, B.DCK_COD
    FROM TSFA001 A, TSAA002 B
    WHERE A.SHP_COD=:SHP_COD
    AND A.SHP_COD = B.SHP_COD
    --블록 Act도 표준부서 지정
    --AND A.DIV_COD IS NOT NULL
    )
    A, TSEG004 B
    WHERE  A.DCK_COD = B.DCK_COD(+)
    AND A.WRK_TYP = B.WRK_TYP(+) :TSFA001_TSEG004_WHERE_DIFF_DPT_COD
  </TSFA001_TSEG004_SELECT_DIFF_DPT_COD>

  <!--TSFC007 BEGIN-->
  <TSFC007_SELECT>
    -- TSFC007_SELECT
    SELECT
    SHP_KND
    ,WRK_STG
    ,WRK_TYP
    ,VIEW_SEQ
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    ,COL_HEADER
    ,WRK_TYP2
    ,DIV_TYP
    FROM
    TSFC007
  </TSFC007_SELECT>
  <INSERT_TSFC007>
    -- INSERT_TSFC007
    INSERT INTO TSFC007 (
    SHP_KND
    ,WRK_STG
    ,WRK_TYP
    ,VIEW_SEQ
    ,IN_DAT
    ,IN_USR
    ,COL_HEADER
    ,WRK_TYP2
    ,DIV_TYP
    )
    VALUES (
    :SHP_KND
    ,:WRK_STG
    ,:WRK_TYP
    ,:VIEW_SEQ
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:COL_HEADER
    ,:WRK_TYP2
    ,:DIV_TYP
    )
  </INSERT_TSFC007>
  <UPDATE_TSFC007>
    -- UPDATE_TSFC007
    UPDATE TSFC007 SET
    VIEW_SEQ = :VIEW_SEQ
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    ,COL_HEADER = :COL_HEADER
    ,WRK_TYP2 = :WRK_TYP2
    WHERE
    SHP_KND = :SHP_KND
    AND WRK_STG = :WRK_STG
    AND WRK_TYP = :WRK_TYP
    AND DIV_TYP = :DIV_TYP
  </UPDATE_TSFC007>
  <DELETE_TSFC007>
    -- DELETE_TSFC007
    DELETE TSFC007
    WHERE
    SHP_KND = :SHP_KND
    AND WRK_STG = :WRK_STG
    AND WRK_TYP = :WRK_TYP
    AND DIV_TYP = :DIV_TYP
  </DELETE_TSFC007>


  <TSFC007_SHPKND_DIVTYP_SELECT>
    SELECT A.WRK_STG, A.WRK_TYP, A.WRK_TYP2, A.VIEW_SEQ, A.COL_HEADER
    FROM TSFC007 A
    WHERE  A.SHP_KND = :SHP_KND
    AND A.DIV_TYP=:DIV_TYP
    ORDER BY VIEW_SEQ
  </TSFC007_SHPKND_DIVTYP_SELECT>

  <TSFC007_SELECT_ALL>
    SELECT *
    FROM TSFC007
    ORDER BY SHP_KND, DIV_TYP, VIEW_SEQ
  </TSFC007_SELECT_ALL>
  <!--SHP_KND,DIV_TYP,WRK_STG,WRK_TYP,WRK_TYP2,VIEW_SEQ,COL_HEADER,IN_DAT,UP_DAT,IN_USR,UP_USR-->
  <TSFC007_INSERT>
    INSERT INTO TSFC007
    (SHP_KND,DIV_TYP,WRK_STG,WRK_TYP,WRK_TYP2,VIEW_SEQ,COL_HEADER,IN_USR)
    VALUES
    (:SHP_KND,:DIV_TYP,:WRK_STG,:WRK_TYP,:WRK_TYP2,:VIEW_SEQ,:COL_HEADER,:IN_USR)
  </TSFC007_INSERT>
  <TSFC007_DELETE>
    DELETE TSFC007 :WHERE_TSFC007
  </TSFC007_DELETE>
  <TSFC007_WHERE_SHPKND>
    WHERE SHP_KND=:SHP_KND
  </TSFC007_WHERE_SHPKND>
  <TSFC007_WHERE_SHPKND_DIVTYP>
    WHERE SHP_KND=:SHP_KND AND DIV_TYP=:DIV_TYP
  </TSFC007_WHERE_SHPKND_DIVTYP>
  <TSFC007_WHERE_ALL>
    WHERE SHP_KND=:SHP_KND AND DIV_TYP=:DIV_TYP AND WRK_STG=:WRK_STG AND WRK_TYP=:WRK_TYP AND WRK_TYP2 =:WRK_TYP2
  </TSFC007_WHERE_ALL>
  <TSFC007_DELETE_CONDITION>
    DELETE TSFC007 WHERE SHP_KND=:SHP_KND AND DIV_TYP=:DIV_TYP AND WRK_STG=:WRK_STG AND WRK_TYP=:WRK_TYP AND WRK_TYP2 =:WRK_TYP2
  </TSFC007_DELETE_CONDITION>
  <TSFC007_UPDATE>
    UPDATE TSFC007 SET VIEW_SEQ=:VIEW_SEQ, COL_HEADER=:COL_HEADER, UP_USR=:UP_USR, UP_DAT=TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
    WHERE SHP_KND=:SHP_KND AND DIV_TYP=:DIV_TYP AND WRK_STG=:WRK_STG AND WRK_TYP=:WRK_TYP AND WRK_TYP2 =:WRK_TYP2
  </TSFC007_UPDATE>

  <TSFC008_SELECT_ALL>
    SELECT DIV_TYP FROM TSFC008 ORDER BY DIV_TYP
  </TSFC008_SELECT_ALL>
  <!--TSFC007 END-->

  <TSEG004_SELECT_ALL>
    SELECT
    '' SHP_KND
    ,'' SHP_KND_DESC
    , DCK_COD
    , WRK_TYP, FC_GET_WRKTYP_DESC(WRK_TYP) WRK_TYP_DESC
    , '' WRK_TYP2
    , DPT_COD, FC_GET_DPT_DESC(DPT_COD) DPT_DESC
    FROM TSEG004
    ORDER BY WRK_TYP, DPT_COD, DCK_COD
  </TSEG004_SELECT_ALL>
  <TSEG104_SELECT_ALL>
    SELECT
    SHP_KND  , FC_GET_CODDESC(SHP_KND, 'PS101' ) SHP_KND_DESC
    , DCK_COD
    , WRK_TYP, FC_GET_WRKTYP_DESC(WRK_TYP) WRK_TYP_DESC
    , WRK_TYP2
    , DPT_COD, FC_GET_DPT_DESC(DPT_COD) DPT_DESC
    FROM TSEG104
    ORDER BY SHP_KND,WRK_TYP,DPT_COD, DCK_COD

  </TSEG104_SELECT_ALL>
  <T62A0020_SELECT_ACT_COD_FIG_SHP>
    SELECT T1.AUFNR
    , T1.VORNR
    , T1.SHP_NO
    , T1.ACT_NO
    , SUBSTR(T1.ARBPL,1,3) || '0' AS DEPT_CD
    , T1.ARBPL
    , DECODE(SUBSTR(T1.ARBPL,5,1),'W','W','A') AS ARBPL_CHK
    , MIN(T2.WRK_DTE) AS MIN_DTE
    , MAX(T2.WRK_DTE) AS MAX_DTE
    , MAX(T3.REQDATE) AS REQDATE
    , CASE WHEN MAX(T3.REQDATE) IS NULL THEN 'N'
    WHEN MAX(T3.REQDATE) IS NOT NULL AND T3.VNDCOD = 'Y' THEN 'N'
    ELSE 'Y' END CONTRACT_YN
    , COUNT(*)
    FROM C62A.T62A0020 T1
    ,C62A.T62A0030 T2
    ,C62B.T62B4B20 T3
    WHERE T1.AUFNR = T2.AUFNR
    AND T1.VORNR = T2.VORNR
    AND T1.AUFNR = T3.AUFNR(+)
    AND T1.VORNR = T3.VORNR(+)
    AND T1.SHP_NO =:FIG_SHP
    AND T1.ACT_NO = TRIM(:ACT_COD)
    GROUP BY T1.AUFNR
    , T1.VORNR
    , T1.SHP_NO
    , T1.ACT_NO
    , SUBSTR(T1.ARBPL,1,3) || '0'
    , T1.ARBPL
    , T3.VNDCOD
  </T62A0020_SELECT_ACT_COD_FIG_SHP>

  <TSEG004_DELETE_ITEM>
    DELETE TSEG004
    WHERE DCK_COD = :DCK_COD AND WRK_TYP =:WRK_TYP
  </TSEG004_DELETE_ITEM>
  <TSEG004_DELETE_DCK_COD>
    DELETE TSEG004
    WHERE DCK_COD = :DCK_COD
  </TSEG004_DELETE_DCK_COD>
  <TSEG004_DELETE_WRK_TYP>
    DELETE TSEG004
    WHERE WRK_TYP =:WRK_TYP
  </TSEG004_DELETE_WRK_TYP>
  <TSEG004_INSERT>
    INSERT INTO TSEG004
    (DCK_COD,WRK_TYP,DPT_COD,IN_USR, IN_DAT)
    VALUES
    (:DCK_COD,:WRK_TYP,:DPT_COD,:IN_USR, TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI'))
  </TSEG004_INSERT>
  <TSEG004_UPDATE>
    UPDATE TSEG004 SET DPT_COD=:DPT_COD, UP_USR=:UP_USR, UP_DAT=TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
    WHERE DCK_COD=:DCK_COD AND WRK_TYP=:WRK_TYP
  </TSEG004_UPDATE>


  <TSEG104_DELETE>
    DELETE TSEG104
    WHERE SHP_KND = :SHP_KND AND DCK_COD = :DCK_COD AND WRK_TYP =:WRK_TYP AND WRK_TYP2 =:WRK_TYP2
  </TSEG104_DELETE>
  <TSEG104_DELETE_SHP_KND>
    DELETE TSEG104
    WHERE SHP_KND = :SHP_KND
  </TSEG104_DELETE_SHP_KND>
  <TSEG104_DELETE_WRK_TYP>
    DELETE TSEG104
    WHERE WRK_TYP =:WRK_TYP
  </TSEG104_DELETE_WRK_TYP>
  <TSEG104_INSERT>
    INSERT INTO TSEG104
    (SHP_KND,DCK_COD,WRK_TYP,WRK_TYP2,DPT_COD,IN_USR, IN_DAT)
    VALUES
    (:SHP_KND,:DCK_COD,:WRK_TYP,:WRK_TYP2,:DPT_COD,:IN_USR, TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI'))
  </TSEG104_INSERT>
  <TSEG104_UPDATE>
    UPDATE TSEG104 SET DPT_COD=:DPT_COD, UP_USR=:UP_USR, UP_DAT=TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
    WHERE SHP_KND=:SHP_KND AND DCK_COD=:DCK_COD AND WRK_TYP=:WRK_TYP AND WRK_TYP2=:WRK_TYP2
  </TSEG104_UPDATE>

  <!--TSFN004 BEGIN-->
  <TSFN004_SELECT>
    -- TSFN004_SELECT
    SELECT * FROM TSFN004
  </TSFN004_SELECT>
  <TSFN004_WRK_STG_TYP_DISTINCT>
    --TSFN004_WRK_STG_TYP_DISTINCT
    SELECT DISTINCT WRK_STG_TYP, WRK_STG_TYP_DES FROM TSFN004
  </TSFN004_WRK_STG_TYP_DISTINCT>
  <TSFN004_WRK_STG_WRK_TYP_DISTINCT>
    --TSFN004_WRK_STG_WRK_TYP_DISTINCT
    SELECT DISTINCT WRK_STG_TYP, WRK_STG_TYP_DES
    FROM TSFN004
    WHERE WRK_STG = :WRK_STG
  </TSFN004_WRK_STG_WRK_TYP_DISTINCT>


  <TSFN004_WRK_STG_TYP_SELECT>
    -- TSFN004_WRK_STG_TYP_SELECT
    SELECT
    WRK_STG_TYP
    ,WRK_TYP2
    ,WRK_STG_TYP_DES
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2_DES
    ,WRK_TYP2 || '  ' || WRK_TYP2_DES WRK_TYP2_DES_LON
    ,STD_COD
    ,RMK
    ,TAG
    ,TAG2
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN004
    WHERE
    WRK_STG_TYP = :WRK_STG_TYP
    ORDER BY WRK_TYP2
  </TSFN004_WRK_STG_TYP_SELECT>

  <TSEN164_TSFN004_WRK_TYP_DISTINCT_SELECT>
    -- 공정하위 공종 목록
    SELECT STD_COD
    ,STD_COD_DET
    ,STD_DES_SHO
    ,STD_DES_LON
    ,PRJ_GBN
    ,COD_ORD
    ,IN_DAT
    ,UP_DAT
    ,DE_DAT
    ,IN_USR2
    ,UP_USR2
    ,M_DCK_COD_YN
    ,M_LOD_COD_YN
    ,M_SUB_COM_YN
    ,M_SUB_ITM_COM_YN
    FROM TSXA002
    WHERE STD_COD = 'PS106'
    AND STD_COD_DET IN (
    SELECT DISTINCT WRK_TYP
    FROM TSFN004 WHERE WRK_STG = :WRK_STG)
    ORDER BY STD_COD_DET
  </TSEN164_TSFN004_WRK_TYP_DISTINCT_SELECT>


  <INSERT_TSFN004>
    -- INSERT_TSFN004
    INSERT INTO TSFN004 (
    WRK_STG_TYP
    ,WRK_TYP2
    ,WRK_STG_TYP_DES
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2_DES
    ,STD_COD
    ,RMK
    ,TAG
    ,TAG2
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :WRK_STG_TYP
    ,:WRK_TYP2
    ,:WRK_STG_TYP_DES
    ,:WRK_STG
    ,:WRK_TYP
    ,:WRK_TYP2_DES
    ,:STD_COD
    ,:RMK
    ,:TAG
    ,:TAG2
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN004>
  <UPDATE_TSFN004>
    -- UPDATE_TSFN004
    UPDATE TSFN004 SET
    WRK_STG_TYP_DES = :WRK_STG_TYP_DES
    ,WRK_STG = :WRK_STG
    ,WRK_TYP = :WRK_TYP
    ,WRK_TYP2_DES = :WRK_TYP2_DES
    ,STD_COD = :STD_COD
    ,RMK = :RMK
    ,TAG = :TAG
    ,TAG2 = :TAG2
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    WRK_STG_TYP = :WRK_STG_TYP
    AND WRK_TYP2 = :WRK_TYP2
  </UPDATE_TSFN004>
  <DELETE_TSFN004>
    -- DELETE_TSFN004
    DELETE TSFN004
    WHERE
    WRK_STG_TYP = :WRK_STG_TYP
    AND WRK_TYP2 = :WRK_TYP2
  </DELETE_TSFN004>
  <!--TSFN004 END-->

  <!--TSFN009 BEGIN-->
  <TSFN009_CATEGORY_SELECT>
    -- TSFN009_CATEGORY_SELECT
    SELECT
    CATEGORY
    ,GANTT_PATTERN_ID
    ,GANTT_PATTERN_DESC
    ,WRK_STG_TYP
    ,GANTT_TEMPLATE
    ,BORDER_LINE_STYLE
    ,BORDER_BRUSH
    ,BORDER_THICKNESS
    ,PATTERN_FILL_NAME
    ,FILL_PATTERN_BRUSH
    ,FILL_PATTERN_BK
    ,BAR_HEIGHT
    ,CONTENT_HEIGHT
    ,BAR_TOP_MARGIN
    ,TEXT_H_ALIGN
    ,TEXT_V_ALIGN
    ,TEXT_POSITION
    ,FONT_FAMILY
    ,FONT_WEIGHT
    ,FONT_SIZE
    ,FONT_COLOR
    ,SEQ
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN009
    WHERE
    CATEGORY = :CATEGORY
  </TSFN009_CATEGORY_SELECT>
  <INSERT_TSFN009>
    -- INSERT_TSFN009
    INSERT INTO TSFN009 (
    CATEGORY
    ,GANTT_PATTERN_ID
    ,GANTT_PATTERN_DESC
    ,WRK_STG_TYP
    ,GANTT_TEMPLATE
    ,BORDER_LINE_STYLE
    ,BORDER_BRUSH
    ,BORDER_THICKNESS
    ,PATTERN_FILL_NAME
    ,FILL_PATTERN_BRUSH
    ,FILL_PATTERN_BK
    ,BAR_HEIGHT
    ,CONTENT_HEIGHT
    ,BAR_TOP_MARGIN
    ,TEXT_H_ALIGN
    ,TEXT_V_ALIGN
    ,TEXT_POSITION
    ,FONT_FAMILY
    ,FONT_WEIGHT
    ,FONT_SIZE
    ,FONT_COLOR
    ,SEQ
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CATEGORY
    ,:GANTT_PATTERN_ID
    ,:GANTT_PATTERN_DESC
    ,:WRK_STG_TYP
    ,:GANTT_TEMPLATE
    ,:BORDER_LINE_STYLE
    ,:BORDER_BRUSH
    ,:BORDER_THICKNESS
    ,:PATTERN_FILL_NAME
    ,:FILL_PATTERN_BRUSH
    ,:FILL_PATTERN_BK
    ,:BAR_HEIGHT
    ,:CONTENT_HEIGHT
    ,:BAR_TOP_MARGIN
    ,:TEXT_H_ALIGN
    ,:TEXT_V_ALIGN
    ,:TEXT_POSITION
    ,:FONT_FAMILY
    ,:FONT_WEIGHT
    ,:FONT_SIZE
    ,:FONT_COLOR
    ,:SEQ
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN009>
  <UPDATE_TSFN009>
    -- UPDATE_TSFN009
    UPDATE TSFN009 SET
    GANTT_PATTERN_DESC = :GANTT_PATTERN_DESC
    ,WRK_STG_TYP = :WRK_STG_TYP
    ,GANTT_TEMPLATE = :GANTT_TEMPLATE
    ,BORDER_LINE_STYLE = :BORDER_LINE_STYLE
    ,BORDER_BRUSH = :BORDER_BRUSH
    ,BORDER_THICKNESS = :BORDER_THICKNESS
    ,PATTERN_FILL_NAME = :PATTERN_FILL_NAME
    ,FILL_PATTERN_BRUSH = :FILL_PATTERN_BRUSH
    ,FILL_PATTERN_BK = :FILL_PATTERN_BK
    ,BAR_HEIGHT = :BAR_HEIGHT
    ,CONTENT_HEIGHT = :CONTENT_HEIGHT
    ,BAR_TOP_MARGIN = :BAR_TOP_MARGIN
    ,TEXT_H_ALIGN = :TEXT_H_ALIGN
    ,TEXT_V_ALIGN = :TEXT_V_ALIGN
    ,TEXT_POSITION = :TEXT_POSITION
    ,FONT_FAMILY = :FONT_FAMILY
    ,FONT_WEIGHT = :FONT_WEIGHT
    ,FONT_SIZE = :FONT_SIZE
    ,FONT_COLOR = :FONT_COLOR
    ,SEQ = :SEQ
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CATEGORY = :CATEGORY
    AND GANTT_PATTERN_ID = :GANTT_PATTERN_ID
  </UPDATE_TSFN009>
  <DELETE_TSFN009>
    -- DELETE_TSFN009
    DELETE TSFN009
    WHERE
    CATEGORY = :CATEGORY
    AND GANTT_PATTERN_ID = :GANTT_PATTERN_ID
  </DELETE_TSFN009>
  <!--TSFN009 END-->

  <!--TSFN011 BEGIN-->
  <TSAA002_FIG_SHP_INFO>
    --TSAA002_FIG_SHP_INFO
    SELECT
    '000000000000' CASE_NO,
    FIG_SHP,
    'N' BP_YN,
    '신규' REV_DES,
    SHP_COD,
    SHP_DES,
    YD_GBN,
    DCK_COD,
    SHP_KND,
    SHP_TYP,
    SHP_TYP_QTY,
    SHP_TYP_NM,
    WC,
    KL,
    FT,
    LC,
    DL,
    BLD_COD,
    ORI_OWN_NM,
    OWNRP_NM,
    PRJ_GBN,
    CPY_SHP
    FROM TSAA002 A
    WHERE FIG_SHP = :FIG_SHP
  </TSAA002_FIG_SHP_INFO>
  <TSFN011_FIG_SHP_MANAGE_SELECT>
    -- TSFN011_FIG_SHP_MANAGE_SELECT
    -- 호선 케이스 목록
    SELECT A.*
    , (SELECT CASE WHEN SHP_TYP IS NOT NULL THEN 'Y' ELSE 'N' END FROM TSFN002 WHERE SHP_KND = A.SHP_KND AND DCK_COD = A.DCK_COD AND ROWNUM = 1) HAS_STD  -- 표준 유무
    , (SELECT CASE WHEN FIG_SHP IS NOT NULL THEN 'Y' ELSE 'N' END FROM TSFN021 WHERE FIG_SHP = A.FIG_SHP AND CASE_NO = A.CASE_NO AND ROWNUM = 1) HAS_DIV_ITM_MAP -- 구획 품목 매핑
    , (SELECT CASE WHEN FIG_SHP IS NOT NULL THEN 'Y' ELSE 'N' END FROM TSFN022 WHERE FIG_SHP = A.FIG_SHP AND CASE_NO = A.CASE_NO AND ROWNUM = 1) HAS_EREC_DT -- 구획 대표블록 탑재일
    , (SELECT CASE WHEN FIG_SHP IS NOT NULL THEN 'Y' ELSE 'N' END FROM TSFN101 WHERE FIG_SHP = A.FIG_SHP AND CASE_NO = A.CASE_NO AND ROWNUM = 1) HAS_ACT -- ACT
    , (SELECT CASE WHEN FIG_SHP IS NOT NULL THEN 'Y' ELSE 'N' END FROM TSFN102 WHERE FIG_SHP = A.FIG_SHP AND CASE_NO = A.CASE_NO AND ROWNUM = 1) HAS_REL -- 관계
    , (SELECT CASE WHEN FIG_SHP IS NOT NULL THEN 'Y' ELSE 'N' END FROM TSFN103 WHERE FIG_SHP = A.FIG_SHP AND CASE_NO = A.CASE_NO AND ROWNUM = 1) HAS_WRK_PNT -- 절점
    FROM OPT.TSFN011 A
    WHERE FIG_SHP = :FIG_SHP
    ORDER BY CASE_NO
  </TSFN011_FIG_SHP_MANAGE_SELECT>
  <TSFN011_CASE_NO_SELECT>
    -- TSFN011_CASE_NO_SELECT
    SELECT
    *
    FROM
    TSFN011
    WHERE
    CASE_NO = :CASE_NO
  </TSFN011_CASE_NO_SELECT>
  <INSERT_TSFN011>
    -- INSERT_TSFN011
    INSERT INTO TSFN011 (
    CASE_NO
    ,FIG_SHP
    ,BP_YN
    ,REV_DES
    ,SHP_COD
    ,SHP_DES
    ,YD_GBN
    ,DCK_COD
    ,SHP_KND
    ,SHP_TYP
    ,SHP_TYP_QTY
    ,SHP_TYP_NM
    ,WC
    ,KL
    ,FT
    ,LC
    ,DL
    ,BLD_COD
    ,ORI_OWN_NM
    ,OWNRP_NM
    ,PRJ_GBN
    ,CPY_SHP
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    ,REF_CASE_NO
    ,REF_FIG_SHP
    ,CNF_YN
    ,CNF_DAT
    ,CNF_USR
    ,DIV_ERP_IF_DTE
    ,ACT_ERP_IF_DTE
    ,WRK_PNT_REV_NO
    ,REF_MODEL_NO
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:BP_YN
    ,:REV_DES
    ,:SHP_COD
    ,:SHP_DES
    ,:YD_GBN
    ,:DCK_COD
    ,:SHP_KND
    ,:SHP_TYP
    ,:SHP_TYP_QTY
    ,:SHP_TYP_NM
    ,:WC
    ,:KL
    ,:FT
    ,:LC
    ,:DL
    ,:BLD_COD
    ,:ORI_OWN_NM
    ,:OWNRP_NM
    ,:PRJ_GBN
    ,:CPY_SHP
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:REF_CASE_NO
    ,:REF_FIG_SHP
    ,:CNF_YN
    ,:CNF_DAT
    ,:CNF_USR
    ,:DIV_ERP_IF_DTE
    ,:ACT_ERP_IF_DTE
    ,:WRK_PNT_REV_NO
    ,:REF_MODEL_NO
    )
  </INSERT_TSFN011>
  <UPDATE_TSFN011>
    -- UPDATE_TSFN011
    UPDATE TSFN011 SET
    BP_YN = :BP_YN
    ,REV_DES = :REV_DES
    ,SHP_COD = :SHP_COD
    ,SHP_DES = :SHP_DES
    ,YD_GBN = :YD_GBN
    ,DCK_COD = :DCK_COD
    ,SHP_KND = :SHP_KND
    ,SHP_TYP = :SHP_TYP
    ,SHP_TYP_QTY = :SHP_TYP_QTY
    ,SHP_TYP_NM = :SHP_TYP_NM
    ,WC = :WC
    ,KL = :KL
    ,FT = :FT
    ,LC = :LC
    ,DL = :DL
    ,BLD_COD = :BLD_COD
    ,ORI_OWN_NM = :ORI_OWN_NM
    ,OWNRP_NM = :OWNRP_NM
    ,PRJ_GBN = :PRJ_GBN
    ,CPY_SHP = :CPY_SHP
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    ,REF_CASE_NO = :REF_CASE_NO
    ,REF_FIG_SHP = :REF_FIG_SHP
    ,CNF_YN = :CNF_YN
    ,CNF_DAT = :CNF_DAT
    ,CNF_USR = :CNF_USR
    ,DIV_ERP_IF_DTE = :DIV_ERP_IF_DTE
    ,ACT_ERP_IF_DTE = :ACT_ERP_IF_DTE
    ,WRK_PNT_REV_NO = :WRK_PNT_REV_NO
    ,REF_MODEL_NO = :REF_MODEL_NO
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </UPDATE_TSFN011>
  <DELETE_TSFN011>
    -- DELETE_TSFN011
    DELETE TSFN011
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </DELETE_TSFN011>
  <UPDATE_TSFN011_REV_DES>
    -- UPDATE_TSFN011_REV_DES
    -- 리비전 설명 업데이트
    UPDATE TSFN011
    SET REV_DES = :REV_DES
    ,   UP_USR = :UP_USR
    ,   UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    WHERE CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </UPDATE_TSFN011_REV_DES>
  <UPDATE_TSFN011_REF_MODEL_NO>
    -- UPDATE_TSFN011_REF_MODEL_NO
    -- 참고 model no 업데이트
    UPDATE TSFN011
    SET REF_MODEL_NO = :REF_MODEL_NO
    WHERE CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </UPDATE_TSFN011_REF_MODEL_NO>
  <UPDATE_TSFN011_DIV_ERP_IF_DTE>
    -- UPDATE_TSFN011_DIV_ERP_IF_DTE
    -- 구획 정보 ERP IF 시간 업데이트
    UPDATE TSFN011
    SET DIV_ERP_IF_DTE = SYSDATE
    WHERE CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </UPDATE_TSFN011_DIV_ERP_IF_DTE>
  <UPDATE_TSFN011_ACT_ERP_IF_DTE>
    -- UPDATE_TSFN011_ACT_ERP_IF_DTE
    -- ACT 정보 ERP IF 시간 업데이트
    UPDATE TSFN011
    SET DIV_ERP_IF_DTE = SYSDATE
    WHERE CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </UPDATE_TSFN011_ACT_ERP_IF_DTE>
  <MERGE_INTO_TSFN011>
    -- MERGE_INTO_TSFN011
    -- REV에서 호선데이터를 과거데이터를 들고있으면 운영데이터로 업데이트
    MERGE INTO (SELECT * FROM TSFN011
    WHERE SHP_COD = :SHP_COD) OLD
    USING (SELECT *
    FROM TSAA002
    WHERE SHP_COD = :SHP_COD) NEW
    ON (NEW.SHP_COD = OLD.SHP_COD)
    WHEN MATCHED
    THEN
    UPDATE SET OLD.SHP_DES = NEW.SHP_DES,
    OLD.YD_GBN = NEW.YD_GBN,
    OLD.DCK_COD = NEW.DCK_COD,
    OLD.SHP_KND = NEW.SHP_KND,
    OLD.SHP_TYP = NEW.SHP_TYP,
    OLD.SHP_TYP_QTY = NEW.SHP_TYP_QTY,
    OLD.SHP_TYP_NM = NEW.SHP_TYP_NM,
    OLD.WC = NEW.WC,
    OLD.KL = NEW.KL,
    OLD.FT = NEW.FT,
    OLD.LC = NEW.LC,
    OLD.DL = NEW.DL,
    OLD.BLD_COD = NEW.BLD_COD,
    OLD.ORI_OWN_NM = NEW.ORI_OWN_NM,
    OLD.OWNRP_NM = NEW.OWNRP_NM,
    OLD.PRJ_GBN = NEW.PRJ_GBN,
    OLD.CPY_SHP = NEW.CPY_SHP
  </MERGE_INTO_TSFN011>
  <COPY_TSFN011>
    -- COPY_TSFN011
    -- 리비전 복사
    INSERT INTO TSFN011 (CASE_NO, FIG_SHP, BP_YN,
    REV_DES, SHP_COD, SHP_DES,
    YD_GBN, DCK_COD, SHP_KND,
    SHP_TYP, SHP_TYP_QTY, SHP_TYP_NM,
    WC, KL, FT, LC, DL, BLD_COD,
    ORI_OWN_NM, OWNRP_NM, PRJ_GBN,
    CPY_SHP, RMK, IP, PID, IN_USR,
    REF_CASE_NO, REF_FIG_SHP, WRK_PNT_REV_NO, REF_MODEL_NO)
    SELECT
    :TGT_CASE_NO, :TGT_FIG_SHP, BP_YN,
    :TGT_REV_DES, SHP_COD, SHP_DES,
    YD_GBN, DCK_COD, SHP_KND,
    SHP_TYP, SHP_TYP_QTY, SHP_TYP_NM,
    WC, KL, FT, LC, DL, BLD_COD,
    ORI_OWN_NM, OWNRP_NM, PRJ_GBN,
    CPY_SHP, RMK, :IP, :PID, :IN_USR,
    :SRC_CASE_NO, :SRC_FIG_SHP, WRK_PNT_REV_NO, REF_MODEL_NO
    FROM OPT.TSFN011
    WHERE CASE_NO = :SRC_CASE_NO
    AND FIG_SHP = :SRC_FIG_SHP
  </COPY_TSFN011>
  <!--TSFN011 END-->

  <!--TSFN021 BEGIN-->
  <TSED002_EREC_BLOCK_SELECT>
    --TSED002_EREC_BLOCK_SELECT
    --탑재 블록 정보 조회
    SELECT A.*
    , (SELECT COUNT(*) FROM TSFN021 B WHERE :CASE_NO = B.CASE_NO
    AND A.FIG_SHP = B.FIG_SHP
    AND A.ITM_COD = B.ITM_COD) MAP_CNT
    FROM TSED002 A
    WHERE A.FIG_SHP = :FIG_SHP
    AND A.MIS_YN = 'X'
    ORDER BY A.ITM_COD --BLK_SEQNO
  </TSED002_EREC_BLOCK_SELECT>
  <TSFN021_DISTINCT_DIV_SELECT>
    --TSFN021_DISTINCT_DIV_SELECT
    SELECT DIV_COD, DIV_DES
    FROM TSFN021
    WHERE CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND UPP_DIV IS NULL
    ORDER BY DIV_COD
  </TSFN021_DISTINCT_DIV_SELECT>
  <TSFN021_CASE_NO_SELECT>
    --TSFN021_CASE_NO_SELECT
    SELECT *
    FROM
    TSFN021
    WHERE CASE_NO = :CASE_NO
    ORDER BY FIG_SHP, DIV_COD
  </TSFN021_CASE_NO_SELECT>
  <TSFN021_CASE_NO_FIG_SHP_SELECT>
    --TSFN021_CASE_NO_FIG_SHP_SELECT
    SELECT
    A.*
    FROM
    TSFN021 A
    WHERE
    A.CASE_NO = :CASE_NO
    AND A.FIG_SHP = :FIG_SHP
    ORDER BY A.DIV_COD
  </TSFN021_CASE_NO_FIG_SHP_SELECT>
  <TSFN021_CASE_NO_FIG_SHP_SHP_KND_SELECT>
    -- TSFN021_CASE_NO_FIG_SHP_SHP_KND_SELECT
    --특이구획정보를 포함하여 호선 구획/블록 매핑정보 조회
    SELECT
    A.*, B.SPC_YN
    FROM
    TSFN021 A, TSFN001 B
    WHERE
    A.CASE_NO = :CASE_NO
    AND A.FIG_SHP = :FIG_SHP
    AND B.SHP_KND(+) = :SHP_KND
    AND B.SHP_TYP(+) = :SHP_TYP
    AND B.DIV_COD(+) = A.DIV_COD
    ORDER BY A.DIV_COD
  </TSFN021_CASE_NO_FIG_SHP_SHP_KND_SELECT>
  <TSFN021_MAKE_ACT_CASE_NO_FIG_SHP_SELECT>
    -- TSFN021_MAKE_ACT_CASE_NO_FIG_SHP_SELECT
    SELECT
    A.FIG_SHP,
    A.DIV_COD,
    A.ITM_COD,
    A.MIS_COD,
    A.DIV_LVL,
    A.DIV_DES,
    A.UPP_DIV,
    B.PLN_ST MIS_ST,
    B.PLN_FI MIS_FI,
    --A.MIS_ST,
    --A.MIS_FI,
    A.SHP_COD,
    A.DIV_OFFSET,
    A.BLK_MIS_IND,
    A.DIV_BLK_IND,
    A.SEALED_YN,
    A.IP,
    A.PID,
    A.IN_DAT,
    A.UP_DAT,
    A.IN_USR,
    A.UP_USR,
    A.DIV_COD2
    FROM
    TSFN021 A, TSEA002 B
    WHERE A.CASE_NO = :CASE_NO
    AND A.FIG_SHP = :FIG_SHP
    AND A.FIG_SHP = B.FIG_SHP(+)
    AND A.ITM_COD = B.ITM_COD(+)
    AND 'N'  = B.WRK_STG(+)
    AND '41' = B.WRK_TYP(+)
    ORDER BY A.DIV_COD
  </TSFN021_MAKE_ACT_CASE_NO_FIG_SHP_SELECT>
  <!-- 모델선인 경우 -->
  <TSFN021_MAKE_ACT_CASE_NO_FIG_SHP_SELECT_MODEL>
    SELECT A.FIG_SHP,
           A.DIV_COD,
           A.ITM_COD,
           A.MIS_COD,
           A.DIV_LVL,
           A.DIV_DES,
           A.UPP_DIV,
           B.PLN_ST  MIS_ST,
           B.PLN_FI  MIS_FI,
           --A.MIS_ST,
           --A.MIS_FI,
           A.SHP_COD,
           A.DIV_OFFSET,
           A.BLK_MIS_IND,
           A.DIV_BLK_IND,
           A.SEALED_YN,
           A.IP,
           A.PID,
           A.IN_DAT,
           A.UP_DAT,
           A.IN_USR,
           A.UP_USR,
           A.DIV_COD2,
           A.FIG_NO
      FROM TSMG_TSFN021 A, TSEG005 B
     WHERE A.FIG_NO = :FIG_NO
       AND A.FIG_NO = B.FIG_NO(+)
       AND A.CASE_NO = :CASE_NO
       AND A.FIG_SHP = :FIG_SHP
       AND A.FIG_SHP = B.FIG_SHP(+)
       AND A.ITM_COD = B.ITM_COD(+)
       AND 'N' = B.WRK_STG(+)
       AND '41' = B.WRK_TYP(+)
     ORDER BY A.DIV_COD
  </TSFN021_MAKE_ACT_CASE_NO_FIG_SHP_SELECT_MODEL>
  
  <TSFN021_COPY_CASE_NO_FIG_SHP_SELECT>
    -- TSFN021_COPY_CASE_NO_FIG_SHP_SELECT
    SELECT
    *
    FROM
    TSFN021_COPY
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    ORDER BY DIV_COD
  </TSFN021_COPY_CASE_NO_FIG_SHP_SELECT>
  <INSERT_TSFN021>
    -- INSERT_TSFN021
    INSERT INTO TSFN021 (
    CASE_NO
    ,FIG_SHP
    ,DIV_COD
    ,ITM_COD
    ,MIS_COD
    ,DIV_LVL
    ,DIV_DES
    ,UPP_DIV
    ,MIS_ST
    ,MIS_FI
    ,SHP_COD
    ,DIV_OFFSET
    ,BLK_MIS_IND
    ,DIV_BLK_IND
    ,SEALED_YN
    ,DIV_COD2
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:DIV_COD
    ,:ITM_COD
    ,:MIS_COD
    ,:DIV_LVL
    ,:DIV_DES
    ,:UPP_DIV
    ,:MIS_ST
    ,:MIS_FI
    ,:SHP_COD
    ,:DIV_OFFSET
    ,:BLK_MIS_IND
    ,:DIV_BLK_IND
    ,:SEALED_YN
    ,:DIV_COD2
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN021>
  <UPDATE_TSFN021>
    -- UPDATE_TSFN021
    UPDATE TSFN021 SET
    MIS_COD = :MIS_COD
    ,DIV_LVL = :DIV_LVL
    ,DIV_DES = :DIV_DES
    ,UPP_DIV = :UPP_DIV
    ,MIS_ST = :MIS_ST
    ,MIS_FI = :MIS_FI
    ,SHP_COD = :SHP_COD
    ,DIV_OFFSET = :DIV_OFFSET
    ,BLK_MIS_IND = :BLK_MIS_IND
    ,DIV_BLK_IND = :DIV_BLK_IND
    ,SEALED_YN = :SEALED_YN
    ,DIV_COD2 = :DIV_COD2
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND DIV_COD = :DIV_COD
    AND ITM_COD = :ITM_COD
  </UPDATE_TSFN021>
  <DELETE_TSFN021>
    -- DELETE_TSFN021
    DELETE TSFN021
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND DIV_COD = :DIV_COD
    AND ITM_COD = :ITM_COD
  </DELETE_TSFN021>
  <!--TSFN021 END-->

  <!--TSFN022 BEGIN-->
  <TSFN022_CASE_NO_FIG_SHP_SELECT>
    -- TSFN022_CASE_NO_FIG_SHP_SELECT
    SELECT
    CASE_NO
    ,FIG_SHP
    ,DIV_COD
    ,ITM_COD
    ,MIS_DAT
    ,DIV_OFFSET
    ,SHP_COD
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN022
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </TSFN022_CASE_NO_FIG_SHP_SELECT>
  <INSERT_TSFN022>
    -- INSERT_TSFN022
    INSERT INTO TSFN022 (
    CASE_NO
    ,FIG_SHP
    ,DIV_COD
    ,ITM_COD
    ,MIS_DAT
    ,DIV_OFFSET
    ,SHP_COD
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:DIV_COD
    ,:ITM_COD
    ,:MIS_DAT
    ,:DIV_OFFSET
    ,:SHP_COD
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN022>
  <UPDATE_TSFN022>
    -- UPDATE_TSFN022
    UPDATE TSFN022 SET
    ITM_COD = :ITM_COD
    ,MIS_DAT = :MIS_DAT
    ,DIV_OFFSET = :DIV_OFFSET
    ,SHP_COD = :SHP_COD
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND DIV_COD = :DIV_COD
  </UPDATE_TSFN022>
  <DELETE_TSFN022>
    -- DELETE_TSFN022
    DELETE TSFN022
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND DIV_COD = :DIV_COD
  </DELETE_TSFN022>
  <!--TSFN022 END-->


  <!-- MASTER SCHEDULE TSFN101 TSFN102 BEGIN  -->
  <TSEA002_FIG_SHP_STG_N_ACT_SELECT>
    -- TSEA002_FIG_SHP_STG_N_ACT_SELECT
    -- 후행 M/S ACT 생성: 선각 건조 ACT 목록, 족장(N91)은 TSFA001 에서 조회
    -- 호선 구획블록 매핑된 아이템만(추후 처리)
    SELECT SHP_COD, ACT_COD, NWK_ID,
    ACT_ID, ACT_DES, ACT_TYP,
    PLN_ST, PLN_FI, EST_ST,
    EST_FI, NET_ST, NET_FI,
    STD_TRM, PLN_TRM, NET_TRM,
    DPT_COD, IO_GBN, VND_COD,
    MHR_TOT, MHR_STU, MHR_SGI,
    MHR_REL, MHR_LOD, SCV_TYP,
    INI_STG, ITM_COD, ITM_GRP,
    MIS_COD, DCK_COD, WRK_TYP,
    WRK_STG, WRK_TYP2, CPY_SHP,
    JOO_YN, UNI_STG, JBN_J_X,
    JBN_J_Y, ROT_ANG1, FIG_SHP,
    IN_DAT, UP_DAT, IN_USR,
    UP_USR, DE_DAT, MUL_WGT,
    REL_JBN, MHR_GBN, SC_RAT,
    P_POR_EA, P_PO_IND, P_PO_EA_L,
    P_PO_EA_I, S_POR_EA, S_PO_IND,
    S_PO_EA_L, S_PO_EA_I, DP_IND,
    DP_CODE, FI_DT, EX_DPT,
    EX_DIV, MMV_STG, HO_GUBUN,
    POS_ID, PLN_ST_INI, PLN_FI_INI,
    PLN_TRM_INI, INSHOP_TRM, DPT_FIX_YN,
    QM_NET_ST, QM_NET_FI, JO_STG,
    STD_DPT_YN, DPT_COD_OLD, UNI_STG_OLD,
    OUT_JUNGBAN, NAB_DAT, IP,
    PID, DPT_COD_OR, STEUS_OR,
    UNI_STG_1ST, UNI_STG_2ND, UNI_STG_1ST_ATTR,
    UNI_STG_2ND_ATTR, OUT_STOCK_TRM, FIXED_YN,
    NET_FI_PP, NET_ST_PP, REGION_KEY,
    SOJO_TYPE, MOD_STD_TRM, MOD_LOD_COD,
    MOD_MUL_QTY, MIS_AB_OST, SCP_COD,
    SCP_DESC, MOD_VND_COD, ERP_ST,
    ERP_FI, ERP_DPT_COD
    FROM OPT.TSEA002
    WHERE FIG_SHP = :FIG_SHP
    AND WRK_STG = 'N'
    UNION
    SELECT SHP_COD, ACT_COD, NWK_ID,
    ACT_ID, ACT_DES, ACT_TYP,
    PLN_ST, PLN_FI, EST_ST,
    EST_FI, NET_ST, NET_FI,
    STD_TRM, PLN_TRM, NET_TRM,
    DPT_COD, NULL IO_GBN, NULL VND_COD,
    MHR_TOT, MHR_STU, MHR_SGI,
    MHR_REL, MHR_LOD, SCV_TYP,
    NULL INI_STG, ITM_COD, SUBSTR(ITM_COD, 1, 3) ITM_GRP,
    MIS_COD, DCK_COD, WRK_TYP,
    WRK_STG, WRK_TYP2, CPY_SHP,
    JOO_YN, UNI_STG, NULL JBN_J_X,
    NULL JBN_J_Y, NULL ROT_ANG1, FIG_SHP,
    IN_DAT, UP_DAT, IN_USR,
    UP_USR, DE_DAT, NULL MUL_WGT,
    NULL REL_JBN, MHR_GBN, NULL SC_RAT,
    NULL P_POR_EA, NULL P_PO_IND, NULL P_PO_EA_L,
    NULL P_PO_EA_I, NULL S_POR_EA, NULL S_PO_IND,
    NULL S_PO_EA_L, NULL S_PO_EA_I, NULL DP_IND,
    NULL DP_CODE, NULL FI_DT, NULL EX_DPT,
    NULL EX_DIV, NULL MMV_STG, HO_GUBUN,
    POS_ID, PLN_ST_INI, PLN_FI_INI,
    NULL PLN_TRM_INI, NULL INSHOP_TRM, NULL DPT_FIX_YN,
    NULL QM_NET_ST, NULL QM_NET_FI, NULL JO_STG,
    STD_DPT_YN, NULL DPT_COD_OLD, NULL UNI_STG_OLD,
    NULL OUT_JUNGBAN, NULL NAB_DAT, IP,
    PID, NULL DPT_COD_OR, NULL STEUS_OR,
    NULL UNI_STG_1ST, NULL UNI_STG_2ND, NULL UNI_STG_1ST_ATTR,
    NULL UNI_STG_2ND_ATTR, NULL OUT_STOCK_TRM, FIXED_YN,
    NULL NET_FI_PP, NULL NET_ST_PP, NULL REGION_KEY,
    NULL SOJO_TYPE, NULL MOD_STD_TRM, NULL MOD_LOD_COD,
    NULL MOD_MUL_QTY, NULL MIS_AB_OST, NULL SCP_COD,
    NULL SCP_DESC, NULL MOD_VND_COD, PLN_ST ERP_ST,
    PLN_FI ERP_FI, DPT_COD ERP_DPT_COD
    FROM TSFA001
    WHERE FIG_SHP = :FIG_SHP
    AND WRK_STG = 'N'
    AND WRK_TYP = '91'
  </TSEA002_FIG_SHP_STG_N_ACT_SELECT>
  
  <!-- 모델선인 경우 -->
  <TSEA002_FIG_SHP_STG_N_ACT_SELECT_MODEL>
    SELECT SHP_COD,
           ACT_COD,
           NWK_ID,
           ACT_ID,
           ACT_DES,
           ACT_TYP,
           PLN_ST,
           PLN_FI,
           EST_ST,
           EST_FI,
           NET_ST,
           NET_FI,
           STD_TRM,
           PLN_TRM,
           NET_TRM,
           DPT_COD,
           IO_GBN,
           VND_COD,
           MHR_TOT,
           MHR_STU,
           MHR_SGI,
           MHR_REL,
           MHR_LOD,
           SCV_TYP,
           INI_STG,
           ITM_COD,
           ITM_GRP,
           MIS_COD,
           DCK_COD,
           WRK_TYP,
           WRK_STG,
           WRK_TYP2,
           CPY_SHP,
           JOO_YN,
           UNI_STG,
           JBN_J_X,
           JBN_J_Y,
           ROT_ANG1,
           FIG_SHP,
           IN_DAT,
           UP_DAT,
           IN_USR,
           UP_USR,
           DE_DAT,
           MUL_WGT,
           REL_JBN,
           MHR_GBN,
           SC_RAT,
           P_POR_EA,
           P_PO_IND,
           P_PO_EA_L,
           P_PO_EA_I,
           S_POR_EA,
           S_PO_IND,
           S_PO_EA_L,
           S_PO_EA_I,
           DP_IND,
           DP_CODE,
           FI_DT,
           EX_DPT,
           EX_DIV,
           MMV_STG,
           HO_GUBUN,
           POS_ID,
           PLN_ST_INI,
           PLN_FI_INI,
           PLN_TRM_INI,
           INSHOP_TRM,
           DPT_FIX_YN,
           QM_NET_ST,
           QM_NET_FI,
           JO_STG,
           STD_DPT_YN,
           DPT_COD_OLD,
           UNI_STG_OLD,
           OUT_JUNGBAN,
           NAB_DAT,
           IP,
           PID,
           DPT_COD_OR,
           STEUS_OR,
           UNI_STG_1ST,
           UNI_STG_2ND,
           UNI_STG_1ST_ATTR,
           UNI_STG_2ND_ATTR,
           OUT_STOCK_TRM,
           FIXED_YN,
           NET_FI_PP,
           NET_ST_PP,
           REGION_KEY,
           SOJO_TYPE,
           MOD_STD_TRM,
           MOD_LOD_COD,
           MOD_MUL_QTY,
           MIS_AB_OST,
           SCP_COD,
           SCP_DESC,
           MOD_VND_COD,
           ERP_ST,
           ERP_FI,
           ERP_DPT_COD,
           FIG_NO
           FROM OPT.TSEG005
           WHERE FIG_NO = 'MODEL-001'
           AND FIG_SHP = :FIG_SHP
           AND WRK_STG = 'N'
           UNION
           SELECT SHP_COD,
           ACT_COD,
           NWK_ID,
           ACT_ID,
           ACT_DES,
           ACT_TYP,
           PLN_ST,
           PLN_FI,
           EST_ST,
           EST_FI,
           NET_ST,
           NET_FI,
           STD_TRM,
           PLN_TRM,
           NET_TRM,
           DPT_COD,
           NULL IO_GBN,
           NULL VND_COD,
           MHR_TOT,
           MHR_STU,
           MHR_SGI,
           MHR_REL,
           MHR_LOD,
           SCV_TYP,
           NULL INI_STG,
           ITM_COD,
           SUBSTR(ITM_COD, 1, 3) ITM_GRP,
           MIS_COD,
           DCK_COD,
           WRK_TYP,
           WRK_STG,
           WRK_TYP2,
           CPY_SHP,
           JOO_YN,
           UNI_STG,
           NULL JBN_J_X,
           NULL JBN_J_Y,
           NULL ROT_ANG1,
           FIG_SHP,
           IN_DAT,
           UP_DAT,
           IN_USR,
           UP_USR,
           DE_DAT,
           NULL MUL_WGT,
           NULL REL_JBN,
           MHR_GBN,
           NULL SC_RAT,
           NULL P_POR_EA,
           NULL P_PO_IND,
           NULL P_PO_EA_L,
           NULL P_PO_EA_I,
           NULL S_POR_EA,
           NULL S_PO_IND,
           NULL S_PO_EA_L,
           NULL S_PO_EA_I,
           NULL DP_IND,
           NULL DP_CODE,
           NULL FI_DT,
           NULL EX_DPT,
           NULL EX_DIV,
           NULL MMV_STG,
           HO_GUBUN,
           POS_ID,
           PLN_ST_INI,
           PLN_FI_INI,
           NULL PLN_TRM_INI,
           NULL INSHOP_TRM,
           NULL DPT_FIX_YN,
           NULL QM_NET_ST,
           NULL QM_NET_FI,
           NULL JO_STG,
           STD_DPT_YN,
           NULL DPT_COD_OLD,
           NULL UNI_STG_OLD,
           NULL OUT_JUNGBAN,
           NULL NAB_DAT,
           IP,
           PID,
           NULL DPT_COD_OR,
           NULL STEUS_OR,
           NULL UNI_STG_1ST,
           NULL UNI_STG_2ND,
           NULL UNI_STG_1ST_ATTR,
           NULL UNI_STG_2ND_ATTR,
           NULL OUT_STOCK_TRM,
           FIXED_YN,
           NULL NET_FI_PP,
           NULL NET_ST_PP,
           NULL REGION_KEY,
           NULL SOJO_TYPE,
           NULL MOD_STD_TRM,
           NULL MOD_LOD_COD,
           NULL MOD_MUL_QTY,
           NULL MIS_AB_OST,
           NULL SCP_COD,
           NULL SCP_DESC,
           NULL MOD_VND_COD,
           PLN_ST ERP_ST,
           PLN_FI ERP_FI,
           DPT_COD ERP_DPT_COD,
           FIG_NO
      FROM TSMG_TSFA001
     WHERE FIG_NO  = :FIG_NO
       AND FIG_SHP = :FIG_SHP
       AND WRK_STG = 'N'
       AND WRK_TYP = '91'
  </TSEA002_FIG_SHP_STG_N_ACT_SELECT_MODEL>

  <UPDATE_TSEA002_N_STG_PLN_DT>
    -- UPDATE_TSEA002_N_STG_PLN_DT
    -- 선각 ACT N 공정 일정 변경
    UPDATE TSEA002
    SET PLN_ST = :PLN_ST
    , PLN_FI = :PLN_FI
    , IP = :IP
    , PID = :PID
    , UP_USR = :UP_USR
    , UP_DAT = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
    WHERE FIG_SHP = :FIG_SHP
    AND ACT_COD = :ACT_COD
  </UPDATE_TSEA002_N_STG_PLN_DT>

  <!-- 모델선인 경우 -->
  <UPDATE_TSEA002_N_STG_PLN_DT_MODEL>
    UPDATE TSEG005
           SET PLN_ST = :PLN_ST,
           PLN_FI  = :PLN_FI,
           IP      = :IP,
           PID     = :PID,
           UP_USR  = :UP_USR,
           UP_DAT  = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
     WHERE FIG_NO  = :FIG_NO
       AND FIG_SHP = :FIG_SHP
       AND ACT_COD = :ACT_COD
  </UPDATE_TSEA002_N_STG_PLN_DT_MODEL>
  
  <UPDATE_TSEA002_PRONET_DT>
    -- UPDATE_TSEA002_PRONET_DT
    -- 선각 ACT 공정 일정을 PRONET 일정으로 변경
    MERGE INTO OPT.TSEA002 A
    USING (SELECT A.ACT_COD,
    Z.PLN_ST PLN_ST,
    Z.PLN_FI PLN_FI
    FROM OPT.TSEA002 A, CJ01.TSFN402 Z
    WHERE A.FIG_SHP = :FIG_SHP
    AND A.WRK_STG = 'N'
    AND A.FIG_SHP = Z.FIG_SHP(+)
    AND A.ACT_COD = Z.ACT_COD(+)
    AND '000000000000' = Z.CASE_NO(+)
    and A.fig_shp = :FIG_SHP
    AND (A.PLN_ST !=Z.PLN_ST OR A.PLN_FI != Z.PLN_FI) ) B
    ON (A.ACT_COD = B.ACT_COD
    AND A.FIG_SHP = :FIG_SHP)
    WHEN MATCHED THEN
    UPDATE SET A.PLN_ST = B.PLN_ST, A.PLN_FI = B.PLN_FI
  </UPDATE_TSEA002_PRONET_DT>
  
  <UPDATE_TSFN101_PRONET_DT>
    -- UPDATE_TSFN101_PRONET_DT
    -- 후행 ACT 공정 일정을 PRONET 일정으로 변경
    MERGE INTO OPT.TSFN101 A
    USING (
           SELECT A.ACT_COD, 
                  (CASE WHEN (SELECT WRK_GBN 
                                FROM TSAB002 
                               WHERE CAL_DAT = Z.PLN_ST) = '3' THEN (
                                                                      SELECT MIN(CAL_DAT)
                                                                        FROM  TSAB002
                                                                       WHERE NET_DAY = (SELECT NET_DAY 
                                                                                          FROM tsab002
                                                                                         where cal_dat = Z.PLN_ST)
                                                                         AND WRK_GBN = '1'
                                                             )
                 ELSE Z.PLN_ST END) PLN_ST,
                  Z.PLN_FI PLN_FI
             FROM OPT.TSFN101 A, CJ01.TSFN402 Z
            WHERE A.FIG_SHP = :FIG_SHP
              AND A.CASE_NO = :CASE_NO   
              AND A.FIG_SHP = Z.FIG_SHP(+)
              AND A.ACT_COD = Z.ACT_COD(+)
              AND '000000000000' = Z.CASE_NO(+)
              and A.fig_shp = :FIG_SHP
              AND A.ACT_COD LIKE '4%'
              AND (A.PLN_ST !=Z.PLN_ST OR A.PLN_FI != Z.PLN_FI)
                 ) B
        ON (A.ACT_COD = B.ACT_COD 
           AND A.FIG_SHP = :FIG_SHP
           AND A.CASE_NO = :CASE_NO)
    WHEN MATCHED THEN
      UPDATE SET A.PLN_ST = B.PLN_ST, A.PLN_FI = B.PLN_FI
  </UPDATE_TSFN101_PRONET_DT>
    
    <UPDATE_TSFA001_PRONET_DT>
    -- UPDATE_TSFA001_PRONET_DT
    -- 족장 ACT 일정을 PRONET 일정으로 변경
    MERGE INTO OPT.TSFA001 A
    USING (SELECT A.ACT_COD, 
                  (CASE WHEN (SELECT WRK_GBN 
                                FROM TSAB002 
                               WHERE CAL_DAT = Z.PLN_ST) = '3' THEN (
                                                                      SELECT MIN(CAL_DAT)
                                                                        FROM  TSAB002
                                                                       WHERE NET_DAY = (SELECT NET_DAY 
                                                                                          FROM tsab002
                                                                                         where cal_dat = Z.PLN_ST)
                                                                         AND WRK_GBN = '1'
                                                             )
                       ELSE Z.PLN_ST END) PLN_ST,
                  Z.PLN_ST PLN_ST, 
                  Z.PLN_FI PLN_FI
             FROM OPT.TSFA001 A, CJ01.TSFN402 Z
            WHERE A.FIG_SHP = :FIG_SHP
              AND A.WRK_STG = 'N'
               AND A.WRK_TYP = '91'
              AND A.FIG_SHP = Z.FIG_SHP(+)
              AND A.ACT_COD = Z.ACT_COD(+)
              AND '000000000000' = Z.CASE_NO(+)
              AND A.ACT_COD LIKE '4%'
              and A.fig_shp = :FIG_SHP 
              AND (A.PLN_ST !=Z.PLN_ST OR A.PLN_FI != Z.PLN_FI)   ) B
        ON (A.ACT_COD = B.ACT_COD 
           AND A.FIG_SHP = :FIG_SHP)
    WHEN MATCHED THEN
      UPDATE SET A.PLN_ST = B.PLN_ST, A.PLN_FI = B.PLN_FI
  </UPDATE_TSFA001_PRONET_DT>
  <UPDATE_TSFA001_N91_PLN_DT>
    -- UPDATE_TSFA001_N91_PLN_DT
    -- 족장 ACT 일정 변경 TSFA001
    UPDATE TSFA001
    SET PLN_ST = :PLN_ST
    , PLN_FI = :PLN_FI
    , IP = :IP
    , PID = :PID
    , UP_USR = :UP_USR
    , UP_DAT = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
    WHERE FIG_SHP = :FIG_SHP
    AND ACT_COD = :ACT_COD
  </UPDATE_TSFA001_N91_PLN_DT>

  <!-- 모델선인 경우 -->
  <UPDATE_TSFA001_N91_PLN_DT_MODEL>
    UPDATE TSMG_TSFA001
           SET PLN_ST = :PLN_ST,
           PLN_FI  = :PLN_FI,
           IP      = :IP,
           PID     = :PID,
           UP_USR  = :UP_USR,
           UP_DAT  = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
     WHERE FIG_NO  = :FIG_NO
       AND FIG_SHP = :FIG_SHP
       AND ACT_COD = :ACT_COD
  </UPDATE_TSFA001_N91_PLN_DT_MODEL>
    
  <TSFN101_CASE_NO_FIG_SHP_MS_SELECT>
    -- TSFN101_CASE_NO_FIG_SHP_MS_SELECT
    -- 후행 MASTER SCHEDULE ACT 조회
    SELECT X.*
    ,(SELECT DIV_DES FROM TSFN021 WHERE FIG_SHP = X.FIG_SHP AND CASE_NO = X.CASE_NO AND DIV_COD = X.DIV_COD) DIV_DES
    ,(SELECT DIV_DES FROM TSFN021 WHERE FIG_SHP = X.FIG_SHP AND CASE_NO = X.CASE_NO AND DIV_COD = X.UPP_DIV) UPP_DIV_DES
    FROM (
    SELECT A.CASE_NO
    ,A.FIG_SHP
    ,C.SHP_KND
    ,CASE WHEN A.HO_GUBUN = '1' THEN B.ITM_COD||A.WRK_STG||A.WRK_TYP||A.WRK_TYP2||'  ' ELSE A.ACT_COD END ACT_COD
    ,A.ACT_COD ORG_ACT_COD
    ,A.SHP_COD
    ,A.NWK_ID
    ,A.ACT_ID
    ,A.ACT_DES
    ,A.ACT_TYP
    ,A.PLN_ST
    ,A.PLN_FI
    ,A.PLN_ST_INI
    ,A.PLN_FI_INI
    ,A.EST_ST
    ,A.EST_FI
    ,A.NET_ST
    ,A.NET_FI
    ,A.STD_TRM
    ,A.PLN_TRM
    ,A.PLN_TRM_INI
    ,A.NET_TRM
    ,A.DPT_COD
    ,A.MHR_TOT
    ,A.MHR_STU
    ,A.MHR_SGI
    ,A.MHR_REL
    ,A.MHR_LOD
    ,A.SCV_TYP
    ,CASE WHEN A.HO_GUBUN = '1' THEN B.ITM_COD ELSE A.ITM_COD END ITM_COD
    ,A.MIS_COD
    ,A.DIV_COD
    ,(SELECT UPP_DIV FROM TSFN001 WHERE SHP_KND = C.SHP_KND AND DIV_COD = A.DIV_COD) UPP_DIV
    ,A.DCK_COD
    ,A.WRK_STG
    ,A.WRK_TYP
    ,A.WRK_TYP2
    ,A.PNT_SCH
    ,A.ST_OPT_PNT
    ,A.ST_JOE_PNT
    ,A.FI_JOE_PNT
    ,A.FI_OPT_PNT
    ,A.CPY_SHP
    ,A.QUAY_YN
    ,A.JOO_YN
    ,A.MHR_GBN
    ,A.HO_GUBUN
    ,A.POS_ID
    ,A.DPT_COD_OR
    ,A.UNI_STG
    ,A.STD_DPT_YN
    ,A.FIXED_YN
    ,A.DPT_FIXED_YN
    ,A.VIEW_SEQ
    ,A.SEALED_YN
    ,A.IP
    ,A.PID
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.IN_USR
    ,A.UP_USR
    FROM TSFN101 A,
    (SELECT FIG_SHP, CASE_NO, DIV_COD, ITM_COD
    FROM (SELECT FIG_SHP, CASE_NO, DIV_COD, ITM_COD, ROW_NUMBER() OVER (PARTITION BY DIV_COD ORDER BY MIS_ST DESC) RN
    FROM TSFN021
    WHERE FIG_SHP = :FIG_SHP
    AND CASE_NO = :CASE_NO)
    WHERE RN = 1
    ) B,
    TSAA002 C
    WHERE A.FIG_SHP = :FIG_SHP  -- '2912'
    AND A.CASE_NO = :CASE_NO    -- '000000000001'
    AND A.FIG_SHP = C.FIG_SHP
    AND A.FIG_SHP = B.FIG_SHP
    AND A.CASE_NO = B.CASE_NO
    AND A.DIV_COD = B.DIV_COD) X
    ORDER BY X.DIV_COD, X.VIEW_SEQ
  </TSFN101_CASE_NO_FIG_SHP_MS_SELECT>

  <TSFN101_CASE_NO_FIG_SHP_MS_SELECT2>
	  -- TSFN101_CASE_NO_FIG_SHP_MS_SELECT2
	  -- 후행 MASTER SCHEDULE ACT 조회
	  -- 건조 ACT는 TSEA002에서, 족장(N91)은 TSFA001 에서
	  -- ACT_DES 중복 첨부 현상 이중CASE처리
	  SELECT Y.*
	  ,Y.WRK_TYP_DES || ' ' || Y.WRK_TYP2_DES WRK_DES
	  ,Z.PLN_ST PRONET_PLN_ST, Z.PLN_FI PRONET_PLN_FI
	  ,CASE WHEN Z.NET_ST IS NULL THEN (SELECT MIN(WORK_DATE) FROM CJ01.TSFN402_RESULT WHERE CASE_NO = '000000000000' AND FIG_SHP = Y.FIG_SHP AND ACT_COD = Y.ACT_COD) ELSE Z.NET_ST END PRONET_NET_ST
	  ,CASE WHEN Z.NET_FI IS NULL THEN (SELECT MAX(WORK_DATE) FROM CJ01.TSFN402_RESULT WHERE CASE_NO = '000000000000' AND FIG_SHP = Y.FIG_SHP AND ACT_COD = Y.ACT_COD) ELSE Z.NET_FI END PRONET_NET_FI
	  FROM (
	  SELECT X.*
	  ,(SELECT MAX(DIV_DES) FROM TSFN021 WHERE FIG_SHP = X.FIG_SHP AND CASE_NO = X.CASE_NO AND DIV_COD = X.DIV_COD) DIV_DES
	  ,(SELECT MAX(DIV_DES) FROM TSFN021 WHERE FIG_SHP = X.FIG_SHP AND CASE_NO = X.CASE_NO AND DIV_COD = X.UPP_DIV) UPP_DIV_DES
	  ,FC_GET_WRKTYP_DESC(X.WRK_TYP) WRK_TYP_DES
	  ,(SELECT WRK_TYP2_DES FROM TSFN004 WHERE WRK_STG_TYP = X.WRK_STG||X.WRK_TYP AND WRK_TYP2 = X.WRK_TYP2) WRK_TYP2_DES
	  FROM (
	  SELECT :CASE_NO CASE_NO
	  ,A.FIG_SHP
	  ,C.SHP_KND
	  ,A.ACT_COD ACT_COD
	  ,A.ACT_COD ORG_ACT_COD
	  ,A.SHP_COD
	  ,A.NWK_ID
	  ,A.ACT_ID
	  ,CASE SUBSTR(A.ACT_COD,5,1) WHEN 'P' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(P)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'C' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(C)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'S' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(S)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'A' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(A)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'M' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(M)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'F' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(F)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  ELSE A.ACT_DES
	  END ACT_DES
	  ,A.ACT_TYP
	  ,A.PLN_ST
	  ,A.PLN_FI
	  ,A.PLN_ST PLN_ST_ORG
	  ,A.PLN_FI PLN_FI_ORG
	  ,A.PLN_ST_INI
	  ,A.PLN_FI_INI
	  ,A.EST_ST
	  ,A.EST_FI
	  ,A.NET_ST
	  ,A.NET_FI
	  ,A.STD_TRM
	  ,A.PLN_TRM
	  ,0 PLN_TRM_INI --,A.PLN_TRM_INI
	  ,A.NET_TRM
	  ,A.DPT_COD
	  ,a.DPT_COD DPT_COD_ORG
	  ,A.MHR_TOT
	  ,A.MHR_STU
	  ,A.MHR_SGI
	  ,A.MHR_REL
	  ,A.MHR_LOD
	  ,A.SCV_TYP
	  ,A.ITM_COD ITM_COD
	  ,A.MIS_COD
	  ,B.DIV_COD
	  ,(SELECT UPP_DIV FROM TSFN001 WHERE SHP_KND = C.SHP_KND AND DIV_COD = B.DIV_COD) UPP_DIV
	  ,A.DCK_COD
	  ,A.WRK_STG
	  ,A.WRK_TYP
	  ,A.WRK_TYP2
	  ,'' PNT_SCH
	  ,0 ST_OPT_PNT
	  ,'' ST_JOE_PNT
	  ,'' FI_JOE_PNT
	  ,0 FI_OPT_PNT
	  ,A.CPY_SHP
	  ,'N' QUAY_YN
	  ,A.JOO_YN
	  ,A.MHR_GBN
	  ,A.HO_GUBUN
	  ,A.POS_ID
	  ,A.DPT_COD_OR
	  ,A.UNI_STG
	  ,A.STD_DPT_YN
	  ,A.FIXED_YN
	  ,'Y' DPT_FIXED_YN
	  ,(SELECT NVL(MIN(VIEW_SEQ), 0) FROM OPT.TSFN002 WHERE MODEL_NO = NVL(D.REF_MODEL_NO, (C.SHP_TYP||' #'||C.DCK_COD)) AND DIV_COD = B.DIV_COD AND WRK_TYP2 = A.WRK_TYP2 AND WRK_STG_TYP = (A.WRK_STG||A.WRK_TYP)) VIEW_SEQ
	  ,'' SEALED_YN
	  ,A.IP
	  ,A.PID
	  ,A.IN_DAT
	  ,A.UP_DAT
	  ,A.IN_USR
	  ,A.UP_USR
	  FROM OPT.TSEA002 A, OPT.TSFN021 B, OPT.TSAA002 C, OPT.TSFN011 D
	  WHERE A.FIG_SHP = :FIG_SHP
	  AND A.WRK_STG = 'N'
	  AND A.FIG_SHP = B.FIG_SHP
	  AND :CASE_NO = B.CASE_NO
	  AND A.ITM_COD = B.ITM_COD
	  AND A.FIG_SHP = C.FIG_SHP
	  AND B.FIG_SHP = D.FIG_SHP
	  AND B.CASE_NO = D.CASE_NO
	  UNION
	  SELECT :CASE_NO CASE_NO
	  ,A.FIG_SHP
	  ,C.SHP_KND
	  ,A.ACT_COD ACT_COD
	  ,A.ACT_COD ORG_ACT_COD
	  ,A.SHP_COD
	  ,A.NWK_ID
	  ,A.ACT_ID
	  ,CASE SUBSTR(A.ACT_COD,5,1) WHEN 'P' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(P)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'C' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(C)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'S' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(S)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'A' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(A)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'M' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(M)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'F' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(F)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  ELSE A.ACT_DES
	  END ACT_DES
	  ,A.ACT_TYP
	  ,A.PLN_ST
	  ,A.PLN_FI
	  ,A.PLN_ST PLN_ST_ORG
	  ,A.PLN_FI PLN_FI_ORG
	  ,A.PLN_ST_INI
	  ,A.PLN_FI_INI
	  ,A.EST_ST
	  ,A.EST_FI
	  ,A.NET_ST
	  ,A.NET_FI
	  ,A.STD_TRM
	  ,A.PLN_TRM
	  ,0 PLN_TRM_INI --,A.PLN_TRM_INI
	  ,A.NET_TRM
	  ,A.DPT_COD
	  ,a.DPT_COD DPT_COD_ORG
	  ,A.MHR_TOT
	  ,A.MHR_STU
	  ,A.MHR_SGI
	  ,A.MHR_REL
	  ,A.MHR_LOD
	  ,A.SCV_TYP
	  ,A.ITM_COD ITM_COD
	  ,A.MIS_COD
	  ,B.DIV_COD
	  ,(SELECT UPP_DIV FROM TSFN001 WHERE SHP_KND = C.SHP_KND AND DIV_COD = B.DIV_COD) UPP_DIV
	  ,A.DCK_COD
	  ,A.WRK_STG
	  ,A.WRK_TYP
	  ,A.WRK_TYP2
	  ,'' PNT_SCH
	  ,0 ST_OPT_PNT
	  ,'' ST_JOE_PNT
	  ,'' FI_JOE_PNT
	  ,0 FI_OPT_PNT
	  ,A.CPY_SHP
	  ,'N' QUAY_YN
	  ,A.JOO_YN
	  ,A.MHR_GBN
	  ,A.HO_GUBUN
	  ,A.POS_ID
	  ,A.DPT_COD_OR
	  ,A.UNI_STG
	  ,A.STD_DPT_YN
	  ,A.FIXED_YN
	  ,'Y' DPT_FIXED_YN
	  ,(SELECT NVL(MIN(VIEW_SEQ), 0) FROM OPT.TSFN002 WHERE MODEL_NO = NVL(D.REF_MODEL_NO, (C.SHP_TYP||' #'||C.DCK_COD)) AND DIV_COD = B.DIV_COD AND WRK_TYP2 = A.WRK_TYP2 AND WRK_STG_TYP = (A.WRK_STG||A.WRK_TYP)) VIEW_SEQ
	  ,'' SEALED_YN
	  ,A.IP
	  ,A.PID
	  ,A.IN_DAT
	  ,A.UP_DAT
	  ,A.IN_USR
	  ,A.UP_USR
	  FROM TSFA001 A, TSFN021 B, TSAA002 C, OPT.TSFN011 D
	  WHERE A.FIG_SHP = :FIG_SHP
	  AND A.WRK_STG = 'N'
	  AND A.WRK_TYP = '91'
	  AND A.FIG_SHP = B.FIG_SHP
	  AND :CASE_NO = B.CASE_NO
	  AND A.ITM_COD = B.ITM_COD
	  AND A.FIG_SHP = C.FIG_SHP
	  AND B.FIG_SHP = D.FIG_SHP
	  AND B.CASE_NO = D.CASE_NO
	  UNION
	  SELECT A.CASE_NO
	  ,A.FIG_SHP
	  ,C.SHP_KND
	  ,A.ACT_COD ACT_COD
	  ,A.ACT_COD ORG_ACT_COD
	  ,A.SHP_COD
	  ,A.NWK_ID
	  ,A.ACT_ID
	  ,CASE SUBSTR(A.ACT_COD,5,1) WHEN 'P' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(P)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'C' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(C)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'S' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(S)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'A' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(A)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'M' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(M)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  WHEN 'F' THEN
	  CASE WHEN SUBSTR(A.ACT_DES,-3,3) != '(F)' THEN A.ACT_DES||' ('||SUBSTR(A.ACT_COD,5,1)||')' ELSE A.ACT_DES END
	  ELSE A.ACT_DES
	  END ACT_DES
	  ,A.ACT_TYP
	  ,A.PLN_ST
	  ,A.PLN_FI
	  ,A.PLN_ST PLN_ST_ORG
	  ,A.PLN_FI PLN_FI_ORG
	  ,A.PLN_ST_INI
	  ,A.PLN_FI_INI
	  ,A.EST_ST
	  ,A.EST_FI
	  ,A.NET_ST
	  ,A.NET_FI
	  ,A.STD_TRM
	  ,A.PLN_TRM
	  ,A.PLN_TRM_INI
	  ,A.NET_TRM
	  ,A.DPT_COD
	  ,a.DPT_COD DPT_COD_ORG
	  ,A.MHR_TOT
	  ,A.MHR_STU
	  ,A.MHR_SGI
	  ,A.MHR_REL
	  ,A.MHR_LOD
	  ,A.SCV_TYP
	  ,A.ITM_COD ITM_COD
	  ,A.MIS_COD
	  ,A.DIV_COD
	  ,(SELECT UPP_DIV FROM TSFN001 WHERE SHP_KND = C.SHP_KND AND DIV_COD = A.DIV_COD) UPP_DIV
	  ,A.DCK_COD
	  ,A.WRK_STG
	  ,A.WRK_TYP
	  ,A.WRK_TYP2
	  ,A.PNT_SCH
	  ,A.ST_OPT_PNT
	  ,A.ST_JOE_PNT
	  ,A.FI_JOE_PNT
	  ,A.FI_OPT_PNT
	  ,A.CPY_SHP
	  ,A.QUAY_YN
	  ,A.JOO_YN
	  ,A.MHR_GBN
	  ,A.HO_GUBUN
	  ,A.POS_ID
	  ,A.DPT_COD_OR
	  ,A.UNI_STG
	  ,A.STD_DPT_YN
	  ,A.FIXED_YN
	  ,A.DPT_FIXED_YN
	  ,A.VIEW_SEQ
	  ,A.SEALED_YN
	  ,A.IP 
	  ,A.PID
	  ,A.IN_DAT
	  ,A.UP_DAT
	  ,A.IN_USR
	  ,A.UP_USR
	  FROM TSFN101 A, TSAA002 C
	  WHERE A.FIG_SHP = :FIG_SHP  -- '2912'
	  AND A.CASE_NO = :CASE_NO    -- '000000000001'
	  AND A.FIG_SHP = C.FIG_SHP) X ) Y, CJ01.TSFN402 Z
	  WHERE Y.FIG_SHP = Z.FIG_SHP(+)
	  AND Y.ACT_COD = Z.ACT_COD(+)
	  AND '000000000000' = Z.CASE_NO(+)
	  ORDER BY Y.DIV_COD, Y.VIEW_SEQ, Y.ITM_COD, Y.WRK_STG, Y.WRK_TYP
  </TSFN101_CASE_NO_FIG_SHP_MS_SELECT2>
  
  <!-- 모델선인 경우 -->
  <TSFN101_CASE_NO_FIG_SHP_MS_SELECT2_MODEL>
	  SELECT Y.*
	  , Y.WRK_TYP_DES || ' ' || Y.WRK_TYP2_DES WRK_DES
	  , Y.PLN_ST PRONET_PLN_ST
	  , Y.PLN_FI PRONET_PLN_FI
	  , '' AS PRONET_NET_ST
	  , '' AS PRONET_NET_FI
	  FROM (SELECT X.*
	  , (SELECT MAX(DIV_DES)
	  FROM TSMG_TSFN021
	  WHERE FIG_NO = X.FIG_NO
	  AND FIG_SHP = X.FIG_SHP
	  AND CASE_NO = X.CASE_NO
	  AND DIV_COD = X.DIV_COD) AS DIV_DES
	  , (SELECT MAX(DIV_DES)
	  FROM TSMG_TSFN021
	  WHERE FIG_NO = X.FIG_NO
	  AND FIG_SHP = X.FIG_SHP
	  AND CASE_NO = X.CASE_NO
	  AND DIV_COD = X.UPP_DIV) UPP_DIV_DES
	  , FC_GET_WRKTYP_DESC(X.WRK_TYP) AS WRK_TYP_DES
	  , (SELECT WRK_TYP2_DES
	  FROM TSFN004
	  WHERE WRK_STG_TYP = X.WRK_STG || X.WRK_TYP
	  AND WRK_TYP2 = X.WRK_TYP2) AS WRK_TYP2_DES
	  FROM (SELECT '000000000000' CASE_NO
	  , A.FIG_SHP
	  , C.SHP_KND
	  , A.ACT_COD ACT_COD
	  , A.ACT_COD ORG_ACT_COD
	  , A.SHP_COD
	  , A.NWK_ID
	  , A.ACT_ID
	  , CASE SUBSTR(A.ACT_COD, 5, 1) WHEN 'P'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(P)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'C'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(C)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'S'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(S)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'A'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(A)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'M'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(M)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'F'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(F)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  ELSE A.ACT_DES END ACT_DES
	  , A.ACT_TYP
	  , A.PLN_ST
	  , A.PLN_FI
	  , A.PLN_ST PLN_ST_ORG
	  , A.PLN_FI PLN_FI_ORG
	  , A.PLN_ST_INI
	  , A.PLN_FI_INI
	  , A.EST_ST
	  , A.EST_FI
	  , A.NET_ST
	  , A.NET_FI
	  , A.STD_TRM
	  , A.PLN_TRM
	  , 0 AS PLN_TRM_INI --,A.PLN_TRM_INI
	  , A.NET_TRM
	  , A.DPT_COD
	  , A.DPT_COD DPT_COD_ORG
	  , A.MHR_TOT
	  , A.MHR_STU
	  , A.MHR_SGI
	  , A.MHR_REL
	  , A.MHR_LOD
	  , A.SCV_TYP
	  , A.ITM_COD ITM_COD
	  , A.MIS_COD
	  , B.DIV_COD
	  , (SELECT UPP_DIV
	  FROM TSFN001
	  WHERE SHP_KND = C.SHP_KND
	  AND DIV_COD = B.DIV_COD) AS UPP_DIV
	  , A.DCK_COD
	  , A.WRK_STG
	  , A.WRK_TYP
	  , A.WRK_TYP2
	  , '' AS PNT_SCH
	  , 0 AS ST_OPT_PNT
	  , '' AS ST_JOE_PNT
	  , '' AS FI_JOE_PNT
	  , 0 AS FI_OPT_PNT
	  , A.CPY_SHP
	  , 'N' AS QUAY_YN
	  , A.JOO_YN
	  , A.MHR_GBN
	  , A.HO_GUBUN
	  , A.POS_ID
	  , A.DPT_COD_OR
	  , A.UNI_STG
	  , A.STD_DPT_YN
	  , A.FIXED_YN
	  , 'Y' AS DPT_FIXED_YN
	  , (SELECT NVL(MIN(VIEW_SEQ), 0)
	  FROM OPT.TSFN002
	  WHERE MODEL_NO = C.SHP_TYP || ' #' || C.DCK_COD
	  AND DIV_COD = B.DIV_COD
	  AND WRK_TYP2 = A.WRK_TYP2
	  AND WRK_STG_TYP = (A.WRK_STG || A.WRK_TYP)) AS VIEW_SEQ
	  , '' AS SEALED_YN
	  , A.IP
	  , A.PID
	  , A.IN_DAT
	  , A.UP_DAT
	  , A.IN_USR
	  , A.UP_USR
	  , A.FIG_NO
	  FROM OPT.TSEG005 A
	  , OPT.TSMG_TSFN021 B
	  , OPT.TSAA002      C
	  WHERE A.FIG_NO = :FIG_NO
	  AND A.FIG_SHP = :FIG_SHP
	  AND A.WRK_STG = 'N'
	  AND A.ACT_TYP = 'A01'
	  AND A.FIG_NO = B.FIG_NO
	  AND A.FIG_SHP = B.FIG_SHP
	  AND  B.CASE_NO = '000000000000'
	  AND A.ITM_COD = B.ITM_COD
	  AND A.FIG_SHP = C.FIG_SHP
	  AND (A.ACT_TYP LIKE 'A%' OR A.ACT_TYP LIKE 'Z%')
	  UNION
	  SELECT '000000000000' CASE_NO
	  , A.FIG_SHP
	  , C.SHP_KND
	  , A.ACT_COD ACT_COD
	  , A.ACT_COD ORG_ACT_COD
	  , A.SHP_COD
	  , A.NWK_ID
	  , A.ACT_ID
	  , CASE SUBSTR(A.ACT_COD, 5, 1) WHEN 'P'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(P)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'C'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(C)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'S'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(S)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'A'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(A)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'M'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(M)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'F'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(F)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  ELSE A.ACT_DES END ACT_DES
	  , A.ACT_TYP
	  , A.PLN_ST
	  , A.PLN_FI
	  , A.PLN_ST PLN_ST_ORG
	  , A.PLN_FI PLN_FI_ORG
	  , A.PLN_ST_INI
	  , A.PLN_FI_INI
	  , A.EST_ST
	  , A.EST_FI
	  , A.NET_ST
	  , A.NET_FI
	  , A.STD_TRM
	  , A.PLN_TRM
	  , 0 AS PLN_TRM_INI --,A.PLN_TRM_INI
	  , A.NET_TRM
	  , A.DPT_COD
	  , A.DPT_COD DPT_COD_ORG
	  , A.MHR_TOT
	  , A.MHR_STU
	  , A.MHR_SGI
	  , A.MHR_REL
	  , A.MHR_LOD
	  , A.SCV_TYP
	  , A.ITM_COD ITM_COD
	  , A.MIS_COD
	  , B.DIV_COD
	  , (SELECT UPP_DIV
	  FROM TSFN001
	  WHERE SHP_KND = C.SHP_KND
	  AND DIV_COD = B.DIV_COD) AS UPP_DIV
	  , A.DCK_COD
	  , A.WRK_STG
	  , A.WRK_TYP
	  , A.WRK_TYP2
	  , '' AS PNT_SCH
	  , 0 AS ST_OPT_PNT
	  , '' AS ST_JOE_PNT
	  , '' AS FI_JOE_PNT
	  , 0 AS FI_OPT_PNT
	  , A.CPY_SHP
	  , 'N' AS QUAY_YN
	  , A.JOO_YN
	  , A.MHR_GBN
	  , A.HO_GUBUN
	  , A.POS_ID
	  , A.DPT_COD_OR
	  , A.UNI_STG
	  , A.STD_DPT_YN
	  , A.FIXED_YN
	  , 'Y' AS DPT_FIXED_YN
	  , (SELECT NVL(MIN(VIEW_SEQ), 0)
	  FROM OPT.TSFN002
	  WHERE MODEL_NO = C.SHP_TYP || ' #' || C.DCK_COD
	  AND DIV_COD = B.DIV_COD
	  AND WRK_TYP2 = A.WRK_TYP2
	  AND WRK_STG_TYP = (A.WRK_STG || A.WRK_TYP)) AS VIEW_SEQ
	  , '' AS SEALED_YN
	  , A.IP
	  , A.PID
	  , A.IN_DAT
	  , A.UP_DAT
	  , A.IN_USR
	  , A.UP_USR
	  , A.FIG_NO
	  FROM TSMG_TSFA001 A
	  , TSMG_TSFN021 B
	  , TSAD001      C   --, TSAA002      C
	  WHERE A.FIG_NO = :FIG_NO
	  AND A.FIG_SHP = :FIG_SHP
	  AND A.WRK_STG = 'N'
	  AND A.WRK_TYP = '91'
	  AND A.ACT_TYP = 'A01'
	  AND A.FIG_NO = B.FIG_NO
	  AND A.FIG_SHP = B.FIG_SHP
	  AND B.CASE_NO ='000000000000'
	  AND A.ITM_COD = B.ITM_COD
	  AND A.FIG_NO = C.FIG_NO  -- TSAD001 로 변경되면서 추가
	  AND A.FIG_SHP = C.FIG_SHP
	  AND (A.ACT_TYP LIKE 'A%' OR A.ACT_TYP LIKE 'Z%')
	  UNION
	  SELECT A.CASE_NO
	  , A.FIG_SHP
	  , C.SHP_KND
	  , A.ACT_COD ACT_COD
	  , A.ACT_COD ORG_ACT_COD
	  , A.SHP_COD
	  , A.NWK_ID
	  , A.ACT_ID
	  , CASE SUBSTR(A.ACT_COD, 5, 1) WHEN 'P'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(P)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'C'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(C)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'S'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(S)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'A'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(A)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'M'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(M)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  WHEN 'F'
	  THEN CASE WHEN SUBSTR(A.ACT_DES, -3, 3) != '(F)'
	  THEN A.ACT_DES || ' (' || SUBSTR(A.ACT_COD, 5, 1) || ')'
	  ELSE A.ACT_DES END
	  ELSE A.ACT_DES END ACT_DES
	  , A.ACT_TYP
	  , A.PLN_ST
	  , A.PLN_FI
	  , A.PLN_ST PLN_ST_ORG
	  , A.PLN_FI PLN_FI_ORG
	  , A.PLN_ST_INI
	  , A.PLN_FI_INI
	  , A.EST_ST
	  , A.EST_FI
	  , A.NET_ST
	  , A.NET_FI
	  , A.STD_TRM
	  , A.PLN_TRM
	  , A.PLN_TRM_INI
	  , A.NET_TRM
	  , A.DPT_COD
	  , A.DPT_COD DPT_COD_ORG
	  , A.MHR_TOT
	  , A.MHR_STU
	  , A.MHR_SGI
	  , A.MHR_REL
	  , A.MHR_LOD
	  , A.SCV_TYP
	  , A.ITM_COD ITM_COD
	  , A.MIS_COD
	  , A.DIV_COD
	  , (SELECT UPP_DIV
	  FROM TSFN001
	  WHERE SHP_KND = C.SHP_KND
	  AND DIV_COD = A.DIV_COD) AS UPP_DIV
	  , A.DCK_COD
	  , A.WRK_STG
	  , A.WRK_TYP
	  , A.WRK_TYP2
	  , A.PNT_SCH
	  , A.ST_OPT_PNT
	  , A.ST_JOE_PNT
	  , A.FI_JOE_PNT
	  , A.FI_OPT_PNT
	  , A.CPY_SHP
	  , A.QUAY_YN
	  , A.JOO_YN
	  , A.MHR_GBN
	  , A.HO_GUBUN
	  , A.POS_ID
	  , A.DPT_COD_OR
	  , A.UNI_STG
	  , A.STD_DPT_YN
	  , A.FIXED_YN
	  , A.DPT_FIXED_YN
	  , A.VIEW_SEQ
	  , A.SEALED_YN
	  , A.IP
	  , A.PID
	  , A.IN_DAT
	  , A.UP_DAT
	  , A.IN_USR
	  , A.UP_USR
	  , A.FIG_NO
	  FROM TSMG_TSFN101 A, TSAD001 C -- TSAA002 C
	  WHERE A.FIG_NO = :FIG_NO
	  AND A.FIG_SHP = :FIG_SHP -- '2912'
	  AND A.FIG_NO = C.FIG_NO
	  AND A.CASE_NO = '000000000000' -- '000000000001'
	  AND A.ACT_TYP = 'A01'
	  AND A.FIG_SHP = C.FIG_SHP
	  AND (A.ACT_TYP LIKE 'A%' OR A.ACT_TYP LIKE 'Z%')
	  AND A.HO_GUBUN IS NOT NULL
	  ) X) Y
	  WHERE 1 = 1
	  ORDER BY Y.DIV_COD, Y.VIEW_SEQ, Y.ITM_COD, Y.WRK_STG, Y.WRK_TYP
  </TSFN101_CASE_NO_FIG_SHP_MS_SELECT2_MODEL>

    <TSFN101_COMMON_WRK_DES_SELECT>
    SELECT FC_GET_WRKTYP_DESC(:WRK_TYP) WRK_DES FROM DUAL
  </TSFN101_COMMON_WRK_DES_SELECT>

  <TSFN102_CASE_NO_FIG_SHP_MS_SELECT>
    -- TSFN102_CASE_NO_FIG_SHP_MS_SELECT
    -- 후행 MASTER SCHEDULE 관계 조회
    WITH DIV_ITM AS (
    SELECT FIG_SHP, CASE_NO, DIV_COD, ITM_COD
    FROM (SELECT FIG_SHP, CASE_NO, DIV_COD, ITM_COD, ROW_NUMBER () OVER (PARTITION BY DIV_COD ORDER BY MIS_ST DESC) RN
    FROM TSFN021
    WHERE FIG_SHP = :FIG_SHP AND CASE_NO = :CASE_NO)
    WHERE RN = 1
    )
    SELECT
    A.CASE_NO
    ,A.FIG_SHP
    ,CASE WHEN A.HO_GUBUN1 = '1' THEN SUBSTR(E.ITM_COD, 1, 5)||SUBSTR(A.PRE_ACT, 6) ELSE A.PRE_ACT END PRE_ACT
    ,CASE WHEN A.HO_GUBUN2 = '1' THEN SUBSTR(F.ITM_COD, 1, 5)||SUBSTR(A.AFT_ACT, 6) ELSE A.AFT_ACT END AFT_ACT
    ,A.PRE_ACT ORG_PRE_ACT
    ,A.AFT_ACT ORG_AFT_ACT
    ,E.DIV_COD PRE_DIV
    ,F.DIV_COD AFT_DIV
    ,A.SHP_COD
    ,A.PRE_NWK
    ,A.AFT_NWK
    ,A.HO_GUBUN1
    ,A.HO_GUBUN2
    ,A.REL_TYP
    ,A.STD_OST
    ,A.OFF_SET
    ,A.PRE_ACT_ID
    ,A.AFT_ACT_ID
    ,A.IP
    ,A.PID
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.IN_USR
    ,A.UP_USR
    FROM TSFN102 A, DIV_ITM E, DIV_ITM F
    WHERE A.FIG_SHP = :FIG_SHP
    AND A.CASE_NO = :CASE_NO
    AND A.FIG_SHP = E.FIG_SHP
    AND A.CASE_NO = E.CASE_NO
    AND SUBSTR(A.PRE_ACT, 2, 3) = E.DIV_COD
    AND A.FIG_SHP = F.FIG_SHP
    AND A.CASE_NO = F.CASE_NO
    AND SUBSTR(A.AFT_ACT, 2, 3) = F.DIV_COD
  </TSFN102_CASE_NO_FIG_SHP_MS_SELECT>

  <TSFN102_CASE_NO_FIG_SHP_MS_SELECT2>
    -- TSFN102_CASE_NO_FIG_SHP_MS_SELECT2
    -- 후행 MASTER SCHEDULE 관계 조회
    SELECT
    A.CASE_NO
    ,A.FIG_SHP
    ,A.PRE_ACT
    ,A.AFT_ACT
    ,A.PRE_ACT ORG_PRE_ACT
    ,A.AFT_ACT ORG_AFT_ACT
    ,A.PRE_DIV
    ,A.AFT_DIV
    ,A.SHP_COD
    ,A.PRE_NWK
    ,A.AFT_NWK
    ,A.HO_GUBUN1
    ,A.HO_GUBUN2
    ,A.REL_TYP
    ,A.STD_OST
    ,A.OFF_SET
    ,A.PRE_ACT_ID
    ,A.AFT_ACT_ID
    ,A.LINE_COLOR
    ,A.LINE_THICKNESS
    ,A.LINE_STYLE
    ,A.LINE_SNAP_LOC
    ,A.IP
    ,A.PID
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.IN_USR
    ,A.UP_USR
    FROM TSFN102 A
    WHERE A.FIG_SHP = :FIG_SHP
    AND A.CASE_NO = :CASE_NO
  </TSFN102_CASE_NO_FIG_SHP_MS_SELECT2>

  <TSFN102_CASE_NO_FIG_SHP_MS_SELECT2_MODEL>
    SELECT A.CASE_NO,
           A.FIG_SHP,
           A.PRE_ACT,
           A.AFT_ACT,
           A.PRE_ACT        ORG_PRE_ACT,
           A.AFT_ACT        ORG_AFT_ACT,
           A.PRE_DIV,
           A.AFT_DIV,
           A.SHP_COD,
           A.PRE_NWK,
           A.AFT_NWK,
           A.HO_GUBUN1,
           A.HO_GUBUN2,
           A.REL_TYP,
           A.STD_OST,
           A.OFF_SET,
           A.PRE_ACT_ID,
           A.AFT_ACT_ID,
           A.LINE_COLOR,
           A.LINE_THICKNESS,
           A.LINE_STYLE,
           A.LINE_SNAP_LOC,
           A.IP,
           A.PID,
           A.IN_DAT,
           A.UP_DAT,
           A.IN_USR,
           A.UP_USR,
           A.FIG_NO
     FROM TSMG_TSFN102 A
    WHERE A.FIG_NO = :FIG_NO
      AND A.FIG_SHP = :FIG_SHP
      AND A.CASE_NO = :CASE_NO
  </TSFN102_CASE_NO_FIG_SHP_MS_SELECT2_MODEL>

  <!-- MASTER SCHEDULE TSFN101 TSFN102 END  -->

  <!-- PRONET TSFN101 BEGIN -->
  <TSFN401_FIG_SHP_MANAGE_SELECT>
    -- TSFN401_FIG_SHP_MANAGE_SELECT
    -- ProNet 호선 케이스 목록
    SELECT A.*
    --, (SELECT CASE WHEN SHP_TYP IS NOT NULL THEN 'Y' ELSE 'N' END FROM TSFN002 WHERE SHP_KND = A.SHP_KND AND DCK_COD = A.DCK_COD AND ROWNUM = 1) HAS_STD  -- 표준 유무
    --, (SELECT CASE WHEN FIG_SHP IS NOT NULL THEN 'Y' ELSE 'N' END FROM TSFN021 WHERE FIG_SHP = A.FIG_SHP AND CASE_NO = A.CASE_NO AND ROWNUM = 1) HAS_DIV_ITM_MAP -- 구획 품목 매핑
    --, (SELECT CASE WHEN FIG_SHP IS NOT NULL THEN 'Y' ELSE 'N' END FROM TSFN022 WHERE FIG_SHP = A.FIG_SHP AND CASE_NO = A.CASE_NO AND ROWNUM = 1) HAS_EREC_DT -- 구획 대표블록 탑재일
    --, (SELECT CASE WHEN FIG_SHP IS NOT NULL THEN 'Y' ELSE 'N' END FROM TSFN101 WHERE FIG_SHP = A.FIG_SHP AND CASE_NO = A.CASE_NO AND ROWNUM = 1) HAS_ACT -- ACT
    --, (SELECT CASE WHEN FIG_SHP IS NOT NULL THEN 'Y' ELSE 'N' END FROM TSFN102 WHERE FIG_SHP = A.FIG_SHP AND CASE_NO = A.CASE_NO AND ROWNUM = 1) HAS_REL -- 관계
    --, (SELECT CASE WHEN FIG_SHP IS NOT NULL THEN 'Y' ELSE 'N' END FROM TSFN103 WHERE FIG_SHP = A.FIG_SHP AND CASE_NO = A.CASE_NO AND ROWNUM = 1) HAS_WRK_PNT -- 절점
    FROM CJ01.TSFN401 A
    WHERE FIG_SHP = :FIG_SHP
    ORDER BY CASE_NO
  </TSFN401_FIG_SHP_MANAGE_SELECT>
  <TSFN402_CASE_NO_FIG_SHP_PRONET_MA_SELECT>
    -- CJ01.TSFN402_CASE_NO_FIG_SHP_PRONET_MA_SELECT
    -- New HProNet MAIN ACT 조회
    -- 건조 ACT는 TSEA002에서, 족장(N91)은 TSFA001 에서
    SELECT Y.*
    ,Y.WRK_TYP_DES || ' ' || Y.WRK_TYP2_DES WRK_DES
    FROM (
    SELECT X.*
    ,(SELECT MAX(DIV_DES) FROM CJ01.TSFN021 WHERE FIG_SHP = X.FIG_SHP AND CASE_NO = X.CASE_NO AND DIV_COD = X.DIV_COD) DIV_DES
    ,(SELECT MAX(DIV_DES) FROM CJ01.TSFN021 WHERE FIG_SHP = X.FIG_SHP AND CASE_NO = X.CASE_NO AND DIV_COD = X.UPP_DIV) UPP_DIV_DES
    ,FC_GET_WRKTYP_DESC(X.WRK_TYP) WRK_TYP_DES
    ,(SELECT WRK_TYP2_DES FROM CJ01.TSFN004 WHERE WRK_STG_TYP = X.WRK_STG||X.WRK_TYP AND WRK_TYP2 = X.WRK_TYP2) WRK_TYP2_DES
    FROM (
    SELECT :CASE_NO CASE_NO
    ,A.FIG_SHP
    ,C.SHP_KND
    ,A.ACT_COD ACT_COD
    ,A.ACT_COD ORG_ACT_COD
    ,A.SHP_COD
    ,A.NWK_ID
    ,A.ACT_ID
    ,A.ACT_DES
    ,A.ACT_TYP
    ,A.PLN_ST
    ,A.PLN_FI
    ,A.PLN_ST PLN_ST_ORG
    ,A.PLN_FI PLN_FI_ORG
    ,A.PLN_ST_INI
    ,A.PLN_FI_INI
    ,A.EST_ST
    ,A.EST_FI
    ,A.NET_ST
    ,A.NET_FI
    ,A.STD_TRM
    ,A.PLN_TRM
    ,0 PLN_TRM_INI --,A.PLN_TRM_INI
    ,A.NET_TRM
    ,A.DPT_COD
    ,a.DPT_COD DPT_COD_ORG
    ,A.MHR_TOT
    ,A.MHR_STU
    ,A.MHR_SGI
    ,A.MHR_REL
    ,A.MHR_LOD
    ,A.SCV_TYP
    ,A.ITM_COD ITM_COD
    ,A.MIS_COD
    ,B.DIV_COD
    ,(SELECT UPP_DIV FROM TSFN001 WHERE SHP_KND = C.SHP_KND AND DIV_COD = B.DIV_COD) UPP_DIV
    ,A.DCK_COD
    ,A.WRK_STG
    ,A.WRK_TYP
    ,A.WRK_TYP2
    ,'' PNT_SCH
    ,0 ST_OPT_PNT
    ,'' ST_JOE_PNT
    ,'' FI_JOE_PNT
    ,0 FI_OPT_PNT
    ,A.CPY_SHP
    ,'N' QUAY_YN
    ,A.JOO_YN
    ,A.MHR_GBN
    ,A.HO_GUBUN
    ,A.POS_ID
    ,A.DPT_COD_OR
    ,A.UNI_STG
    ,A.STD_DPT_YN
    ,A.FIXED_YN
    ,'Y' DPT_FIXED_YN
    ,(SELECT NVL(MIN(VIEW_SEQ), 0) FROM OPT.TSFN002 WHERE MODEL_NO = (C.SHP_TYP||' #'||C.DCK_COD) AND DIV_COD = B.DIV_COD AND WRK_TYP2 = A.WRK_TYP2 AND WRK_STG_TYP = (A.WRK_STG||A.WRK_TYP)) VIEW_SEQ
    ,'' SEALED_YN
    ,A.IP
    ,A.PID
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.IN_USR
    ,A.UP_USR
    FROM (
    SELECT B.*, CJ01.FC_GET_PE_BLK(B.FIG_SHP, B.ACT_COD, 'P3') P3_BLK
    FROM (
    SELECT FIG_SHP, ITM_COD, BLK_TYP
    FROM TSED002
    WHERE FIG_SHP = :FIG_SHP
    AND BLK_TYP IN ('P1', 'P2', 'P3')) A, TSEA002 B
    WHERE A.FIG_SHP = B.FIG_SHP
    AND A.ITM_COD = B.ITM_COD
    AND B.WRK_STG||B.WRK_TYP IN ('K41', 'L41', 'N41', 'N4A', 'N4B')
    --AND B.WRK_STG IN ('K', 'L', 'N')
    --AND B.WRK_TYP = '41'
    ) A,
    CJ01.TSFN021 B, OPT.TSAA002 C
    WHERE A.FIG_SHP = B.FIG_SHP
    AND A.P3_BLK = B.ITM_COD
    AND B.CASE_NO = :CASE_NO
    AND A.FIG_SHP = C.FIG_SHP
    UNION
    SELECT :CASE_NO CASE_NO
    ,A.FIG_SHP
    ,C.SHP_KND
    ,A.ACT_COD ACT_COD
    ,A.ACT_COD ORG_ACT_COD
    ,A.SHP_COD
    ,A.NWK_ID
    ,A.ACT_ID
    ,A.ACT_DES
    ,A.ACT_TYP
    ,A.PLN_ST
    ,A.PLN_FI
    ,A.PLN_ST PLN_ST_ORG
    ,A.PLN_FI PLN_FI_ORG
    ,A.PLN_ST_INI
    ,A.PLN_FI_INI
    ,A.EST_ST
    ,A.EST_FI
    ,A.NET_ST
    ,A.NET_FI
    ,A.STD_TRM
    ,A.PLN_TRM
    ,0 PLN_TRM_INI --,A.PLN_TRM_INI
    ,A.NET_TRM
    ,A.DPT_COD
    ,a.DPT_COD DPT_COD_ORG
    ,A.MHR_TOT
    ,A.MHR_STU
    ,A.MHR_SGI
    ,A.MHR_REL
    ,A.MHR_LOD
    ,A.SCV_TYP
    ,A.ITM_COD ITM_COD
    ,A.MIS_COD
    ,B.DIV_COD
    ,(SELECT UPP_DIV FROM OPT.TSFN001 WHERE SHP_KND = C.SHP_KND AND DIV_COD = B.DIV_COD) UPP_DIV
    ,A.DCK_COD
    ,A.WRK_STG
    ,A.WRK_TYP
    ,A.WRK_TYP2
    ,'' PNT_SCH
    ,0 ST_OPT_PNT
    ,'' ST_JOE_PNT
    ,'' FI_JOE_PNT
    ,0 FI_OPT_PNT
    ,A.CPY_SHP
    ,'N' QUAY_YN
    ,A.JOO_YN
    ,A.MHR_GBN
    ,A.HO_GUBUN
    ,A.POS_ID
    ,A.DPT_COD_OR
    ,A.UNI_STG
    ,A.STD_DPT_YN
    ,A.FIXED_YN
    ,'Y' DPT_FIXED_YN
    ,(SELECT NVL(MIN(VIEW_SEQ), 0) FROM OPT.TSFN002 WHERE MODEL_NO = (C.SHP_TYP||' #'||C.DCK_COD) AND DIV_COD = B.DIV_COD AND WRK_TYP2 = A.WRK_TYP2 AND WRK_STG_TYP = (A.WRK_STG||A.WRK_TYP)) VIEW_SEQ
    ,'' SEALED_YN
    ,A.IP
    ,A.PID
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.IN_USR
    ,A.UP_USR
    FROM OPT.TSFA001 A, CJ01.TSFN021 B, OPT.TSAA002 C
    WHERE A.FIG_SHP = :FIG_SHP
    AND A.WRK_STG = 'N'
    AND A.WRK_TYP = '91'
    AND A.FIG_SHP = B.FIG_SHP
    AND :CASE_NO = B.CASE_NO
    AND A.ITM_COD = B.ITM_COD
    AND A.FIG_SHP = C.FIG_SHP
    UNION
    SELECT A.CASE_NO
    ,A.FIG_SHP
    ,C.SHP_KND
    ,A.ACT_COD ACT_COD
    ,A.ACT_COD ORG_ACT_COD
    ,A.SHP_COD
    ,A.NWK_ID
    ,A.ACT_ID
    ,A.ACT_DES
    ,A.ACT_TYP
    ,A.PLN_ST
    ,A.PLN_FI
    ,A.PLN_ST PLN_ST_ORG
    ,A.PLN_FI PLN_FI_ORG
    ,A.PLN_ST_INI
    ,A.PLN_FI_INI
    ,A.EST_ST
    ,A.EST_FI
    ,A.NET_ST
    ,A.NET_FI
    ,A.STD_TRM
    ,A.PLN_TRM
    ,A.PLN_TRM_INI
    ,A.NET_TRM
    ,A.DPT_COD
    ,a.DPT_COD DPT_COD_ORG
    ,A.MHR_TOT
    ,A.MHR_STU
    ,A.MHR_SGI
    ,A.MHR_REL
    ,A.MHR_LOD
    ,A.SCV_TYP
    ,A.ITM_COD ITM_COD
    ,A.MIS_COD
    ,A.DIV_COD
    ,(SELECT UPP_DIV FROM OPT.TSFN001 WHERE SHP_KND = C.SHP_KND AND DIV_COD = A.DIV_COD) UPP_DIV
    ,A.DCK_COD
    ,A.WRK_STG
    ,A.WRK_TYP
    ,A.WRK_TYP2
    ,A.PNT_SCH
    ,A.ST_OPT_PNT
    ,A.ST_JOE_PNT
    ,A.FI_JOE_PNT
    ,A.FI_OPT_PNT
    ,A.CPY_SHP
    ,A.QUAY_YN
    ,A.JOO_YN
    ,A.MHR_GBN
    ,A.HO_GUBUN
    ,A.POS_ID
    ,A.DPT_COD_OR
    ,A.UNI_STG
    ,A.STD_DPT_YN
    ,A.FIXED_YN
    ,A.DPT_FIXED_YN
    ,A.VIEW_SEQ
    ,A.SEALED_YN
    ,A.IP
    ,A.PID
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.IN_USR
    ,A.UP_USR
    FROM CJ01.TSFN101 A, OPT.TSAA002 C
    WHERE A.FIG_SHP = :FIG_SHP  -- '2912'
    AND A.CASE_NO = :CASE_NO    -- '000000000001'
    AND A.FIG_SHP = C.FIG_SHP) X ) Y
    ORDER BY Y.DIV_COD, Y.VIEW_SEQ, Y.ITM_COD, Y.WRK_STG, Y.WRK_TYP
  </TSFN402_CASE_NO_FIG_SHP_PRONET_MA_SELECT>
  <INSERT_TSFN402>
    -- INSERT_TSFN402
    INSERT INTO CJ01.TSFN402 (
    CASE_NO
    ,FIG_SHP
    ,ACT_COD
    ,SHP_COD
    ,NWK_ID
    ,ACT_ID
    ,ACT_DES
    ,ACT_TYP
    ,PLN_ST
    ,PLN_FI
    ,PLN_ST_INI
    ,PLN_FI_INI
    ,EST_ST
    ,EST_FI
    ,NET_ST
    ,NET_FI
    ,STD_TRM
    ,PLN_TRM
    ,PLN_TRM_INI
    ,NET_TRM
    ,DPT_COD
    ,MHR_TOT
    ,MHR_STU
    ,MHR_SGI
    ,MHR_REL
    ,MHR_LOD
    ,SCV_TYP
    ,ITM_COD
    ,MIS_COD
    ,DIV_COD
    ,DCK_COD
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,PNT_SCH
    ,ST_OPT_PNT
    ,ST_JOE_PNT
    ,FI_JOE_PNT
    ,FI_OPT_PNT
    ,CPY_SHP
    ,QUAY_YN
    ,JOO_YN
    ,MHR_GBN
    ,HO_GUBUN
    ,POS_ID
    ,DPT_COD_OR
    ,UNI_STG
    ,STD_DPT_YN
    ,FIXED_YN
    ,DPT_FIXED_YN
    ,VIEW_SEQ
    ,SEALED_YN
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:ACT_COD
    ,:SHP_COD
    ,:NWK_ID
    ,:ACT_ID
    ,:ACT_DES
    ,:ACT_TYP
    ,:PLN_ST
    ,:PLN_FI
    ,:PLN_ST_INI
    ,:PLN_FI_INI
    ,:EST_ST
    ,:EST_FI
    ,:NET_ST
    ,:NET_FI
    ,:STD_TRM
    ,:PLN_TRM
    ,:PLN_TRM_INI
    ,:NET_TRM
    ,:DPT_COD
    ,:MHR_TOT
    ,:MHR_STU
    ,:MHR_SGI
    ,:MHR_REL
    ,:MHR_LOD
    ,:SCV_TYP
    ,:ITM_COD
    ,:MIS_COD
    ,:DIV_COD
    ,:DCK_COD
    ,:WRK_STG
    ,:WRK_TYP
    ,:WRK_TYP2
    ,:PNT_SCH
    ,:ST_OPT_PNT
    ,:ST_JOE_PNT
    ,:FI_JOE_PNT
    ,:FI_OPT_PNT
    ,:CPY_SHP
    ,:QUAY_YN
    ,:JOO_YN
    ,:MHR_GBN
    ,:HO_GUBUN
    ,:POS_ID
    ,:DPT_COD_OR
    ,:UNI_STG
    ,:STD_DPT_YN
    ,:FIXED_YN
    ,:DPT_FIXED_YN
    ,:VIEW_SEQ
    ,:SEALED_YN
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN402>
  <UPDATE_TSFN402>
    -- UPDATE_TSFN402
    UPDATE CJ01.TSFN402 SET
    SHP_COD = :SHP_COD
    ,NWK_ID = :NWK_ID
    ,ACT_ID = :ACT_ID
    ,ACT_DES = :ACT_DES
    ,ACT_TYP = :ACT_TYP
    ,PLN_ST = :PLN_ST
    ,PLN_FI = :PLN_FI
    ,PLN_ST_INI = :PLN_ST_INI
    ,PLN_FI_INI = :PLN_FI_INI
    ,EST_ST = :EST_ST
    ,EST_FI = :EST_FI
    ,NET_ST = :NET_ST
    ,NET_FI = :NET_FI
    ,STD_TRM = :STD_TRM
    ,PLN_TRM = :PLN_TRM
    ,PLN_TRM_INI = :PLN_TRM_INI
    ,NET_TRM = :NET_TRM
    ,DPT_COD = :DPT_COD
    ,MHR_TOT = :MHR_TOT
    ,MHR_STU = :MHR_STU
    ,MHR_SGI = :MHR_SGI
    ,MHR_REL = :MHR_REL
    ,MHR_LOD = :MHR_LOD
    ,SCV_TYP = :SCV_TYP
    ,ITM_COD = :ITM_COD
    ,MIS_COD = :MIS_COD
    ,DIV_COD = :DIV_COD
    ,DCK_COD = :DCK_COD
    ,WRK_STG = :WRK_STG
    ,WRK_TYP = :WRK_TYP
    ,WRK_TYP2 = :WRK_TYP2
    ,PNT_SCH = :PNT_SCH
    ,ST_OPT_PNT = :ST_OPT_PNT
    ,ST_JOE_PNT = :ST_JOE_PNT
    ,FI_JOE_PNT = :FI_JOE_PNT
    ,FI_OPT_PNT = :FI_OPT_PNT
    ,CPY_SHP = :CPY_SHP
    ,QUAY_YN = :QUAY_YN
    ,JOO_YN = :JOO_YN
    ,MHR_GBN = :MHR_GBN
    ,HO_GUBUN = :HO_GUBUN
    ,POS_ID = :POS_ID
    ,DPT_COD_OR = :DPT_COD_OR
    ,UNI_STG = :UNI_STG
    ,STD_DPT_YN = :STD_DPT_YN
    ,FIXED_YN = :FIXED_YN
    ,DPT_FIXED_YN = :DPT_FIXED_YN
    ,VIEW_SEQ = :VIEW_SEQ
    ,SEALED_YN = :SEALED_YN
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND ACT_COD = :ACT_COD
  </UPDATE_TSFN402>
  <DELETE_TSFN402>
    -- DELETE_TSFN402
    DELETE CJ01.TSFN402
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND ACT_COD = :ACT_COD
  </DELETE_TSFN402>


  <TSFN403_CASE_NO_FIG_SHP_PRONET_LINK_SELECT>
    -- TSFN403_CASE_NO_FIG_SHP_PRONET_LINK_SELECT
    -- PRONET 관계 조회
    SELECT
    A.CASE_NO
    ,A.FIG_SHP
    ,A.PRE_ACT
    ,A.AFT_ACT
    ,A.PRE_ACT ORG_PRE_ACT
    ,A.AFT_ACT ORG_AFT_ACT
    ,A.PRE_DIV
    ,A.AFT_DIV
    ,A.SHP_COD
    ,A.PRE_NWK
    ,A.AFT_NWK
    ,A.HO_GUBUN1
    ,A.HO_GUBUN2
    ,A.REL_TYP
    ,A.STD_OST
    ,A.OFF_SET
    ,A.PRE_ACT_ID
    ,A.AFT_ACT_ID
    ,A.LINE_COLOR
    ,A.LINE_THICKNESS
    ,A.LINE_STYLE
    ,A.LINE_SNAP_LOC
    ,A.IP
    ,A.PID
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.IN_USR
    ,A.UP_USR
    FROM CJ01.TSFN403 A
    WHERE A.FIG_SHP = :FIG_SHP
    AND A.CASE_NO = :CASE_NO
  </TSFN403_CASE_NO_FIG_SHP_PRONET_LINK_SELECT>
  <INSERT_TSFN403>
    -- INSERT_TSFN403
    INSERT INTO CJ01.TSFN403 (
    CASE_NO
    ,FIG_SHP
    ,PRE_ACT
    ,AFT_ACT
    ,SHP_COD
    ,PRE_NWK
    ,AFT_NWK
    ,HO_GUBUN1
    ,HO_GUBUN2
    ,REL_TYP
    ,STD_OST
    ,OFF_SET
    ,PRE_ACT_ID
    ,AFT_ACT_ID
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    ,PRE_DIV
    ,AFT_DIV
    ,LINE_COLOR
    ,LINE_THICKNESS
    ,LINE_STYLE
    ,LINE_SNAP_LOC
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:PRE_ACT
    ,:AFT_ACT
    ,:SHP_COD
    ,:PRE_NWK
    ,:AFT_NWK
    ,:HO_GUBUN1
    ,:HO_GUBUN2
    ,:REL_TYP
    ,:STD_OST
    ,:OFF_SET
    ,:PRE_ACT_ID
    ,:AFT_ACT_ID
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:PRE_DIV
    ,:AFT_DIV
    ,:LINE_COLOR
    ,:LINE_THICKNESS
    ,:LINE_STYLE
    ,:LINE_SNAP_LOC
    )
  </INSERT_TSFN403>
  <UPDATE_TSFN403>
    -- UPDATE_TSFN403
    UPDATE CJ01.TSFN403 SET
    SHP_COD = :SHP_COD
    ,PRE_NWK = :PRE_NWK
    ,AFT_NWK = :AFT_NWK
    ,HO_GUBUN1 = :HO_GUBUN1
    ,HO_GUBUN2 = :HO_GUBUN2
    ,REL_TYP = :REL_TYP
    ,STD_OST = :STD_OST
    ,OFF_SET = :OFF_SET
    ,PRE_ACT_ID = :PRE_ACT_ID
    ,AFT_ACT_ID = :AFT_ACT_ID
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    ,PRE_DIV = :PRE_DIV
    ,AFT_DIV = :AFT_DIV
    ,LINE_COLOR = :LINE_COLOR
    ,LINE_THICKNESS = :LINE_THICKNESS
    ,LINE_STYLE = :LINE_STYLE
    ,LINE_SNAP_LOC = :LINE_SNAP_LOC
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND PRE_ACT = :PRE_ACT
    AND AFT_ACT = :AFT_ACT
  </UPDATE_TSFN403>
  <DELETE_TSFN403>
    -- DELETE_TSFN403
    DELETE CJ01.TSFN403
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND PRE_ACT = :PRE_ACT
    AND AFT_ACT = :AFT_ACT
  </DELETE_TSFN403>
  <!-- PRONET TSFN101 END -->

  <!--TSFN101 BEGIN-->
  <TSFN101_CASE_NO_FIG_SHP_SELECT_ORG>
    -- TSFN101_CASE_NO_FIG_SHP_SELECT
    SELECT
    CASE_NO
    ,FIG_SHP
    ,ACT_COD
    ,SHP_COD
    ,NWK_ID
    ,ACT_ID
    ,ACT_DES
    ,ACT_TYP
    ,PLN_ST
    ,PLN_FI
    ,PLN_ST_INI
    ,PLN_FI_INI
    ,EST_ST
    ,EST_FI
    ,NET_ST
    ,NET_FI
    ,STD_TRM
    ,PLN_TRM
    ,PLN_TRM_INI
    ,NET_TRM
    ,DPT_COD
    ,MHR_TOT
    ,MHR_STU
    ,MHR_SGI
    ,MHR_REL
    ,MHR_LOD
    ,SCV_TYP
    ,ITM_COD
    ,MIS_COD
    ,DIV_COD
    ,DCK_COD
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,PNT_SCH
    ,ST_OPT_PNT
    ,ST_JOE_PNT
    ,FI_JOE_PNT
    ,FI_OPT_PNT
    ,CPY_SHP
    ,QUAY_YN
    ,JOO_YN
    ,MHR_GBN
    ,HO_GUBUN
    ,POS_ID
    ,DPT_COD_OR
    ,UNI_STG
    ,STD_DPT_YN
    ,FIXED_YN
    ,DPT_FIXED_YN
    ,VIEW_SEQ
    ,SEALED_YN
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN101
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </TSFN101_CASE_NO_FIG_SHP_SELECT_ORG>
  <TSFN101_CASE_NO_FIG_SHP_SELECT>
    -- TSFN101_CASE_NO_FIG_SHP_SELECT
    SELECT X.*, Y.DIV_DES, Y.UPP_DIV, Z.DIV_DES UPP_DIV_DES
    FROM (
    SELECT
    A.CASE_NO
    ,A.FIG_SHP
    ,A.ACT_COD
    ,A.SHP_COD
    ,A.NWK_ID
    ,A.ACT_ID
    ,A.ACT_DES
    ,A.ACT_TYP
    ,A.PLN_ST
    ,A.PLN_FI
    ,A.PLN_ST_INI
    ,A.PLN_FI_INI
    ,A.EST_ST
    ,A.EST_FI
    ,A.NET_ST
    ,A.NET_FI
    ,A.STD_TRM
    ,A.PLN_TRM
    ,A.PLN_TRM_INI
    ,A.NET_TRM
    ,A.DPT_COD
    ,A.MHR_TOT
    ,A.MHR_STU
    ,A.MHR_SGI
    ,A.MHR_REL
    ,A.MHR_LOD
    ,A.SCV_TYP
    ,A.ITM_COD
    ,A.MIS_COD
    ,A.DIV_COD
    ,A.DCK_COD
    ,A.WRK_STG
    ,A.WRK_TYP
    ,A.WRK_TYP2
    ,A.PNT_SCH
    ,A.ST_OPT_PNT
    ,A.ST_JOE_PNT
    ,A.FI_JOE_PNT
    ,A.FI_OPT_PNT
    ,A.CPY_SHP
    ,A.QUAY_YN
    ,A.JOO_YN
    ,A.MHR_GBN
    ,A.HO_GUBUN
    ,A.POS_ID
    ,A.DPT_COD_OR
    ,A.UNI_STG
    ,A.STD_DPT_YN
    ,A.FIXED_YN
    ,A.DPT_FIXED_YN
    ,A.VIEW_SEQ
    ,A.SEALED_YN
    ,A.IP
    ,A.PID
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.IN_USR
    ,A.UP_USR
    ,B.SHP_KND
    ,B.SHP_TYP
    FROM
    TSFN101 A, TSFN011 B
    WHERE
    A.CASE_NO = :CASE_NO
    AND A.FIG_SHP = :FIG_SHP
    AND A.CASE_NO = B.CASE_NO
    AND A.FIG_SHP = B.FIG_SHP) X, TSFN001 Y, TSFN001 Z
    WHERE X.SHP_KND = Y.SHP_KND(+)
    AND X.DIV_COD = Y.DIV_COD(+)
    AND Y.SHP_KND = Z.SHP_KND(+)
    AND Y.DIV_COD = Z.DIV_COD(+)
  </TSFN101_CASE_NO_FIG_SHP_SELECT>
  <INSERT_TSFN101>
    --2019.06.28
    -- 외업 의장중일정 관리(2018년 적용~)&gt;외업중일정계획수립&gt;마스터스케줄
    -- PK 충돌나는 문제가 있어 수정
    -- 여러원인 있지만 현상황에서 시스템 안정성 확보를 위해 MERGE INTO 구문 사용
    MERGE INTO TSFN101 A
    USING DUAL
    ON ( A.CASE_NO = :CASE_NO AND A.FIG_SHP = :FIG_SHP AND ACT_COD = :ACT_COD )
    WHEN MATCHED THEN
    UPDATE  SET
    A.UP_DAT      = TO_CHAR(SYSDATE, 'YYYYMMDD'),
    A.UP_USR  = :IN_USR
    WHEN NOT MATCHED THEN
    INSERT  (
    CASE_NO
    ,FIG_SHP
    ,ACT_COD
    ,SHP_COD
    ,NWK_ID
    ,ACT_ID
    ,ACT_DES
    ,ACT_TYP
    ,PLN_ST
    ,PLN_FI
    ,PLN_ST_INI
    ,PLN_FI_INI
    ,EST_ST
    ,EST_FI
    ,NET_ST
    ,NET_FI
    ,STD_TRM
    ,PLN_TRM
    ,PLN_TRM_INI
    ,NET_TRM
    ,DPT_COD
    ,MHR_TOT
    ,MHR_STU
    ,MHR_SGI
    ,MHR_REL
    ,MHR_LOD
    ,SCV_TYP
    ,ITM_COD
    ,MIS_COD
    ,DIV_COD
    ,DCK_COD
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,PNT_SCH
    ,ST_OPT_PNT
    ,ST_JOE_PNT
    ,FI_JOE_PNT
    ,FI_OPT_PNT
    ,CPY_SHP
    ,QUAY_YN
    ,JOO_YN
    ,MHR_GBN
    ,HO_GUBUN
    ,POS_ID
    ,DPT_COD_OR
    ,UNI_STG
    ,STD_DPT_YN
    ,FIXED_YN
    ,DPT_FIXED_YN
    ,VIEW_SEQ
    ,SEALED_YN
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:ACT_COD
    ,:SHP_COD
    ,:NWK_ID
    ,:ACT_ID
    ,:ACT_DES
    ,:ACT_TYP
    ,:PLN_ST
    ,:PLN_FI
    ,:PLN_ST_INI
    ,:PLN_FI_INI
    ,:EST_ST
    ,:EST_FI
    ,:NET_ST
    ,:NET_FI
    ,:STD_TRM
    ,:PLN_TRM
    ,:PLN_TRM_INI
    ,:NET_TRM
    ,:DPT_COD
    ,:MHR_TOT
    ,:MHR_STU
    ,:MHR_SGI
    ,:MHR_REL
    ,:MHR_LOD
    ,:SCV_TYP
    ,:ITM_COD
    ,:MIS_COD
    ,:DIV_COD
    ,:DCK_COD
    ,:WRK_STG
    ,:WRK_TYP
    ,:WRK_TYP2
    ,:PNT_SCH
    ,:ST_OPT_PNT
    ,:ST_JOE_PNT
    ,:FI_JOE_PNT
    ,:FI_OPT_PNT
    ,:CPY_SHP
    ,:QUAY_YN
    ,:JOO_YN
    ,:MHR_GBN
    ,:HO_GUBUN
    ,:POS_ID
    ,:DPT_COD_OR
    ,:UNI_STG
    ,:STD_DPT_YN
    ,:FIXED_YN
    ,:DPT_FIXED_YN
    ,:VIEW_SEQ
    ,:SEALED_YN
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
    -- INSERT_TSFN101
    <!--INSERT INTO TSFN101 (
    CASE_NO
    ,FIG_SHP
    ,ACT_COD
    ,SHP_COD
    ,NWK_ID
    ,ACT_ID
    ,ACT_DES
    ,ACT_TYP
    ,PLN_ST
    ,PLN_FI
    ,PLN_ST_INI
    ,PLN_FI_INI
    ,EST_ST
    ,EST_FI
    ,NET_ST
    ,NET_FI
    ,STD_TRM
    ,PLN_TRM
    ,PLN_TRM_INI
    ,NET_TRM
    ,DPT_COD
    ,MHR_TOT
    ,MHR_STU
    ,MHR_SGI
    ,MHR_REL
    ,MHR_LOD
    ,SCV_TYP
    ,ITM_COD
    ,MIS_COD
    ,DIV_COD
    ,DCK_COD
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,PNT_SCH
    ,ST_OPT_PNT
    ,ST_JOE_PNT
    ,FI_JOE_PNT
    ,FI_OPT_PNT
    ,CPY_SHP
    ,QUAY_YN
    ,JOO_YN
    ,MHR_GBN
    ,HO_GUBUN
    ,POS_ID
    ,DPT_COD_OR
    ,UNI_STG
    ,STD_DPT_YN
    ,FIXED_YN
    ,DPT_FIXED_YN
    ,VIEW_SEQ
    ,SEALED_YN
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:ACT_COD
    ,:SHP_COD
    ,:NWK_ID
    ,:ACT_ID
    ,:ACT_DES
    ,:ACT_TYP
    ,:PLN_ST
    ,:PLN_FI
    ,:PLN_ST_INI
    ,:PLN_FI_INI
    ,:EST_ST
    ,:EST_FI
    ,:NET_ST
    ,:NET_FI
    ,:STD_TRM
    ,:PLN_TRM
    ,:PLN_TRM_INI
    ,:NET_TRM
    ,:DPT_COD
    ,:MHR_TOT
    ,:MHR_STU
    ,:MHR_SGI
    ,:MHR_REL
    ,:MHR_LOD
    ,:SCV_TYP
    ,:ITM_COD
    ,:MIS_COD
    ,:DIV_COD
    ,:DCK_COD
    ,:WRK_STG
    ,:WRK_TYP
    ,:WRK_TYP2
    ,:PNT_SCH
    ,:ST_OPT_PNT
    ,:ST_JOE_PNT
    ,:FI_JOE_PNT
    ,:FI_OPT_PNT
    ,:CPY_SHP
    ,:QUAY_YN
    ,:JOO_YN
    ,:MHR_GBN
    ,:HO_GUBUN
    ,:POS_ID
    ,:DPT_COD_OR
    ,:UNI_STG
    ,:STD_DPT_YN
    ,:FIXED_YN
    ,:DPT_FIXED_YN
    ,:VIEW_SEQ
    ,:SEALED_YN
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )-->
  </INSERT_TSFN101>
  <!-- 모델선인 경우 -->
  <INSERT_TSFN101_MODEL>
    MERGE INTO TSMG_TSFN101 A
    USING DUAL
    ON ( A.FIG_NO = :FIG_NO AND A.CASE_NO = :CASE_NO AND A.FIG_SHP = :FIG_SHP AND ACT_COD = :ACT_COD )
    WHEN MATCHED THEN
    UPDATE  SET
    A.UP_DAT = TO_CHAR(SYSDATE, 'YYYYMMDD'),
    A.UP_USR = :IN_USR
    WHEN NOT MATCHED THEN
    INSERT  (FIG_NO
    ,CASE_NO
    ,FIG_SHP
    ,ACT_COD
    ,SHP_COD
    ,NWK_ID
    ,ACT_ID
    ,ACT_DES
    ,ACT_TYP
    ,PLN_ST
    ,PLN_FI
    ,PLN_ST_INI
    ,PLN_FI_INI
    ,EST_ST
    ,EST_FI
    ,NET_ST
    ,NET_FI
    ,STD_TRM
    ,PLN_TRM
    ,PLN_TRM_INI
    ,NET_TRM
    ,DPT_COD
    ,MHR_TOT
    ,MHR_STU
    ,MHR_SGI
    ,MHR_REL
    ,MHR_LOD
    ,SCV_TYP
    ,ITM_COD
    ,MIS_COD
    ,DIV_COD
    ,DCK_COD
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,PNT_SCH
    ,ST_OPT_PNT
    ,ST_JOE_PNT
    ,FI_JOE_PNT
    ,FI_OPT_PNT
    ,CPY_SHP
    ,QUAY_YN
    ,JOO_YN
    ,MHR_GBN
    ,HO_GUBUN
    ,POS_ID
    ,DPT_COD_OR
    ,UNI_STG
    ,STD_DPT_YN
    ,FIXED_YN
    ,DPT_FIXED_YN
    ,VIEW_SEQ
    ,SEALED_YN
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (:FIG_NO
    ,:CASE_NO
    ,:FIG_SHP
    ,:ACT_COD
    ,:SHP_COD
    ,:NWK_ID
    ,:ACT_ID
    ,:ACT_DES
    ,:ACT_TYP
    ,:PLN_ST
    ,:PLN_FI
    ,:PLN_ST_INI
    ,:PLN_FI_INI
    ,:EST_ST
    ,:EST_FI
    ,:NET_ST
    ,:NET_FI
    ,:STD_TRM
    ,:PLN_TRM
    ,:PLN_TRM_INI
    ,:NET_TRM
    ,:DPT_COD
    ,:MHR_TOT
    ,:MHR_STU
    ,:MHR_SGI
    ,:MHR_REL
    ,:MHR_LOD
    ,:SCV_TYP
    ,:ITM_COD
    ,:MIS_COD
    ,:DIV_COD
    ,:DCK_COD
    ,:WRK_STG
    ,:WRK_TYP
    ,:WRK_TYP2
    ,:PNT_SCH
    ,:ST_OPT_PNT
    ,:ST_JOE_PNT
    ,:FI_JOE_PNT
    ,:FI_OPT_PNT
    ,:CPY_SHP
    ,:QUAY_YN
    ,:JOO_YN
    ,:MHR_GBN
    ,:HO_GUBUN
    ,:POS_ID
    ,:DPT_COD_OR
    ,:UNI_STG
    ,:STD_DPT_YN
    ,:FIXED_YN
    ,:DPT_FIXED_YN
    ,:VIEW_SEQ
    ,:SEALED_YN
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN101_MODEL>
  
  
  <UPDATE_TSFN101>
    -- UPDATE_TSFN101
    UPDATE TSFN101 SET
    SHP_COD = :SHP_COD
    ,NWK_ID = :NWK_ID
    ,ACT_ID = :ACT_ID
    ,ACT_DES = :ACT_DES
    ,ACT_TYP = :ACT_TYP
    ,PLN_ST = :PLN_ST
    ,PLN_FI = :PLN_FI
    ,PLN_ST_INI = :PLN_ST_INI
    ,PLN_FI_INI = :PLN_FI_INI
    ,EST_ST = :EST_ST
    ,EST_FI = :EST_FI
    ,NET_ST = :NET_ST
    ,NET_FI = :NET_FI
    ,STD_TRM = :STD_TRM
    ,PLN_TRM = :PLN_TRM
    ,PLN_TRM_INI = :PLN_TRM_INI
    ,NET_TRM = :NET_TRM
    ,DPT_COD = :DPT_COD
    ,MHR_TOT = :MHR_TOT
    ,MHR_STU = :MHR_STU
    ,MHR_SGI = :MHR_SGI
    ,MHR_REL = :MHR_REL
    ,MHR_LOD = :MHR_LOD
    ,SCV_TYP = :SCV_TYP
    ,ITM_COD = :ITM_COD
    ,MIS_COD = :MIS_COD
    ,DIV_COD = :DIV_COD
    ,DCK_COD = :DCK_COD
    ,WRK_STG = :WRK_STG
    ,WRK_TYP = :WRK_TYP
    ,WRK_TYP2 = :WRK_TYP2
    ,PNT_SCH = :PNT_SCH
    ,ST_OPT_PNT = :ST_OPT_PNT
    ,ST_JOE_PNT = :ST_JOE_PNT
    ,FI_JOE_PNT = :FI_JOE_PNT
    ,FI_OPT_PNT = :FI_OPT_PNT
    ,CPY_SHP = :CPY_SHP
    ,QUAY_YN = :QUAY_YN
    ,JOO_YN = :JOO_YN
    ,MHR_GBN = :MHR_GBN
    ,HO_GUBUN = :HO_GUBUN
    ,POS_ID = :POS_ID
    ,DPT_COD_OR = :DPT_COD_OR
    ,UNI_STG = :UNI_STG
    ,STD_DPT_YN = :STD_DPT_YN
    ,FIXED_YN = :FIXED_YN
    ,DPT_FIXED_YN = :DPT_FIXED_YN
    ,VIEW_SEQ = :VIEW_SEQ
    ,SEALED_YN = :SEALED_YN
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND ACT_COD = :ACT_COD
  </UPDATE_TSFN101>

  <!-- 모델선인 경우 -->
  <UPDATE_TSFN101_MODEL>
    UPDATE TSMG_TSFN101
           SET SHP_COD      = :SHP_COD,
           NWK_ID       = :NWK_ID,
           ACT_ID       = :ACT_ID,
           ACT_DES      = :ACT_DES,
           ACT_TYP      = :ACT_TYP,
           PLN_ST       = :PLN_ST,
           PLN_FI       = :PLN_FI,
           PLN_ST_INI   = :PLN_ST_INI,
           PLN_FI_INI   = :PLN_FI_INI,
           EST_ST       = :EST_ST,
           EST_FI       = :EST_FI,
           NET_ST       = :NET_ST,
           NET_FI       = :NET_FI,
           STD_TRM      = :STD_TRM,
           PLN_TRM      = :PLN_TRM,
           PLN_TRM_INI  = :PLN_TRM_INI,
           NET_TRM      = :NET_TRM,
           DPT_COD      = :DPT_COD,
           MHR_TOT      = :MHR_TOT,
           MHR_STU      = :MHR_STU,
           MHR_SGI      = :MHR_SGI,
           MHR_REL      = :MHR_REL,
           MHR_LOD      = :MHR_LOD,
           SCV_TYP      = :SCV_TYP,
           ITM_COD      = :ITM_COD,
           MIS_COD      = :MIS_COD,
           DIV_COD      = :DIV_COD,
           DCK_COD      = :DCK_COD,
           WRK_STG      = :WRK_STG,
           WRK_TYP      = :WRK_TYP,
           WRK_TYP2     = :WRK_TYP2,
           PNT_SCH      = :PNT_SCH,
           ST_OPT_PNT   = :ST_OPT_PNT,
           ST_JOE_PNT   = :ST_JOE_PNT,
           FI_JOE_PNT   = :FI_JOE_PNT,
           FI_OPT_PNT   = :FI_OPT_PNT,
           CPY_SHP      = :CPY_SHP,
           QUAY_YN      = :QUAY_YN,
           JOO_YN       = :JOO_YN,
           MHR_GBN      = :MHR_GBN,
           HO_GUBUN     = :HO_GUBUN,
           POS_ID       = :POS_ID,
           DPT_COD_OR   = :DPT_COD_OR,
           UNI_STG      = :UNI_STG,
           STD_DPT_YN   = :STD_DPT_YN,
           FIXED_YN     = :FIXED_YN,
           DPT_FIXED_YN = :DPT_FIXED_YN,
           VIEW_SEQ     = :VIEW_SEQ,
           SEALED_YN    = :SEALED_YN,
           IP           = :IP,
           PID          = :PID,
           UP_DAT       = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI'),
           UP_USR       = :UP_USR
     WHERE FIG_NO  = :FIG_NO
       AND CASE_NO = :CASE_NO
       AND FIG_SHP = :FIG_SHP
       AND ACT_COD = :ACT_COD
  </UPDATE_TSFN101_MODEL>
  
  <DELETE_TSFN101>
    -- DELETE_TSFN101
    DELETE TSFN101
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND ACT_COD = :ACT_COD
  </DELETE_TSFN101>
  
  <!-- 모델선인 경우 -->
  <DELETE_TSFN101_MODEL>
    DELETE TSMG_TSFN101
     WHERE FIG_NO = :FIG_NO
       AND CASE_NO = :CASE_NO
       AND FIG_SHP = :FIG_SHP
       AND ACT_COD = :ACT_COD
  </DELETE_TSFN101_MODEL>

  <UPDATE_TSFN101_POS_ID>
    -- UPDATE_TSFN101_POS_ID
    UPDATE TSFN101
       SET POS_ID = :POS_ID
         , IP     = :IP
         , PID    = :PID
         , UP_DAT = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI')
         , UP_USR = :UP_USR
     WHERE CASE_NO = :CASE_NO
       AND FIG_SHP = :FIG_SHP
       AND TRIM(ACT_COD) = :ACT_COD
  </UPDATE_TSFN101_POS_ID>
  
  <!--TSFN101 END-->

  <!--TSFN102 BEGIN-->
  <TSFN102_CASE_NO_FIG_SHP_SELECT>
    -- TSFN102_CASE_NO_FIG_SHP_SELECT
    SELECT
    CASE_NO
    ,FIG_SHP
    ,PRE_ACT
    ,AFT_ACT
    ,SHP_COD
    ,PRE_NWK
    ,AFT_NWK
    ,HO_GUBUN1
    ,HO_GUBUN2
    ,REL_TYP
    ,STD_OST
    ,OFF_SET
    ,PRE_ACT_ID
    ,AFT_ACT_ID
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    ,PRE_DIV
    ,AFT_DIV
    ,LINE_COLOR
    ,LINE_THICKNESS
    ,LINE_STYLE
    ,LINE_SNAP_LOC
    FROM
    TSFN102
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </TSFN102_CASE_NO_FIG_SHP_SELECT>
  <INSERT_TSFN102>
    --2019.06.28
    -- 외업 의장중일정 관리(2018년 적용~)&gt;외업중일정계획수립&gt;마스터스케줄
    -- PK 충돌나는 문제가 있어 수정
    -- 여러원인 있지만 현상황에서 시스템 안정성 확보를 위해 MERGE INTO 구문 사용
    MERGE INTO OPT.TSFN102 A
    USING DUAL
    ON (A.CASE_NO = :CASE_NO AND A.FIG_SHP = :FIG_SHP AND PRE_ACT = :PRE_ACT AND AFT_ACT = :AFT_ACT)
    WHEN MATCHED THEN
    UPDATE
    SET
    A.UP_DAT  = TO_CHAR(SYSDATE, 'YYYYMMDD'),
    A.UP_USR  = :IN_USR
    WHEN NOT MATCHED THEN
    INSERT (
    CASE_NO
    ,FIG_SHP
    ,PRE_ACT
    ,AFT_ACT
    ,SHP_COD
    ,PRE_NWK
    ,AFT_NWK
    ,HO_GUBUN1
    ,HO_GUBUN2
    ,REL_TYP
    ,STD_OST
    ,OFF_SET
    ,PRE_ACT_ID
    ,AFT_ACT_ID
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    ,PRE_DIV
    ,AFT_DIV
    ,LINE_COLOR
    ,LINE_THICKNESS
    ,LINE_STYLE
    ,LINE_SNAP_LOC
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:PRE_ACT
    ,:AFT_ACT
    ,:SHP_COD
    ,:PRE_NWK
    ,:AFT_NWK
    ,:HO_GUBUN1
    ,:HO_GUBUN2
    ,:REL_TYP
    ,:STD_OST
    ,:OFF_SET
    ,:PRE_ACT_ID
    ,:AFT_ACT_ID
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:PRE_DIV
    ,:AFT_DIV
    ,:LINE_COLOR
    ,:LINE_THICKNESS
    ,:LINE_STYLE
    ,:LINE_SNAP_LOC
    )

    -- INSERT_TSFN102
    <!--INSERT INTO TSFN102 (
    CASE_NO
    ,FIG_SHP
    ,PRE_ACT
    ,AFT_ACT
    ,SHP_COD
    ,PRE_NWK
    ,AFT_NWK
    ,HO_GUBUN1
    ,HO_GUBUN2
    ,REL_TYP
    ,STD_OST
    ,OFF_SET
    ,PRE_ACT_ID
    ,AFT_ACT_ID
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    ,PRE_DIV
    ,AFT_DIV
    ,LINE_COLOR
    ,LINE_THICKNESS
    ,LINE_STYLE
    ,LINE_SNAP_LOC
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:PRE_ACT
    ,:AFT_ACT
    ,:SHP_COD
    ,:PRE_NWK
    ,:AFT_NWK
    ,:HO_GUBUN1
    ,:HO_GUBUN2
    ,:REL_TYP
    ,:STD_OST
    ,:OFF_SET
    ,:PRE_ACT_ID
    ,:AFT_ACT_ID
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:PRE_DIV
    ,:AFT_DIV
    ,:LINE_COLOR
    ,:LINE_THICKNESS
    ,:LINE_STYLE
    ,:LINE_SNAP_LOC
    )-->
  </INSERT_TSFN102>
  
  <!-- 모델선인 경우-->
  <INSERT_TSFN102_MODEL>
    MERGE INTO TSMG_TSFN102 A
    USING DUAL
       ON (A.FIG_NO = :FIG_NO AND A.CASE_NO = :CASE_NO AND A.FIG_SHP = :FIG_SHP AND PRE_ACT = :PRE_ACT AND AFT_ACT = :AFT_ACT)
     WHEN MATCHED THEN
   UPDATE 
      SET A.UP_DAT  = TO_CHAR(SYSDATE, 'YYYYMMDD'),
          A.UP_USR  = :IN_USR
     WHEN NOT MATCHED THEN
   INSERT (FIG_NO
          ,CASE_NO
          ,FIG_SHP
          ,PRE_ACT
          ,AFT_ACT
          ,SHP_COD
          ,PRE_NWK
          ,AFT_NWK
          ,HO_GUBUN1
          ,HO_GUBUN2
          ,REL_TYP
          ,STD_OST
          ,OFF_SET
          ,PRE_ACT_ID
          ,AFT_ACT_ID
          ,IP
          ,PID
          ,IN_DAT
          ,IN_USR
          ,PRE_DIV
          ,AFT_DIV
          ,LINE_COLOR
          ,LINE_THICKNESS
          ,LINE_STYLE
          ,LINE_SNAP_LOC
          )
   VALUES (:FIG_NO
          ,:CASE_NO
          ,:FIG_SHP
          ,:PRE_ACT
          ,:AFT_ACT
          ,:SHP_COD
          ,:PRE_NWK
          ,:AFT_NWK
          ,:HO_GUBUN1
          ,:HO_GUBUN2
          ,:REL_TYP
          ,:STD_OST
          ,:OFF_SET
          ,:PRE_ACT_ID
          ,:AFT_ACT_ID
          ,:IP
          ,:PID
          ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
          ,:IN_USR
          ,:PRE_DIV
          ,:AFT_DIV
          ,:LINE_COLOR
          ,:LINE_THICKNESS
          ,:LINE_STYLE
          ,:LINE_SNAP_LOC
          )
  </INSERT_TSFN102_MODEL>
  
  <UPDATE_TSFN102>
    -- UPDATE_TSFN102
    UPDATE TSFN102 SET
    SHP_COD = :SHP_COD
    ,PRE_NWK = :PRE_NWK
    ,AFT_NWK = :AFT_NWK
    ,HO_GUBUN1 = :HO_GUBUN1
    ,HO_GUBUN2 = :HO_GUBUN2
    ,REL_TYP = :REL_TYP
    ,STD_OST = :STD_OST
    ,OFF_SET = :OFF_SET
    ,PRE_ACT_ID = :PRE_ACT_ID
    ,AFT_ACT_ID = :AFT_ACT_ID
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    ,PRE_DIV = :PRE_DIV
    ,AFT_DIV = :AFT_DIV
    ,LINE_COLOR = :LINE_COLOR
    ,LINE_THICKNESS = :LINE_THICKNESS
    ,LINE_STYLE = :LINE_STYLE
    ,LINE_SNAP_LOC = :LINE_SNAP_LOC
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND PRE_ACT = :PRE_ACT
    AND AFT_ACT = :AFT_ACT
  </UPDATE_TSFN102>
  
  <!-- 모델선인 경우 -->
  <UPDATE_TSFN102_MODEL>
    UPDATE TSMG_TSFN102 
       SET SHP_COD = :SHP_COD
           PRE_NWK = :PRE_NWK,
           AFT_NWK = :AFT_NWK,
           HO_GUBUN1 = :HO_GUBUN1,
           HO_GUBUN2 = :HO_GUBUN2,
           REL_TYP = :REL_TYP,
           STD_OST = :STD_OST,
           OFF_SET = :OFF_SET,
           PRE_ACT_ID = :PRE_ACT_ID,
           AFT_ACT_ID = :AFT_ACT_ID,
           IP = :IP,
           PID = :PID,
           UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI'),
           UP_USR = :UP_USR,
           PRE_DIV = :PRE_DI,
           AFT_DIV = :AFT_DIV,
           LINE_COLOR = :LINE_COLOR,
           LINE_THICKNESS = :LINE_THICKNESS,
           LINE_STYLE = :LINE_STYLE,
           LINE_SNAP_LOC = :LINE_SNAP_LOC
     WHERE FIG_NO  = :FIG_NO
       AND CASE_NO = :CASE_NO
       AND FIG_SHP = :FIG_SHP
       AND PRE_ACT = :PRE_ACT
       AND AFT_ACT = :AFT_ACT
  </UPDATE_TSFN102_MODEL>
  <DELETE_TSFN102>
    -- DELETE_TSFN102
    DELETE TSFN102
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND PRE_ACT = :PRE_ACT
    AND AFT_ACT = :AFT_ACT
  </DELETE_TSFN102>
  
  <!-- 모델선인 경우 -->
  <DELETE_TSFN102_MODEL>
    DELETE TSMG_TSFN102
     WHERE FIG_NO  = :FIG_NO
       AND CASE_NO = :CASE_NO
       AND FIG_SHP = :FIG_SHP
       AND PRE_ACT = :PRE_ACT
       AND AFT_ACT = :AFT_ACT
  </DELETE_TSFN102_MODEL>
  <!--TSFN102 END-->

  <!--TSFN011 BEGIN-->

  <TSFN011_FIG_SHP_REV_DES>
    --TSFN011_FIG_SHP_REV_DES
    --호선 리비전 리스트 조회
    SELECT CASE_NO, REV_DES, CASE_NO ||'   '||REV_DES CASE_NO_DES FROM TSFN011
    WHERE FIG_SHP = :FIG_SHP AND BP_YN ='N'
    ORDER BY CASE_NO
  </TSFN011_FIG_SHP_REV_DES>
  <TSFN011_CASE_NO_FIG_SHP_SELECT>
    -- TSFN011_CASE_NO_FIG_SHP_SELECT
    SELECT
    *
    FROM
    OPT.TSFN011
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </TSFN011_CASE_NO_FIG_SHP_SELECT>
  <!--TSFN011 END-->

  <!--TSFN103 BEGIN-->
  <TSFN103_CASE_NO_FIG_SHP_SELECT>
    -- TSFN103_CASE_NO_FIG_SHP_SELECT
    SELECT
    CASE_NO
    ,FIG_SHP
    ,WRK_PNT
    ,PLN_ST
    ,PLN_FI
    ,PLN_TRM_NET
    ,PLN_TRM_CAL
    ,NET_ST
    ,NET_FI
    ,ST_JOE_PNT
    ,ST_CDT_TM
    ,FI_JOE_PNT
    ,FINI_CDT_TM
    ,SHP_COD
    ,DELAY_TYP
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN103
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </TSFN103_CASE_NO_FIG_SHP_SELECT>
  <INSERT_TSFN103>
    -- INSERT_TSFN103
    INSERT INTO TSFN103 (
    CASE_NO
    ,FIG_SHP
    ,WRK_PNT
    ,PLN_ST
    ,PLN_FI
    ,PLN_TRM_NET
    ,PLN_TRM_CAL
    ,NET_ST
    ,NET_FI
    ,ST_JOE_PNT
    ,ST_CDT_TM
    ,FI_JOE_PNT
    ,FINI_CDT_TM
    ,SHP_COD
    ,DELAY_TYP
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:WRK_PNT
    ,:PLN_ST
    ,:PLN_FI
    ,:PLN_TRM_NET
    ,:PLN_TRM_CAL
    ,:NET_ST
    ,:NET_FI
    ,:ST_JOE_PNT
    ,:ST_CDT_TM
    ,:FI_JOE_PNT
    ,:FINI_CDT_TM
    ,:SHP_COD
    ,:DELAY_TYP
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN103>
  <UPDATE_TSFN103>
    -- UPDATE_TSFN103
    UPDATE TSFN103 SET
    PLN_ST = :PLN_ST
    ,PLN_FI = :PLN_FI
    ,PLN_TRM_NET = :PLN_TRM_NET
    ,PLN_TRM_CAL = :PLN_TRM_CAL
    ,NET_ST = :NET_ST
    ,NET_FI = :NET_FI
    ,ST_JOE_PNT = :ST_JOE_PNT
    ,ST_CDT_TM = :ST_CDT_TM
    ,FI_JOE_PNT = :FI_JOE_PNT
    ,FINI_CDT_TM = :FINI_CDT_TM
    ,SHP_COD = :SHP_COD
    ,DELAY_TYP = :DELAY_TYP
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND WRK_PNT = :WRK_PNT
  </UPDATE_TSFN103>
  <DELETE_TSFN103>
    -- DELETE_TSFN103
    DELETE TSFN103
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND WRK_PNT = :WRK_PNT
  </DELETE_TSFN103>
  <!--TSFN103 END-->

  <!-- 모델선 목록 -->
  <MODEL_NO_SELECT>
    SELECT FIG_NO
    FROM TSAC003 A
    WHERE A.FIG_NO LIKE 'MODEL%'
    UNION
    SELECT FIG_NO
    FROM TSAC003 A
    WHERE A.PRJ_GBN = 'C000'
    ORDER BY 1
  </MODEL_NO_SELECT>

  <!-- 모델선의 호선 정보 -->
  <MODEL_SHIP_SELECT>
    SELECT A.SHP_COD, CASE WHEN :I_FIG_NO LIKE 'MODEL%' THEN A.FIG_SHP||' '||D.A_SHP_DES ELSE A.SHP_DES END SHP_DES, A.FIG_SHP,
    A.DCK_COD, A.WC, A.KL, A.LC, A.DL,
    A.SHP_KND, A.SHP_TYP, A.SHP_TYP_NM,
    A.PRJ_GBN
    FROM OPT.TSAD001 A, TSEG044 B, TSXA002 C, TSEO151 D
    WHERE A.SHP_KND = C.STD_COD_DET
    AND C.STD_COD = 'PS101'
    AND A.FIG_NO = :I_FIG_NO
    AND A.FIG_SHP = B.FIG_SHP(+)
    AND A.FIG_NO = D.FIG_NO(+)
    AND A.FIG_SHP = D.FIG_SHP(+)
    ORDER BY A.SHP_DES
  </MODEL_SHIP_SELECT>
  


  <TSAA002_KL_SELECT>
    SELECT
    B.SHP_COD, B.SHP_DES,B.FIG_SHP
    ,B.DCK_COD,B.WC,B.KL,B.LC,B.DL
    ,B.SHP_KND,B.SHP_TYP, B.SHP_TYP_NM
    ,B.PRJ_GBN
    FROM  TSAA002 B
    WHERE B.KL &gt;= :ST_DATE AND B.KL &lt; :FI_DATE AND :WHERE_PRJ_GBN
    ORDER BY B.FIG_SHP
  </TSAA002_KL_SELECT>





  <!--TSEE002 BEGIN-->
  <TSEE002_SELECT>
    -- TSEE002_SELECT
    SELECT
    PRJ_GBN
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,STG_DES
    ,TYP_DES
    ,TYP2_DES
    ,HO_GUBUN
    ,MS_DISP
    ,DAE_ACT1
    ,DAE_ACT2
    ,REL_TYP
    ,DIF_DAY
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    ,DEL_YN
    FROM
    TSEE002
  </TSEE002_SELECT>
  <INSERT_TSEE002>
    -- INSERT_TSEE002
    INSERT INTO TSEE002 (
    PRJ_GBN
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,STG_DES
    ,TYP_DES
    ,TYP2_DES
    ,HO_GUBUN
    ,MS_DISP
    ,DAE_ACT1
    ,DAE_ACT2
    ,REL_TYP
    ,DIF_DAY
    ,IN_DAT
    ,IN_USR
    ,DEL_YN
    )
    VALUES (
    :PRJ_GBN
    ,:WRK_STG
    ,:WRK_TYP
    ,:WRK_TYP2
    ,:STG_DES
    ,:TYP_DES
    ,:TYP2_DES
    ,:HO_GUBUN
    ,:MS_DISP
    ,:DAE_ACT1
    ,:DAE_ACT2
    ,:REL_TYP
    ,:DIF_DAY
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:DEL_YN
    )
  </INSERT_TSEE002>
  <UPDATE_TSEE002>
    -- UPDATE_TSEE002
    UPDATE TSEE002 SET
    STG_DES = :STG_DES
    ,TYP_DES = :TYP_DES
    ,TYP2_DES = :TYP2_DES
    ,HO_GUBUN = :HO_GUBUN
    ,MS_DISP = :MS_DISP
    ,DAE_ACT1 = :DAE_ACT1
    ,DAE_ACT2 = :DAE_ACT2
    ,REL_TYP = :REL_TYP
    ,DIF_DAY = :DIF_DAY
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    ,DEL_YN = :DEL_YN
    WHERE
    PRJ_GBN = :PRJ_GBN
    AND WRK_STG = :WRK_STG
    AND WRK_TYP = :WRK_TYP
    AND WRK_TYP2 = :WRK_TYP2
  </UPDATE_TSEE002>
  <DELETE_TSEE002>
    -- DELETE_TSEE002
    DELETE TSEE002
    WHERE
    PRJ_GBN = :PRJ_GBN
    AND WRK_STG = :WRK_STG
    AND WRK_TYP = :WRK_TYP
    AND WRK_TYP2 = :WRK_TYP2
  </DELETE_TSEE002>
  <!--TSEE002 END-->

  <!--TSFZ001 BEGIN-->
  <TSFA001_IF_PSPID_IF_ID_SELECT>
    --TSFA001_IF_PSPID_IF_ID_SELECT
    SELECT
    *
    FROM TSFZ001
    WHERE
    PSPID = :PSPID AND IF_ID = :IF_ID
    ORDER BY ACT_COD
  </TSFA001_IF_PSPID_IF_ID_SELECT>
  <TSFN101_IF_PSPID_SELECT>
    --TSFN101_IF_PSPID_SELECT
    --이중CASE 추가 19.11.13 신성훈
    SELECT
    '' IF_ID,
    B.PSP_NR,
    A.FIG_SHP PSPID,
    ACT_COD,
    NWK_ID,
    ACT_ID,
    CASE SUBSTR(ACT_COD,5,1) WHEN 'P' THEN
    CASE WHEN SUBSTR(ACT_DES,-3,3) != '(P)' THEN ACT_DES||' ('||SUBSTR(ACT_COD,5,1)||')' ELSE ACT_DES END
    WHEN 'C' THEN
    CASE WHEN SUBSTR(ACT_DES,-3,3) != '(C)' THEN ACT_DES||' ('||SUBSTR(ACT_COD,5,1)||')' ELSE ACT_DES END
    WHEN 'S' THEN
    CASE WHEN SUBSTR(ACT_DES,-3,3) != '(S)' THEN ACT_DES||' ('||SUBSTR(ACT_COD,5,1)||')' ELSE ACT_DES END
    WHEN 'A' THEN
    CASE WHEN SUBSTR(ACT_DES,-3,3) != '(A)' THEN ACT_DES||' ('||SUBSTR(ACT_COD,5,1)||')' ELSE ACT_DES END
    WHEN 'M' THEN
    CASE WHEN SUBSTR(ACT_DES,-3,3) != '(M)' THEN ACT_DES||' ('||SUBSTR(ACT_COD,5,1)||')' ELSE ACT_DES END
    WHEN 'F' THEN
    CASE WHEN SUBSTR(ACT_DES,-3,3) != '(F)' THEN ACT_DES||' ('||SUBSTR(ACT_COD,5,1)||')' ELSE ACT_DES END
    ELSE ACT_DES
    END ACT_DES,
    ACT_TYP,
    PLN_ST,
    PLN_FI,
    EST_ST,
    EST_FI,
    NET_ST,
    NET_FI,
    STD_TRM,
    NET_TRM,
    A.DPT_COD,
    'PS06' IO_GBN,
    '' VND_COD,
    MHR_TOT,
    MHR_STU,
    MHR_SGI,
    MHR_REL,
    '' MUL_WGT,
    SCV_TYP,
    '' UNT_STG,
    ITM_COD,
    MIS_COD,
    DIV_COD,
    A.DCK_COD,
    WRK_STG,
    WRK_TYP,
    WRK_TYP2,
    PNT_SCH,
    ST_OPT_PNT,
    ST_JOE_PNT,
    FI_JOE_PNT,
    FI_OPT_PNT,
    A.CPY_SHP,
    QUAY_YN,
    JOO_YN,
    '' REL_JBN,
    '' MHR_GBN,
    '' SC_RAT,
    '' P_POR_EA,
    '' P_PO_IND,
    '' P_PO_EA_L,
    '' P_PO_EA_I,
    '' S_POR_EA,
    '' S_PO_IND,
    '' S_PO_EA_L,
    '' S_PO_EA_I,
    '' DP_IND,
    '' DP_CODE,
    '' FI_DT,
    '' EX_DPT,
    '' EX_DIV,
    HO_GUBUN,
    '' MOD_HIS,
    '' PS_STATUS,
    '' DEL_YN,
    POS_ID,
    '00000000' IN_DATE,
    '00000000' UP_DATE,
    DPT_COD_OR,
    '' STEUS_OR,
    A.IP,
    A.PID,
    A.IN_DAT,
    A.UP_DAT,
    A.IN_USR,
    A.UP_USR
    FROM TSFN101 A, TSAA002 B
    WHERE A.CASE_NO = :CASE_NO AND A.FIG_SHP = :PSPID
    AND B.FIG_SHP = A.FIG_SHP
    ORDER BY DIV_COD, ACT_COD
  </TSFN101_IF_PSPID_SELECT>
  <TSFN101_REV_CASE_NO_PSPID_SELECT>
    --TSFN101_REV_CASE_NO_PSPID_SELECT
    SELECT
    '' IF_ID,
    B.PSP_NR,
    A.FIG_SHP PSPID,
    ACT_COD,
    NWK_ID,
    ACT_ID,
    ACT_DES,
    ACT_TYP,
    PLN_ST,
    PLN_FI,
    EST_ST,
    EST_FI,
    NET_ST,
    NET_FI,
    STD_TRM,
    NET_TRM,
    DPT_COD,
    'PS06' IO_GBN,
    '' VND_COD,
    MHR_TOT,
    MHR_STU,
    MHR_SGI,
    MHR_REL,
    '' MUL_WGT,
    SCV_TYP,
    '' UNT_STG,
    ITM_COD,
    MIS_COD,
    DIV_COD,
    A.DCK_COD,
    WRK_STG,
    WRK_TYP,
    WRK_TYP2,
    PNT_SCH,
    ST_OPT_PNT,
    ST_JOE_PNT,
    FI_JOE_PNT,
    FI_OPT_PNT,
    A.CPY_SHP,
    QUAY_YN,
    JOO_YN,
    '' REL_JBN,
    '' MHR_GBN,
    '' SC_RAT,
    '' P_POR_EA,
    '' P_PO_IND,
    '' P_PO_EA_L,
    '' P_PO_EA_I,
    '' S_POR_EA,
    '' S_PO_IND,
    '' S_PO_EA_L,
    '' S_PO_EA_I,
    '' DP_IND,
    '' DP_CODE,
    '' FI_DT,
    '' EX_DPT,
    '' EX_DIV,
    HO_GUBUN,
    '' MOD_HIS,
    '' PS_STATUS,
    '' DEL_YN,
    POS_ID,
    '00000000' IN_DATE,
    '00000000' UP_DATE,
    DPT_COD_OR,
    '' STEUS_OR,
    A.IP,
    A.PID,
    A.IN_DAT,
    A.UP_DAT,
    A.IN_USR,
    A.UP_USR
    FROM TSFN101_REV A, TSAA002 B
    WHERE (A.CASE_NO , A.FIG_SHP , A.REV_STATUS, A.REV_DATE, A.ACT_COD)
    IN  (SELECT  MAX(CASE_NO) CASE_NO, MAX(FIG_SHP) FIG_SHP, MAX(REV_STATUS) REV_STATUS, MAX(REV_DATE) REV_DATE,  A.ACT_COD
    FROM TSFN101_REV A
    WHERE A.CASE_NO = :CASE_NO AND A.FIG_SHP = :PSPID   AND A.REV_STATUS = 'D'
    GROUP BY A.ACT_COD)
    --WHERE A.CASE_NO = :CASE_NO AND A.FIG_SHP = :PSPID    AND A.REV_STATUS = 'D'
    AND B.FIG_SHP = A.FIG_SHP
    ORDER BY DIV_COD, ACT_COD
  </TSFN101_REV_CASE_NO_PSPID_SELECT>
  <TSFA001_IF_PSPID_SELECT>
    --TSFA001_IF_PSPID_SELECT
    SELECT
    '' IF_ID,
    B.PSP_NR,
    A.FIG_SHP PSPID,
    ACT_COD,
    NWK_ID,
    ACT_ID,
    ACT_DES,
    ACT_TYP,
    PLN_ST,
    PLN_FI,
    EST_ST,
    EST_FI,
    NET_ST,
    NET_FI,
    STD_TRM,
    NET_TRM,
    DPT_COD,
    'PS06' IO_GBN,
    '' VND_COD,
    MHR_TOT,
    MHR_STU,
    MHR_SGI,
    MHR_REL,
    '' MUL_WGT,
    SCV_TYP,
    '' UNT_STG,
    ITM_COD,
    MIS_COD,
    DIV_COD,
    A.DCK_COD,
    WRK_STG,
    WRK_TYP,
    WRK_TYP2,
    PNT_SCH,
    ST_OPT_PNT,
    ST_JOE_PNT,
    FI_JOE_PNT,
    FI_OPT_PNT,
    A.CPY_SHP,
    QUAY_YN,
    JOO_YN,
    '' REL_JBN,
    '' MHR_GBN,
    '' SC_RAT,
    '' P_POR_EA,
    '' P_PO_IND,
    '' P_PO_EA_L,
    '' P_PO_EA_I,
    '' S_POR_EA,
    '' S_PO_IND,
    '' S_PO_EA_L,
    '' S_PO_EA_I,
    '' DP_IND,
    '' DP_CODE,
    '' FI_DT,
    '' EX_DPT,
    '' EX_DIV,
    HO_GUBUN,
    '' MOD_HIS,
    '' PS_STATUS,
    '' DEL_YN,
    POS_ID,
    '00000000' IN_DATE,
    '00000000' UP_DATE,
    DPT_COD_OR,
    '' STEUS_OR,
    A.IP,
    A.PID,
    A.IN_DAT,
    A.UP_DAT,
    A.IN_USR,
    A.UP_USR
    FROM TSFA001 A, TSAA001 B
    WHERE A.FIG_SHP = :PSPID
    AND B.FIG_SHP = A.FIG_SHP
    ORDER BY DIV_COD, ACT_COD
  </TSFA001_IF_PSPID_SELECT>
  <TSFZ001_PSPID_SELECT>
    -- TSFZ001_PSPID_SELECT
    SELECT
    *
    FROM
    TSFZ001
    WHERE
    PSPID = :PSPID
  </TSFZ001_PSPID_SELECT>
  <INSERT_TSFZ001>
    -- INSERT_TSFZ001
    INSERT INTO TSFZ001 (
    IF_ID
    ,PSP_NR
    ,PSPID
    ,ACT_COD
    ,NWK_ID
    ,ACT_ID
    ,ACT_DES
    ,ACT_TYP
    ,PLN_ST
    ,PLN_FI
    ,EST_ST
    ,EST_FI
    ,NET_ST
    ,NET_FI
    ,STD_TRM
    ,NET_TRM
    ,DPT_COD
    ,IO_GBN
    ,VND_COD
    ,MHR_TOT
    ,MHR_STU
    ,MHR_SGI
    ,MHR_REL
    ,MUL_WGT
    ,SCV_TYP
    ,UNT_STG
    ,ITM_COD
    ,MIS_COD
    ,DIV_COD
    ,DCK_COD
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,PNT_SCH
    ,ST_OPT_PNT
    ,ST_JOE_PNT
    ,FI_JOE_PNT
    ,FI_OPT_PNT
    ,CPY_SHP
    ,QUAY_YN
    ,JOO_YN
    ,REL_JBN
    ,MHR_GBN
    ,SC_RAT
    ,P_POR_EA
    ,P_PO_IND
    ,P_PO_EA_L
    ,P_PO_EA_I
    ,S_POR_EA
    ,S_PO_IND
    ,S_PO_EA_L
    ,S_PO_EA_I
    ,DP_IND
    ,DP_CODE
    ,FI_DT
    ,EX_DPT
    ,EX_DIV
    ,HO_GUBUN
    ,MOD_HIS
    ,PS_STATUS
    ,DEL_YN
    ,POS_ID
    ,IN_DATE
    ,DPT_COD_OR
    ,STEUS_OR
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :IF_ID
    ,:PSP_NR
    ,:PSPID
    ,:ACT_COD
    ,:NWK_ID
    ,:ACT_ID
    ,:ACT_DES
    ,:ACT_TYP
    ,:PLN_ST
    ,:PLN_FI
    ,:EST_ST
    ,:EST_FI
    ,:NET_ST
    ,:NET_FI
    ,:STD_TRM
    ,:NET_TRM
    ,:DPT_COD
    ,:IO_GBN
    ,:VND_COD
    ,:MHR_TOT
    ,:MHR_STU
    ,:MHR_SGI
    ,:MHR_REL
    ,:MUL_WGT
    ,:SCV_TYP
    ,:UNT_STG
    ,:ITM_COD
    ,:MIS_COD
    ,:DIV_COD
    ,:DCK_COD
    ,:WRK_STG
    ,:WRK_TYP
    ,:WRK_TYP2
    ,:PNT_SCH
    ,:ST_OPT_PNT
    ,:ST_JOE_PNT
    ,:FI_JOE_PNT
    ,:FI_OPT_PNT
    ,:CPY_SHP

    ,:QUAY_YN
    ,:JOO_YN
    ,:REL_JBN
    ,:MHR_GBN
    ,:SC_RAT
    ,:P_POR_EA
    ,:P_PO_IND
    ,:P_PO_EA_L
    ,:P_PO_EA_I
    ,:S_POR_EA
    ,:S_PO_IND
    ,:S_PO_EA_L
    ,:S_PO_EA_I
    ,:DP_IND
    ,:DP_CODE
    ,:FI_DT
    ,:EX_DPT
    ,:EX_DIV
    ,:HO_GUBUN
    ,:MOD_HIS
    ,:PS_STATUS
    ,:DEL_YN
    ,:POS_ID
    ,TO_CHAR (SYSDATE, 'YYYYMMDD')
    ,:DPT_COD_OR
    ,:STEUS_OR
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFZ001>
  <UPDATE_TSFZ001 />
  <DELETE_TSFZ001 />
  <!--TSFZ001 END-->

  <!--TSFZ002 BEGIN-->
  <TSFZ002_PSPID_SELECT>
    -- TSFZ002_PSPID_SELECT
    SELECT
    ACT_HIS
    ,PSPID
    ,ZZWKOBJ
    ,ZZWKSTG
    ,ZZWKTYP
    ,ZZWKTYP_DTL
    ,ZZACTCODE
    ,MESSAGE
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFZ002
    WHERE
    PSPID = :PSPID
  </TSFZ002_PSPID_SELECT>
  <INSERT_TSFZ002>
    -- INSERT_TSFZ002
    INSERT INTO TSFZ002 (
    IF_ID
    ,MOD_HIS
    ,PSPID
    ,ITM_COD
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,ACT_COD
    ,PLN_ST
    ,PLN_FI
    ,DPT_COD
    ,DIV_COD
    ,MESSAGE
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :IF_ID
    ,:MOD_HIS
    ,:PSPID
    ,:ITM_COD
    ,:WRK_STG
    ,:WRK_TYP
    ,:WRK_TYP2
    ,:ACT_COD
    ,:PLN_ST
    ,:PLN_FI
    ,:DPT_COD
    ,:DIV_COD
    ,:MESSAGE
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFZ002>
  <UPDATE_TSFZ002 />
  <DELETE_TSFZ002 />
  <!--TSFZ002 END-->


  <!--TSFZ002 BEGIN-->
  <TSFZ002_DISTINCT_IF_ID_SELECT>
    SELECT IF_ID
    FROM (
    SELECT
    DISTINCT IF_ID
    FROM
    TSFZ002
    WHERE PSPID = :PSPID)
    ORDER BY IF_ID DESC
  </TSFZ002_DISTINCT_IF_ID_SELECT>
  <TSFZ002_IF_ID_PSPID_SELECT>
    --TSFZ002_IF_ID_PSPID_SELECT
    SELECT
    *
    FROM
    TSFZ002
    WHERE PSPID = :PSPID AND IF_ID = :IF_ID
    ORDER BY  MOD_HIS, ACT_COD
  </TSFZ002_IF_ID_PSPID_SELECT>
  <TSFZ002_IF_ID_SELECT>
    -- TSFZ002_IF_ID_SELECT
    SELECT
    IF_ID
    ,MOD_HIS
    ,PSPID
    ,ITM_COD
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,ACT_COD
    ,PLN_ST
    ,PLN_FI
    ,DPT_COD
    ,DIV_COD
    ,MESSAGE
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFZ002
    WHERE
    IF_ID = :IF_ID
  </TSFZ002_IF_ID_SELECT>
  <!--TSFZ002 END-->

  <!--TSFN005 BEGIN-->
  <TSFN005_MODEL_NO_SELECT>
    -- TSFN005_MODEL_NO_SELECT
    SELECT
    A.MODEL_NO
    ,A.SHP_KND
    ,A.SHP_TYP
    ,A.DCK_COD
    ,A.ACT_ID
    ,B.ACT_DES
    ,A.WRK_PNT
    ,(SELECT WRK_PNT_SHT FROM TSDB001 WHERE WRK_PNT = A.WRK_PNT) WRK_PNT_SHT
    ,A.STD_OST
    ,A.ST_FI_GBN
    ,A.RMK
    ,A.USE_YN
    ,A.IP
    ,A.PID
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.IN_USR
    ,A.UP_USR
    FROM
    TSFN005 A, TSFN002 B
    WHERE A.MODEL_NO = :MODEL_NO
    AND A.MODEL_NO = B.MODEL_NO(+)
    AND A.ACT_ID = B.ACT_ID(+)
  </TSFN005_MODEL_NO_SELECT>
  <TSFN005_MODEL_NO_DIV_COD_SELECT>
    -- TSFN005_MODEL_NO_DIV_COD_SELECT
    SELECT
    A.MODEL_NO
    ,A.SHP_KND
    ,A.SHP_TYP
    ,A.DCK_COD
    ,A.ACT_ID
    ,B.ACT_DES
    ,A.WRK_PNT
    ,(SELECT WRK_PNT_SHT FROM TSDB001 WHERE WRK_PNT = A.WRK_PNT) WRK_PNT_SHT
    ,A.STD_OST
    ,A.ST_FI_GBN
    ,A.RMK
    ,A.USE_YN
    ,A.IP
    ,A.PID
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.IN_USR
    ,A.UP_USR
    FROM
    TSFN005 A, TSFN002 B
    WHERE A.MODEL_NO = :MODEL_NO
    AND A.MODEL_NO = B.MODEL_NO(+)
    AND A.ACT_ID = B.ACT_ID(+)
    AND B.DIV_COD = :DIV_COD
  </TSFN005_MODEL_NO_DIV_COD_SELECT>

  <TSFN005_MODEL_NO_MAKE_SHIP_SELECT>
    -- TSFN005_MODEL_NO_MAKE_SHIP_SELECT
    SELECT
    A.MODEL_NO
    ,A.SHP_KND
    ,A.SHP_TYP
    ,A.DCK_COD
    ,A.ACT_ID
    ,B.ACT_DES
    ,A.WRK_PNT
    ,(SELECT WRK_PNT_SHT FROM TSDB001 WHERE WRK_PNT = A.WRK_PNT) WRK_PNT_SHT
    ,A.STD_OST
    ,A.ST_FI_GBN
    ,A.RMK
    ,A.USE_YN
    ,A.IP
    ,A.PID
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.IN_USR
    ,A.UP_USR
    ,B.ITM_COD_LST ITM_COD
    ,B.WRK_STG
    ,B.WRK_TYP
    ,B.WRK_TYP2
    ,B.DIV_COD2
    FROM
    TSFN005 A, TSFN002 B
    WHERE
    A.MODEL_NO = :MODEL_NO
    AND A.MODEL_NO = B.MODEL_NO
    AND A.ACT_ID = B.ACT_ID
  </TSFN005_MODEL_NO_MAKE_SHIP_SELECT>
  <INSERT_TSFN005>
    -- INSERT_TSFN005
    INSERT INTO TSFN005 (
    MODEL_NO
    ,SHP_KND
    ,SHP_TYP
    ,DCK_COD
    ,ACT_ID
    ,WRK_PNT
    ,STD_OST
    ,ST_FI_GBN
    ,RMK
    ,USE_YN
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :MODEL_NO
    ,:SHP_KND
    ,:SHP_TYP
    ,:DCK_COD
    ,:ACT_ID
    ,:WRK_PNT
    ,:STD_OST
    ,:ST_FI_GBN
    ,:RMK
    ,:USE_YN
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN005>
  <UPDATE_TSFN005>
    -- UPDATE_TSFN005
    UPDATE TSFN005 SET
    SHP_KND = :SHP_KND
    ,SHP_TYP = :SHP_TYP
    ,DCK_COD = :DCK_COD
    ,STD_OST = :STD_OST
    ,ST_FI_GBN = :ST_FI_GBN
    ,RMK = :RMK
    ,USE_YN = :USE_YN
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    MODEL_NO = :MODEL_NO
    AND ACT_ID = :ACT_ID
    AND WRK_PNT = :WRK_PNT
  </UPDATE_TSFN005>
  <DELETE_TSFN005>
    -- DELETE_TSFN005
    DELETE TSFN005
    WHERE
    MODEL_NO = :MODEL_NO
    AND ACT_ID = :ACT_ID
    AND WRK_PNT = :WRK_PNT
  </DELETE_TSFN005>
  <TSFN005_DISTINCT_MODEL_NO_SELECT>
    --TSFN005_DISTINCT_MODEL_NO_SELECT
    SELECT DISTINCT MODEL_NO MODEL_NO
    FROM TSFN005
    WHERE SHP_TYP = :SHP_TYP
  </TSFN005_DISTINCT_MODEL_NO_SELECT>
  <!--TSFN005 END-->

  <!--TSFN105 BEGIN-->
  <TSFN105_CASE_NO_FIG_SHP_SELECT>
    -- TSFN105_CASE_NO_FIG_SHP_SELECT
    SELECT
    A.CASE_NO
    ,A.FIG_SHP
    ,A.ACT_COD
    ,D.ACT_DES
    ,A.WRK_PNT
    ,A.SHP_COD
    ,A.STD_OST
    ,A.PNT_OST
    ,A.ST_FI_GBN
    ,A.RMK
    ,A.USE_YN
    ,B.PLN_ST
    ,B.PLN_FI
    ,C.SIGN
    ,C.WRK_PNT_SHT
    ,A.IP
    ,A.PID
    ,A.IN_DAT
    ,A.UP_DAT
    ,A.IN_USR
    ,A.UP_USR
    FROM  TSFN105 A, TSDC002 B, TSDB001 C, TSFN101 D
    WHERE
    A.CASE_NO = :CASE_NO
    AND A.FIG_SHP = :FIG_SHP
    AND A.FIG_SHP = B.FIG_SHP(+)
    AND A.WRK_PNT = B.WRK_PNT(+)
    AND A.WRK_PNT = C.WRK_PNT(+)
    AND A.FIG_SHP = D.FIG_SHP(+)
    AND A.CASE_NO = D.CASE_NO(+)
    AND A.ACT_COD = D.ACT_COD(+)
  </TSFN105_CASE_NO_FIG_SHP_SELECT>
  <!-- 모델선인 경우 -->
  <TSFN105_CASE_NO_FIG_SHP_SELECT_MODEL>
    SELECT A.CASE_NO,
    A.FIG_SHP,
    A.ACT_COD,
    D.ACT_DES,
    A.WRK_PNT,
    A.SHP_COD,
    A.STD_OST,
    A.PNT_OST,
    A.ST_FI_GBN,
    A.RMK,
    A.USE_YN,
    B.PLN_ST,
    B.PLN_FI,
    C.SIGN,
    C.WRK_PNT_SHT,
    A.IP,
    A.PID,
    A.IN_DAT,
    A.UP_DAT,
    A.IN_USR,
    A.UP_USR
    FROM TSMG_TSFN105 A, TSMG_TSDC002 B, TSDB001 C, TSMG_TSFN101 D
    WHERE A.FIG_NO = :FIG_NO
    AND A.CASE_NO = :CASE_NO
    AND A.FIG_SHP = :FIG_SHP
    AND A.FIG_NO = B.FIG_NO(+)
    AND A.FIG_SHP = B.FIG_SHP(+)
    AND A.WRK_PNT = B.WRK_PNT(+)
    AND A.WRK_PNT = C.WRK_PNT(+)
    AND A.FIG_NO = D.FIG_NO(+)
    AND A.FIG_SHP = D.FIG_SHP(+)
    AND A.CASE_NO = D.CASE_NO(+)
    AND A.ACT_COD = D.ACT_COD(+)
  </TSFN105_CASE_NO_FIG_SHP_SELECT_MODEL>
  
  <INSERT_TSFN105>
    --2019.06.28
    -- 외업 의장중일정 관리(2018년 적용~)&gt;외업중일정계획수립&gt;마스터스케줄
    -- PK 충돌나는 문제가 있어 수정
    -- 여러원인 있지만 현상황에서 시스템 안정성 확보를 위해 MERGE INTO 구문 사용
    MERGE INTO OPT.TSFN105 A
    USING DUAL
    ON (A.CASE_NO = :CASE_NO AND A.FIG_SHP = :FIG_SHP AND A.ACT_COD = :ACT_COD AND WRK_PNT = :WRK_PNT )
    WHEN MATCHED THEN
    UPDATE
    SET
    A.UP_DAT  = TO_CHAR(SYSDATE, 'YYYYMMDD'),
    A.UP_USR  = :IN_USR
    WHEN NOT MATCHED THEN
    INSERT (
    CASE_NO
    ,FIG_SHP
    ,ACT_COD
    ,WRK_PNT
    ,SHP_COD
    ,STD_OST
    ,PNT_OST
    ,ST_FI_GBN
    ,RMK
    ,USE_YN
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:ACT_COD
    ,:WRK_PNT
    ,:SHP_COD
    ,:STD_OST
    ,:PNT_OST
    ,:ST_FI_GBN
    ,:RMK
    ,:USE_YN
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )


    -- INSERT_TSFN105
    <!--INSERT INTO TSFN105 (
    CASE_NO
    ,FIG_SHP
    ,ACT_COD
    ,WRK_PNT
    ,SHP_COD
    ,STD_OST
    ,PNT_OST
    ,ST_FI_GBN
    ,RMK
    ,USE_YN
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:ACT_COD
    ,:WRK_PNT
    ,:SHP_COD
    ,:STD_OST
    ,:PNT_OST
    ,:ST_FI_GBN
    ,:RMK
    ,:USE_YN
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )-->
  </INSERT_TSFN105>

  <INSERT_TSFN105_MODEL>
    MERGE INTO TSMG_TSFN105 A
    USING DUAL
    ON (A.FIG_NO = :FIG_NO AND A.CASE_NO = :CASE_NO AND A.FIG_SHP = :FIG_SHP AND A.ACT_COD = :ACT_COD AND WRK_PNT = :WRK_PNT )
    WHEN MATCHED THEN
    UPDATE
    SET
    A.UP_DAT  = TO_CHAR(SYSDATE, 'YYYYMMDD'),
    A.UP_USR  = :IN_USR
    WHEN NOT MATCHED THEN
    INSERT (FIG_NO
    ,CASE_NO
    ,FIG_SHP
    ,ACT_COD
    ,WRK_PNT
    ,SHP_COD
    ,STD_OST
    ,PNT_OST
    ,ST_FI_GBN
    ,RMK
    ,USE_YN
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (:FIG_NO
    ,:CASE_NO
    ,:FIG_SHP
    ,:ACT_COD
    ,:WRK_PNT
    ,:SHP_COD
    ,:STD_OST
    ,:PNT_OST
    ,:ST_FI_GBN
    ,:RMK
    ,:USE_YN
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR)
  </INSERT_TSFN105_MODEL>
  
  <UPDATE_TSFN105>
    -- UPDATE_TSFN105
    UPDATE TSFN105 SET
    SHP_COD = :SHP_COD
    ,STD_OST = :STD_OST
    ,PNT_OST = :PNT_OST
    ,ST_FI_GBN = :ST_FI_GBN
    ,RMK = :RMK
    ,USE_YN = :USE_YN
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND ACT_COD = :ACT_COD
    AND WRK_PNT = :WRK_PNT
  </UPDATE_TSFN105>
  
  <!-- 모델선인 경우 -->
  <UPDATE_TSFN105_MODEL>
    UPDATE TSMG_TSFN105 SET
           SHP_COD = :SHP_COD
           ,STD_OST = :STD_OST
           ,PNT_OST = :PNT_OST
           ,ST_FI_GBN = :ST_FI_GBN
           ,RMK = :RMK
           ,USE_YN = :USE_YN
           ,IP = :IP
           ,PID = :PID
           ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
           ,UP_USR = :UP_USR
     WHERE FIG_NO  = :FIG_NO
       AND CASE_NO = :CASE_NO
       AND FIG_SHP = :FIG_SHP
       AND ACT_COD = :ACT_COD
       AND WRK_PNT = :WRK_PNT
  </UPDATE_TSFN105_MODEL>
  <DELETE_TSFN105>
    -- DELETE_TSFN105
    DELETE TSFN105
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND ACT_COD = :ACT_COD
    AND WRK_PNT = :WRK_PNT
  </DELETE_TSFN105>
  
  <!-- 모델선인 경우 -->
  <DELETE_TSFN105_MODEL>
    DELETE TSMG_TSFN105
     WHERE FIG_NO  = :FIG_NO
       AND CASE_NO = :CASE_NO
       AND FIG_SHP = :FIG_SHP
       AND ACT_COD = :ACT_COD
       AND WRK_PNT = :WRK_PNT
  </DELETE_TSFN105_MODEL>
  <!--TSFN105 END-->

  <TSXA002_SELECT_GC>
    --TSXA002_SELECT_GC
    SELECT STD_COD_DET AS DCK_COD,
    (STD_DES_SHO || '(' || STD_COD_DET || ')') AS DCK_DES
    FROM TSXA002
    WHERE STD_COD = 'PS103'
    AND STD_DES_LON IN ('1', '2', '3', 'A', 'Q')
    ORDER BY STD_COD_DET
  </TSXA002_SELECT_GC>


  <TSEE015_DPT_SELECT_GC>
    --TSEE015_DPT_SELECT_GC
    SELECT FC_GET_STD_DES_SHO('SPS02', A.DPT_COD, 'A') AS DPT_NM, A.DPT_COD
    FROM TSEE015 A
    WHERE a.STG_LEV = '1'
    AND a.WRK_STG = 'N'
    AND a.WRK_TYP = '41'
    ORDER BY FC_GET_STD_DES_SHO('SPS02', A.DPT_COD, 'A')
  </TSEE015_DPT_SELECT_GC>

  <TSAC003_SELECT_GC>
    --TSAC003_SELECT_GC
    (
    SELECT 0 AS VIEW_SEQ ,'진행선표' FIG_NO, '' FIG_DES, '' CRE_GBN
    FROM DUAL
    UNION ALL
    SELECT 1 AS VIEW_SEQ, FIG_NO, FIG_DES, CRE_GBN
    FROM TSAC003
    WHERE PRJ_GBN = 'C000'
    AND CRE_GBN = '2'
    )
    ORDER BY VIEW_SEQ, FIG_NO
  </TSAC003_SELECT_GC>

  <TSEA002_SELECT_PE_AREA_SCHEDULE_PP>
    --TSEA002_SELECT_REPORTMAN_PP 
    SELECT *
    FROM (
    SELECT A.SHP_COD,
    A.FIG_SHP,
    (SELECT SHP_KND FROM  TSAD001 WHERE FIG_NO = :FIG_NO AND FIG_SHP = A.FIG_SHP) AS SHP_KND,
    (SELECT SHP_TYP_NM FROM TSAD001 WHERE FIG_NO = :FIG_NO AND FIG_SHP = A.FIG_SHP) AS SHP_TYP_NM,
    (SELECT KL FROM  TSAD001 WHERE FIG_NO = :FIG_NO AND FIG_SHP = A.FIG_SHP) AS KL,
    A.MIS_COD,
    A.ACT_COD,
    A.ITM_COD,
    A.DPT_COD,
    DECODE(A.WRK_STG,
    'N',  
    TO_CHAR(TO_DATE(A.PLN_ST, 'YYYYMMDD') - 1, 'YYYYMMDD'),
    A.PLN_ST) AS PLN_ST,
    DECODE(A.WRK_STG,
    'L',
    TO_CHAR(TO_DATE((SELECT MAX(PLN_ST) 
    FROM TSEG005 AA
    WHERE AA.FIG_NO = :FIG_NO AND WRK_STG = 'N'
    AND WRK_TYP = '41'
    AND JOO_YN = 'X'
    AND AA.FIG_SHP = A.FIG_SHP
    AND AA.MIS_COD = A.MIS_COD),
    'YYYYMMDD') - 1,'YYYYMMDD'),
    'N',
    TO_CHAR(TO_DATE((SELECT MAX(PLN_ST)
    FROM TSEG005 AA
    WHERE AA.FIG_NO = :FIG_NO AND WRK_STG = 'N'
    AND WRK_TYP = '41'
    AND JOO_YN = 'X'
    AND AA.FIG_SHP = A.FIG_SHP
    AND AA.MIS_COD = A.MIS_COD),
    'YYYYMMDD') - 1,
    'YYYYMMDD'),pln_fi) AS PLN_FI,
    (SELECT MAX(PLN_ST)
    FROM TSEG005 AA
    WHERE AA.FIG_NO = :FIG_NO AND WRK_STG = 'N'
    AND WRK_TYP = '41'
    AND JOO_YN = 'X'
    AND AA.FIG_SHP = A.FIG_SHP
    AND AA.MIS_COD = A.MIS_COD) AS N_PLN_ST,
    (SELECT MAX(itm_cod)
    FROM TSEG005 AA
    WHERE AA.FIG_NO = :FIG_NO AND WRK_STG = 'N'
    AND WRK_TYP = '41'
    AND JOO_YN = 'X'
    AND AA.FIG_SHP = A.FIG_SHP
    AND AA.MIS_COD = A.MIS_COD) AS N_itm_cod,
    A.MUL_WGT,
    CASE
    WHEN A.MUL_WGT &gt; 380 THEN
    '병렬'
    ELSE
    ''
    END PE_TYPE,
    A.DCK_COD,
    A.WRK_STG,
    A.WRK_TYP,
    ROUND((CASE
    WHEN B.BLK_LEN_BD &gt; 0 THEN
    B.BLK_LEN_BD
    ELSE
    NVL(B.BLK_LEN, DECODE(SUBSTR(B.BLK_LST, 0, 1), 'C', 0, 15))
    END) * (CASE
    WHEN B.BLK_WID_BD &gt; 0 THEN
    B.BLK_WID_BD
    ELSE
    NVL(B.BLK_WID, DECODE(SUBSTR(B.BLK_LST, 0, 1), 'C', 0, 15))
    END),
    1) AS AREA,
    B.BLK_LST,
    (CASE
    WHEN B.BLK_LEN_BD &gt; 0 THEN
    B.BLK_LEN_BD
    ELSE
    NVL(B.BLK_LEN, DECODE(SUBSTR(B.BLK_LST, 0, 1), 'C', 0, 15))
    END) GARO,
    (CASE
    WHEN B.BLK_WID_BD &gt; 0 THEN
    B.BLK_WID_BD
    ELSE
    NVL(B.BLK_WID, DECODE(SUBSTR(B.BLK_LST, 0, 1), 'C', 0, 15))
    END) SERO,
    B.PE_AREA
    FROM TSEG005 A, TSEG008 B
    WHERE A.FIG_NO = :FIG_NO
    AND A.FIG_NO = B.FIG_NO
    AND A.FIG_SHP = B.FIG_SHP
    AND A.MIS_COD = B.MIS_COD
    AND A.ITM_COD = B.ITM_COD
    AND ((A.WRK_STG = 'G' OR A.WRK_STG = 'K' OR A.WRK_STG = 'L') AND
    (DCK_COD IN (:DCK_COD) AND A.WRK_TYP = '41' AND
    A.JOO_YN = 'X') OR
    ((A.ITM_COD LIKE '%0' OR A.ITM_COD LIKE '%1' OR A.ITM_COD LIKE '%2') AND
    DCK_COD IN (:DCK_COD) AND A.WRK_STG = 'N' AND
    A.WRK_TYP = '41' AND A.JOO_YN = 'X') OR
    ((A.ITM_COD LIKE 'H%' OR A.ITM_COD LIKE 'M%') AND
    A.DPT_COD = 'C81000' AND A.WRK_STG = 'N' AND A.WRK_TYP = '41' AND
    A.JOO_YN = 'X'))
    AND ((A.PLN_ST BETWEEN :PLN_ST AND :PLN_FI) OR (A.PLN_FI BETWEEN :PLN_ST AND :PLN_FI))
    AND (A.WRK_STG &lt;&gt; 'K' OR  SUBSTR(B.BLK_LST, 0,1) &lt;&gt; 'D')
    -- AND A.FIG_SHP = '2680'
    -- AND A.MIS_COD = '4060'
    and a.dpt_cod = :DPT_COD
    ORDER BY A.FIG_SHP, A.MIS_COD
    )
    WHERE
    ((PLN_ST BETWEEN :PLN_ST AND :PLN_FI) OR
    (PLN_FI BETWEEN :PLN_ST AND :PLN_FI))
    ORDER BY FIG_SHP, MIS_COD
    --SELECT *
    --FROM ( SELECT A.SHP_COD,
    --A.FIG_SHP,
    --(SELECT SHP_KND FROM TSAD001 WHERE FIG_NO = :FIG_NO AND FIG_SHP = A.FIG_SHP) AS SHP_KND,
    --(SELECT SHP_TYP_NM FROM TSAD001 WHERE FIG_NO = :FIG_NO AND FIG_SHP = A.FIG_SHP) AS SHP_TYP_NM,
    --(SELECT KL FROM TSAD001 WHERE FIG_NO = :FIG_NO AND FIG_SHP = A.FIG_SHP) AS KL,
    --A.MIS_COD,
    --A.ACT_COD,
    --A.ITM_COD,
    --A.DPT_COD,
    --DECODE (A.WRK_STG, 'N', TO_CHAR (TO_DATE (A.PLN_ST, 'YYYYMMDD') - 1, 'YYYYMMDD'), A.PLN_ST) AS PLN_ST,
    --DECODE (A.WRK_STG, 'L', TO_CHAR (TO_DATE ((SELECT PLN_ST
    --FROM TSEG005
    --WHERE FIG_NO = :FIG_NO
    --AND WRK_STG = 'N'
    --AND WRK_TYP = '41'
    --AND JOO_YN = 'X'
    --AND FIG_SHP = A.FIG_SHP
    --AND MIS_COD = A.MIS_COD
    --AND (FIG_NO != '18M03-N21' AND FIG_SHP != '3095' AND ITM_COD != 'E33C0')
    --), 'YYYYMMDD') - 1, 'YYYYMMDD')
    --, 'N', TO_CHAR (TO_DATE ((SELECT PLN_ST
    --FROM TSEG005
    --WHERE FIG_NO = :FIG_NO
    --AND WRK_STG = 'N'
    --AND WRK_TYP = '41'
    --AND JOO_YN = 'X'
    --AND FIG_SHP = A.FIG_SHP
    --AND MIS_COD = A.MIS_COD
    --AND (FIG_NO != '18M03-N21' AND FIG_SHP != '3095' AND ITM_COD != 'E33C0')
    --), 'YYYYMMDD') - 1, 'YYYYMMDD')
    --, PLN_FI) AS PLN_FI,
    --(SELECT PLN_ST
    --FROM TSEG005
    --WHERE FIG_NO = :FIG_NO
    --AND WRK_STG = 'N'
    --AND WRK_TYP = '41'
    --AND JOO_YN = 'X'
    --AND FIG_SHP = A.FIG_SHP
    --AND MIS_COD = A.MIS_COD
    --AND (FIG_NO != '18M03-N21' AND FIG_SHP != '3095' AND ITM_COD != 'E33C0')) AS N_PLN_ST,
    --(SELECT ITM_COD
    --FROM TSEG005
    --WHERE FIG_NO = :FIG_NO
    --AND WRK_STG = 'N'
    --AND WRK_TYP = '41'
    --AND JOO_YN = 'X'
    --AND FIG_SHP = A.FIG_SHP
    --AND MIS_COD = A.MIS_COD
    --AND (FIG_NO != '18M03-N21' AND FIG_SHP != '3095' AND ITM_COD != 'E33C0')) AS N_ITM_COD,
    --A.MUL_WGT,
    --CASE WHEN A.MUL_WGT &gt; 380 THEN '병렬' ELSE '' END PE_TYPE,
    --A.DCK_COD,
    --A.WRK_STG,
    --A.WRK_TYP,
    --ROUND ( (CASE WHEN B.BLK_LEN_BD &gt; 0
    --THEN B.BLK_LEN_BD
    --ELSE NVL(B.BLK_LEN, DECODE (SUBSTR (B.BLK_LST, 0, 1), 'C', 0, 15))
    --END)
    --* (CASE WHEN B.BLK_WID_BD &gt; 0
    --THEN B.BLK_WID_BD
    --ELSE NVL(B.BLK_WID, DECODE (SUBSTR (B.BLK_LST, 0, 1), 'C', 0, 15))
    --END), 1) AS AREA,
    --B.BLK_LST,
    --(CASE WHEN B.BLK_LEN_BD &gt; 0
    --THEN B.BLK_LEN_BD
    --ELSE NVL (B.BLK_LEN, DECODE (SUBSTR (B.BLK_LST, 0, 1), 'C', 0, 15))
    --END) AS GARO,
    --(CASE WHEN B.BLK_WID_BD &gt; 0
    --THEN B.BLK_WID_BD
    --ELSE NVL(B.BLK_WID, DECODE (SUBSTR (B.BLK_LST, 0, 1), 'C', 0, 15))
    --END) AS SERO,
    --B.PE_AREA
    --FROM TSEG005 A, TSEG008 B
    --WHERE A.FIG_NO = :FIG_NO
    --AND A.FIG_NO = B.FIG_NO
    --AND A.FIG_SHP = B.FIG_SHP
    --AND A.MIS_COD = B.MIS_COD
    --AND A.ITM_COD = B.ITM_COD
    --AND (   (  A.WRK_STG = 'G'
    --OR A.WRK_STG = 'K'
    --OR A.WRK_STG = 'L')
    --AND (   DCK_COD IN (:DCK_COD)
    --AND A.WRK_TYP = '41'
    --AND A.JOO_YN = 'X')
    --OR  (  (  A.ITM_COD LIKE '%0'
    --OR A.ITM_COD LIKE '%1'
    --OR A.ITM_COD LIKE '%2')
    --AND DCK_COD IN ( :DCK_COD)
    --AND A.WRK_STG = 'N'
    --AND A.WRK_TYP = '41'
    --AND A.JOO_YN = 'X')
    --OR  (   (A.ITM_COD LIKE 'H%' OR A.ITM_COD LIKE 'M%')
    --AND A.DPT_COD = 'C81000'
    --AND A.WRK_STG = 'N'
    --AND A.WRK_TYP = '41'
    --AND A.JOO_YN = 'X'))
    --AND (  (A.PLN_ST BETWEEN :PLN_ST AND :PLN_FI)
    --OR (A.PLN_FI BETWEEN :PLN_ST AND :PLN_FI))
    --AND (A.WRK_STG &lt;&gt; 'K' OR SUBSTR (B.BLK_LST, 0, 1) &lt;&gt; 'D')
    ---- AND A.FIG_SHP = '2680'
    ---- AND A.MIS_COD = '4060'
    --AND a.dpt_cod = :DPT_COD
    --ORDER BY A.FIG_SHP, A.MIS_COD)
    --WHERE (  (PLN_ST BETWEEN :PLN_ST AND :PLN_FI)
    --OR (PLN_FI BETWEEN :PLN_ST AND :PLN_FI))
    --ORDER BY FIG_SHP, MIS_COD
  </TSEA002_SELECT_PE_AREA_SCHEDULE_PP>

  <TSEA002_SELECT_PE_AREA_SCHEDULE>
    --TSEA002_SELECT_PE_AREA_SCHEDULE
    SELECT *
    FROM (
    SELECT A.SHP_COD,
    A.FIG_SHP,
    (SELECT SHP_KND FROM  TSAA002 WHERE FIG_SHP = A.FIG_SHP) AS SHP_KND,
    (SELECT SHP_TYP_NM FROM  TSAA002 WHERE FIG_SHP = A.FIG_SHP) AS SHP_TYP_NM,
    (SELECT KL FROM  TSAA002 WHERE FIG_SHP = A.FIG_SHP) AS KL,
    A.MIS_COD,
    A.ACT_COD,
    A.ITM_COD,
    A.DPT_COD,
    DECODE(A.WRK_STG,
    'N',
    TO_CHAR(TO_DATE(A.PLN_ST, 'YYYYMMDD') - 1, 'YYYYMMDD'),
    A.PLN_ST) AS PLN_ST,
    DECODE(A.WRK_STG,
    'L',
    TO_CHAR(TO_DATE((SELECT PLN_ST
    FROM TSEA002 AA
    WHERE WRK_STG = 'N'
    AND WRK_TYP = '41'
    AND JOO_YN = 'X'
    AND AA.FIG_SHP = A.FIG_SHP
    AND AA.MIS_COD = A.MIS_COD),
    'YYYYMMDD') - 1,'YYYYMMDD'),
    'N',
    TO_CHAR(TO_DATE((SELECT PLN_ST
    FROM TSEA002 AA
    WHERE WRK_STG = 'N'
    AND WRK_TYP = '41'
    AND JOO_YN = 'X'
    AND AA.FIG_SHP = A.FIG_SHP
    AND AA.MIS_COD = A.MIS_COD),
    'YYYYMMDD') - 1,
    'YYYYMMDD'),pln_fi) AS PLN_FI,
    (SELECT PLN_ST
    FROM TSEA002 AA
    WHERE WRK_STG = 'N'
    AND WRK_TYP = '41'
    AND JOO_YN = 'X'
    AND AA.FIG_SHP = A.FIG_SHP
    AND AA.MIS_COD = A.MIS_COD) AS N_PLN_ST,
    (SELECT itm_cod
    FROM TSEA002 AA
    WHERE WRK_STG = 'N'
    AND WRK_TYP = '41'
    AND JOO_YN = 'X'
    AND AA.FIG_SHP = A.FIG_SHP
    AND AA.MIS_COD = A.MIS_COD) AS N_itm_cod,
    A.MUL_WGT,
    CASE
    WHEN A.MUL_WGT &gt; 380 THEN
    '병렬'
    ELSE
    ''
    END PE_TYPE,
    A.DCK_COD,
    A.WRK_STG,
    A.WRK_TYP,
    ROUND((CASE
    WHEN B.BLK_LEN_BD &gt; 0 THEN
    B.BLK_LEN_BD
    ELSE
    NVL(B.BLK_LEN, DECODE(SUBSTR(B.BLK_LST, 0, 1), 'C', 0, 15))
    END) * (CASE
    WHEN B.BLK_WID_BD &gt; 0 THEN
    B.BLK_WID_BD
    ELSE
    NVL(B.BLK_WID, DECODE(SUBSTR(B.BLK_LST, 0, 1), 'C', 0, 15))
    END),
    1) AS AREA,
    B.BLK_LST,
    (CASE
    WHEN B.BLK_LEN_BD &gt; 0 THEN
    B.BLK_LEN_BD
    ELSE
    NVL(B.BLK_LEN, DECODE(SUBSTR(B.BLK_LST, 0, 1), 'C', 0, 15))
    END) GARO,
    (CASE
    WHEN B.BLK_WID_BD &gt; 0 THEN
    B.BLK_WID_BD
    ELSE
    NVL(B.BLK_WID, DECODE(SUBSTR(B.BLK_LST, 0, 1), 'C', 0, 15))
    END) SERO,
    B.PE_AREA
    FROM TSEA002 A, TSED002 B
    WHERE A.FIG_SHP = B.FIG_SHP
    AND A.MIS_COD = B.MIS_COD
    AND A.ITM_COD = B.ITM_COD
    AND ((A.WRK_STG = 'G' OR A.WRK_STG = 'K' OR A.WRK_STG = 'L') AND
    (DCK_COD IN (:DCK_COD) AND A.WRK_TYP = '41' AND
    A.JOO_YN = 'X') OR
    ((A.ITM_COD LIKE '%0' OR A.ITM_COD LIKE '%1' OR A.ITM_COD LIKE '%2') AND
    DCK_COD IN (:DCK_COD) AND A.WRK_STG = 'N' AND
    A.WRK_TYP = '41' AND A.JOO_YN = 'X') OR
    ((A.ITM_COD LIKE 'H%' OR A.ITM_COD LIKE 'M%') AND
    A.DPT_COD = 'C81000' AND A.WRK_STG = 'N' AND A.WRK_TYP = '41' AND
    A.JOO_YN = 'X'))
    AND ((A.PLN_ST BETWEEN :PLN_ST AND :PLN_FI) OR (A.PLN_FI BETWEEN :PLN_ST AND :PLN_FI))
    AND (A.WRK_STG &lt;&gt; 'K' OR  SUBSTR(B.BLK_LST, 0,1) &lt;&gt; 'D')
    -- AND A.FIG_SHP = '2680'
    -- AND A.MIS_COD = '4060'
    and a.dpt_cod = :DPT_COD
    ORDER BY A.FIG_SHP, A.MIS_COD
    )
    WHERE
    ((PLN_ST BETWEEN :PLN_ST AND :PLN_FI) OR
    (PLN_FI BETWEEN :PLN_ST AND :PLN_FI))
    ORDER BY FIG_SHP, MIS_COD
  </TSEA002_SELECT_PE_AREA_SCHEDULE>

  <!--TSFZ003 BEGIN-->
  <TSFZ003_PSPID_SELECT>
    --TSFZ003_PSPID_SELECT
    SELECT *
    FROM TSFZ003
    WHERE
    PSPID = :PSPID
    ORDER BY IF_ID DESC
  </TSFZ003_PSPID_SELECT>
  <TSFZ003_PSPID_IF_ID_SELECT>
    -- TSFZ003_PSPID_IF_ID_SELECT
    SELECT
    PSPID
    ,IF_ID
    ,CRE_DTE
    ,JOBNAME
    ,JOBCOUNT
    ,ACT_CNT
    ,IF_DES
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFZ003
    WHERE
    PSPID = :PSPID
    AND IF_ID = :IF_ID
  </TSFZ003_PSPID_IF_ID_SELECT>
  <INSERT_TSFZ003>
    -- INSERT_TSFZ003
    INSERT INTO TSFZ003 (
    PSPID
    ,IF_ID
    ,JOBNAME
    ,JOBCOUNT
    ,CRE_DTE
    ,ACT_CNT
    ,IF_DES
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :PSPID
    ,:IF_ID
    ,:JOBNAME
    ,:JOBCOUNT
    ,:CRE_DTE
    ,:ACT_CNT
    ,:IF_DES
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFZ003>
  <TSFZ003_DISTINCT_IF_ID_SELECT>
    SELECT IF_ID
    FROM (
    SELECT
    DISTINCT IF_ID
    FROM
    TSFZ003
    WHERE PSPID = :PSPID)
    ORDER BY IF_ID DESC
  </TSFZ003_DISTINCT_IF_ID_SELECT>
  <TSFZ003_JOBCOUNT_SELECT>
    --TSFZ003_JOBCOUNT_SELECT
    SELECT *
    FROM
    TSFZ003
    WHERE PSPID = :PSPID AND IF_ID = :IF_ID
    ORDER BY JOBCOUNT
  </TSFZ003_JOBCOUNT_SELECT>
  <TSFZ003_DISTINCT_JOBCOUNT_SELECT>
    --TSFZ003_DISTINCT_JOBCOUNT_SELECT
    SELECT '' JOBCOUNT
    FROM DUAL
    UNION
    SELECT JOBCOUNT
    FROM
    TSFZ003
    WHERE PSPID = :PSPID AND JOBNAME = :JOBNAME
    ORDER BY JOBCOUNT
  </TSFZ003_DISTINCT_JOBCOUNT_SELECT>
  <UPDATE_TSFZ003 />
  <DELETE_TSFZ003 />
  <!--TSFZ003 END-->




  <!--TSFN006 BEGIN-->
  <TSFN006_MODEL_NO_SELECT>
    -- TSFN006_MODEL_NO_SELECT
    SELECT
    MODEL_NO
    ,SHP_KND
    ,SHP_TYP
    ,DCK_COD
    ,MIS_COD
    ,ITM_COD
    ,BLK_LST
    ,DUR_91
    ,DUR_4A
    ,DUR_4B
    ,OST_91
    ,OST_4A
    ,OST_4B
    ,RMK
    ,USE_YN
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN006
    WHERE
    MODEL_NO = :MODEL_NO
  </TSFN006_MODEL_NO_SELECT>

  <TSFN006_SHP_TYP_DCK_COD_SELECT>
    --TSFN006_SHP_TYP_DCK_COD_SELECT
    SELECT  MODEL_NO
    ,       SHP_KND
    ,       SHP_TYP
    ,       DCK_COD
    ,       MIS_COD
    ,       ITM_COD
    ,       BLK_LST
    ,       DUR_91
    ,       DUR_4A
    ,       DUR_4B
    ,       OST_91
    ,       OST_4A
    ,       OST_4B
    ,       RMK
    ,       USE_YN
    ,       IP
    ,       PID
    ,       IN_DAT
    ,       UP_DAT
    ,       IN_USR
    ,       UP_USR
    FROM    TSFN006
    WHERE   SHP_TYP = :SHP_TYP
    AND     DCK_COD = :DCK_COD
  </TSFN006_SHP_TYP_DCK_COD_SELECT>

  <INSERT_TSFN006>
    -- INSERT_TSFN006
    INSERT INTO TSFN006 (
    MODEL_NO
    ,SHP_KND
    ,SHP_TYP
    ,DCK_COD
    ,MIS_COD
    ,ITM_COD
    ,BLK_LST
    ,DUR_91
    ,DUR_4A

    ,DUR_4B
    ,OST_91
    ,OST_4A
    ,OST_4B
    ,RMK
    ,USE_YN
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :MODEL_NO
    ,:SHP_KND
    ,:SHP_TYP
    ,:DCK_COD
    ,:MIS_COD
    ,:ITM_COD
    ,:BLK_LST
    ,:DUR_91
    ,:DUR_4A
    ,:DUR_4B
    ,:OST_91
    ,:OST_4A
    ,:OST_4B
    ,:RMK
    ,:USE_YN
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN006>
  <UPDATE_TSFN006>
    -- UPDATE_TSFN006
    UPDATE TSFN006 SET
    SHP_KND = :SHP_KND
    ,SHP_TYP = :SHP_TYP
    ,DCK_COD = :DCK_COD
    ,ITM_COD = :ITM_COD
    ,BLK_LST = :BLK_LST
    ,DUR_91 = :DUR_91
    ,DUR_4A = :DUR_4A
    ,DUR_4B = :DUR_4B
    ,OST_91 = :OST_91
    ,OST_4A = :OST_4A
    ,OST_4B = :OST_4B
    ,RMK = :RMK
    ,USE_YN = :USE_YN
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    MODEL_NO = :MODEL_NO
    AND MIS_COD = :MIS_COD

  </UPDATE_TSFN006>
  <DELETE_TSFN006>
    -- DELETE_TSFN006
    DELETE TSFN006
    WHERE
    MODEL_NO = :MODEL_NO
    AND MIS_COD = :MIS_COD
  </DELETE_TSFN006>

  <TSFN006_STD_ACT_SHP_TYP_DCK_COD_MAP_SELECT>
    -- TSFN006_STD_ACT_SHP_TYP_DCK_COD_MAP_SELECT
    SELECT DISTINCT SUBSTR(A.STD_COD_DET, 1, 2) SHP_KND, A.STD_COD_DET SHP_TYP, A.STD_DES_SHO SHP_TYP_DES, B.DCK_COD
    FROM TSXA002 A, TSFN006 B
    WHERE A.STD_COD = 'PS102'
    AND A.STD_COD_DET = B.SHP_TYP(+)
    ORDER BY A.STD_COD_DET, B.DCK_COD
  </TSFN006_STD_ACT_SHP_TYP_DCK_COD_MAP_SELECT>
  <TSFN006_STD_ACT_SHP_TYP_DCK_COD_MAP_BY_DIV_COD_SELECT>
    -- TSFN002_STD_ACT_SHP_TYP_DCK_COD_MAP_BY_DIV_COD_SELECT
    SELECT DISTINCT SUBSTR(A.STD_COD_DET, 1, 2) SHP_KND, A.STD_COD_DET SHP_TYP, A.SHP_DES_SHO SHP_TYP_DES, B.DCK_COD
    FROM TSXA002 A, TSFN006 B
    WHERE A.STD_COD = 'PS102'
    AND A.STD_COD_DET = B.SHP_TYP(+)
    AND :DIV_COD = B.DIV_COD(+)
    ORDER BY A.STD_COD_DET, B.DCK_COD
  </TSFN006_STD_ACT_SHP_TYP_DCK_COD_MAP_BY_DIV_COD_SELECT>

  <TSFN006_DISTINCT_SHP_TYP_SELECT>
    --TSFN006_DISTINCT_SHP_TYP_SELECT
    SELECT X.*, FC_GET_STD_DES_SHO('PS102', X.SHP_TYP, 'C000') SHP_TYP_DES
    , X.SHP_TYP || '  ' || FC_GET_STD_DES_SHO('PS102', X.SHP_TYP, 'C000') SHP_TYP_DES_LON
    FROM (
    SELECT DISTINCT SHP_TYP SHP_TYP
    FROM TSFN006
    WHERE SHP_TYP LIKE ':WHERE_SHP_KND%' ) X
  </TSFN006_DISTINCT_SHP_TYP_SELECT>
  <TSFN006_DISTINCT_MODEL_NO_SELECT>
    --TSFN006_DISTINCT_MODEL_NO_SELECT
    SELECT DISTINCT MODEL_NO MODEL_NO
    FROM TSFN006
    WHERE SHP_TYP = :SHP_TYP
  </TSFN006_DISTINCT_MODEL_NO_SELECT>


  <!--TSFN006 END-->

  <!--TSFN007 BEGIN-->
  <TSFN007_SHP_KND_SHP_TYP_SELECT>
    -- TSFN007_SHP_KND_SHP_TYP_SELECT
    SELECT
    SHP_KND
    ,SHP_TYP
    ,SEQ
    ,BUF_TYP
    ,BUF_WRK_STG_TYP
    ,BUF_DUR
    ,BUF_DES
    ,AFT_ACT_COD
    ,AFT_ACT_DES
    ,RMK
    ,USE_YN
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN007
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
  </TSFN007_SHP_KND_SHP_TYP_SELECT>
  <TSFN007_COMMON_SHP_KND_SHP_TYP_SELECT>
    -- TSFN007_COMMON_SHP_KND_SHP_TYP_SELECT
    -- 버퍼 기준정보, 공통항목 포함
    SELECT
    SHP_KND
    ,SHP_TYP
    ,SEQ
    ,BUF_TYP
    ,BUF_WRK_STG_TYP
    ,BUF_DUR
    ,BUF_DES
    ,AFT_ACT_COD
    ,AFT_ACT_DES
    ,RMK
    ,USE_YN
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN007
    WHERE
    (SHP_KND = :SHP_KND OR SHP_KND = '*')
    AND SHP_TYP = :SHP_TYP
  </TSFN007_COMMON_SHP_KND_SHP_TYP_SELECT>
  <INSERT_TSFN007>
    -- INSERT_TSFN007
    INSERT INTO TSFN007 (
    SHP_KND
    ,SHP_TYP
    ,SEQ
    ,BUF_TYP
    ,BUF_WRK_STG_TYP
    ,BUF_DUR
    ,BUF_DES
    ,AFT_ACT_COD
    ,AFT_ACT_DES
    ,RMK
    ,USE_YN
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :SHP_KND
    ,:SHP_TYP
    ,:SEQ
    ,:BUF_TYP
    ,:BUF_WRK_STG_TYP
    ,:BUF_DUR
    ,:BUF_DES
    ,:AFT_ACT_COD
    ,:AFT_ACT_DES
    ,:RMK
    ,:USE_YN
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN007>
  <UPDATE_TSFN007>
    -- UPDATE_TSFN007
    UPDATE TSFN007 SET
    BUF_TYP = :BUF_TYP
    ,BUF_WRK_STG_TYP = :BUF_WRK_STG_TYP
    ,BUF_DUR = :BUF_DUR
    ,BUF_DES = :BUF_DES
    ,AFT_ACT_COD = :AFT_ACT_COD
    ,AFT_ACT_DES = :AFT_ACT_DES
    ,RMK = :RMK
    ,USE_YN = :USE_YN
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    AND SEQ = :SEQ
  </UPDATE_TSFN007>
  <DELETE_TSFN007>
    -- DELETE_TSFN007
    DELETE TSFN007
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    AND SEQ = :SEQ
  </DELETE_TSFN007>
  <!--TSFN007 END-->

  <!--TSFN416 BEGIN-->
  <TSFN416_SHP_KND_SHP_TYP_SELECT>
    -- TSFN416_SHP_KND_SHP_TYP_SELECT
    SELECT
    SHP_KND
    ,SHP_TYP
    ,ACT_COD
    ,ACT_DES
    ,ITM_COD
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,ACT_TYP
    ,GRP_ACT_COD
    ,ZORDER_LST
    ,RMK
    ,USE_YN
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN416
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
  </TSFN416_SHP_KND_SHP_TYP_SELECT>
  <INSERT_TSFN416>
    -- INSERT_TSFN416
    INSERT INTO TSFN416 (
    SHP_KND
    ,SHP_TYP
    ,ACT_COD
    ,ACT_DES
    ,ITM_COD
    ,WRK_STG
    ,WRK_TYP
    ,WRK_TYP2
    ,ACT_TYP
    ,GRP_ACT_COD
    ,ZORDER_LST
    ,RMK
    ,USE_YN
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :SHP_KND
    ,:SHP_TYP
    ,:ACT_COD
    ,:ACT_DES
    ,:ITM_COD
    ,:WRK_STG
    ,:WRK_TYP
    ,:WRK_TYP2
    ,:ACT_TYP
    ,:GRP_ACT_COD
    ,:ZORDER_LST
    ,:RMK
    ,:USE_YN
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN416>
  <UPDATE_TSFN416>
    -- UPDATE_TSFN416
    UPDATE TSFN416 SET
    ACT_DES = :ACT_DES
    ,ITM_COD = :ITM_COD
    ,WRK_STG = :WRK_STG
    ,WRK_TYP = :WRK_TYP
    ,WRK_TYP2 = :WRK_TYP2
    ,ACT_TYP = :ACT_TYP
    ,GRP_ACT_COD = :GRP_ACT_COD
    ,ZORDER_LST = :ZORDER_LST
    ,RMK = :RMK
    ,USE_YN = :USE_YN
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    AND ACT_COD = :ACT_COD
  </UPDATE_TSFN416>
  <DELETE_TSFN416>
    -- DELETE_TSFN416
    DELETE TSFN416
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    AND ACT_COD = :ACT_COD
  </DELETE_TSFN416>
  <!--TSFN416 END-->



  <!--TSFN201 BEGIN-->
  <TSFN201_SHP_KND_SHP_TYP_DCK_COD_SELECT>
    -- TSFN201_SHP_KND_SHP_TYP_DCK_COD_SELECT
    SELECT
    *
    FROM
    TSFN201
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    AND DCK_COD = :DCK_COD
  </TSFN201_SHP_KND_SHP_TYP_DCK_COD_SELECT>
  <INSERT_TSFN201>
    -- INSERT_TSFN201
    INSERT INTO TSFN201 (
    CASE_NO
    ,FIG_SHP
    ,ITM_COD
    ,ACT_COD
    ,SHP_COD
    ,MIS_COD
    ,ITM_DES
    ,REP_BLK_LIST
    ,CRANE1
    ,CRANE2
    ,CRANE3
    ,CRANE1_CNT
    ,CRANE2_CNT
    ,CRANE3_CNT
    ,PLN_ST
    ,EST_ST
    ,RST_ST
    ,MUL_WGT
    ,GC_EREC_TIME
    ,GC_PE_TIME
    ,TRANS_PE_TIME
    ,ETC_SUPP_TIME
    ,DUAL_YN
    ,DUAL_WEIGHT
    ,DUAL_FACTOR
    ,USE_YN
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    ,FIG_NO
    ,SHP_REV
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:ITM_COD
    ,:ACT_COD
    ,:SHP_COD
    ,:MIS_COD
    ,:ITM_DES
    ,:REP_BLK_LIST
    ,:CRANE1
    ,:CRANE2
    ,:CRANE3
    ,:CRANE1_CNT
    ,:CRANE2_CNT
    ,:CRANE3_CNT
    ,:PLN_ST
    ,:EST_ST
    ,:RST_ST
    ,:MUL_WGT
    ,:GC_EREC_TIME
    ,:GC_PE_TIME
    ,:TRANS_PE_TIME
    ,:ETC_SUPP_TIME
    ,:DUAL_YN
    ,:DUAL_WEIGHT
    ,:DUAL_FACTOR
    ,:USE_YN
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:FIG_NO
    ,:SHP_REV
    )
  </INSERT_TSFN201>
  <UPDATE_TSFN201>
    -- UPDATE_TSFN201
    UPDATE TSFN201 SET
    ACT_COD = :ACT_COD
    ,SHP_COD = :SHP_COD
    ,MIS_COD = :MIS_COD
    ,ITM_DES = :ITM_DES
    ,REP_BLK_LIST = :REP_BLK_LIST
    ,CRANE1 = :CRANE1
    ,CRANE2 = :CRANE2
    ,CRANE3 = :CRANE3
    ,CRANE1_CNT = :CRANE1_CNT
    ,CRANE2_CNT = :CRANE2_CNT
    ,CRANE3_CNT = :CRANE3_CNT
    ,PLN_ST = :PLN_ST
    ,EST_ST = :EST_ST
    ,RST_ST = :RST_ST
    ,MUL_WGT = :MUL_WGT
    ,GC_EREC_TIME = :GC_EREC_TIME
    ,GC_PE_TIME = :GC_PE_TIME
    ,TRANS_PE_TIME = :TRANS_PE_TIME
    ,ETC_SUPP_TIME = :ETC_SUPP_TIME
    ,DUAL_YN = :DUAL_YN
    ,DUAL_WEIGHT = :DUAL_WEIGHT
    ,DUAL_FACTOR = :DUAL_FACTOR
    ,USE_YN = :USE_YN
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND ITM_COD = :ITM_COD
  </UPDATE_TSFN201>
  <DELETE_TSFN201>
    -- DELETE_TSFN201
    DELETE TSFN201
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND ITM_COD = :ITM_COD
  </DELETE_TSFN201>
  <!--TSFN201 END-->

  <!--TSFN200 BEGIN-->
  <TSFN200_SHP_KND_SHP_TYP_DCK_COD_SELECT>
    -- TSFN200_SHP_KND_SHP_TYP_DCK_COD_SELECT
    SELECT
    SHP_KND
    ,SHP_TYP
    ,DCK_COD
    ,ITM_COD
    ,ITM_DES
    ,REP_BLK_LIST
    ,MUL_WGT
    ,GC_EREC_TIME
    ,GC_PE_TIME
    ,TRANS_PE_TIME
    ,DUAL_YN
    ,DUAL_WEIGHT
    ,DUAL_FACTOR
    ,ETC_SUPP_TIME
    ,USE_YN
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN200
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    AND DCK_COD = :DCK_COD
  </TSFN200_SHP_KND_SHP_TYP_DCK_COD_SELECT>
  <INSERT_TSFN200>
    -- INSERT_TSFN200
    INSERT INTO TSFN200 (
    SHP_KND
    ,SHP_TYP
    ,DCK_COD
    ,ITM_COD
    ,ITM_DES
    ,REP_BLK_LIST
    ,MUL_WGT
    ,GC_EREC_TIME
    ,GC_PE_TIME
    ,TRANS_PE_TIME
    ,DUAL_YN
    ,DUAL_WEIGHT
    ,DUAL_FACTOR
    ,ETC_SUPP_TIME
    ,USE_YN
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :SHP_KND
    ,NVL(:SHP_TYP,'*')
    ,:DCK_COD
    ,:ITM_COD
    ,:ITM_DES
    ,:REP_BLK_LIST
    ,:MUL_WGT
    ,:GC_EREC_TIME
    ,:GC_PE_TIME
    ,:TRANS_PE_TIME
    ,:DUAL_YN
    ,:DUAL_WEIGHT
    ,:DUAL_FACTOR
    ,:ETC_SUPP_TIME
    ,:USE_YN
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN200>
  <UPDATE_TSFN200>
    -- UPDATE_TSFN200
    UPDATE TSFN200 SET
    ITM_DES = :ITM_DES
    ,REP_BLK_LIST = :REP_BLK_LIST
    ,MUL_WGT = :MUL_WGT
    ,GC_EREC_TIME = :GC_EREC_TIME
    ,GC_PE_TIME = :GC_PE_TIME
    ,TRANS_PE_TIME = :TRANS_PE_TIME
    ,DUAL_YN = :DUAL_YN
    ,DUAL_WEIGHT = :DUAL_WEIGHT
    ,DUAL_FACTOR = :DUAL_FACTOR
    ,ETC_SUPP_TIME = :ETC_SUPP_TIME
    ,USE_YN = :USE_YN
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    AND DCK_COD = :DCK_COD
    AND ITM_COD = :ITM_COD
  </UPDATE_TSFN200>
  <DELETE_TSFN200>
    -- DELETE_TSFN200
    DELETE TSFN200
    WHERE
    SHP_KND = :SHP_KND
    AND SHP_TYP = :SHP_TYP
    AND DCK_COD = :DCK_COD
    AND ITM_COD = :ITM_COD
  </DELETE_TSFN200>
  <!--TSFN200 END-->

  <!--TSFN201 BEGIN-->
  <TSFN201_REPORT1>
    --TSFN201_REPORT1
    SELECT A.FIG_SHP 호선, A.ACT_COD ACT, A.MIS_COD MIS, A.ITM_COD 블록
    , A.PLN_ST 착수
    , SUBSTR(A.PLN_ST,3,2)||'.'||SUBSTR(A.PLN_ST,5,2) 착수월
    , SUBSTR(A.PLN_ST,5,2)||'.'||SUBSTR(A.PLN_ST,7,2) 착수월일
    , A.PLN_FI 완료, A.DCK_COD 도크, FC_GET_DPT_DESC(A.DPT_COD) 부서
    ,B.SHP_KND 선종, B.SHP_TYP 선형, B.DCK_COD 진수도크
    , 1 블록수, A.MUL_WGT 중량, C.GC_EREC_TIME 탑재지원시간, C.GC_PE_TIME PE지원시간, C.DUAL_YN 병렬여부
    , (NVL(C.GC_EREC_TIME,0) + NVL(C.GC_PE_TIME,0)) GC_TOT_TIME
    , C.DUAL_WEIGHT 병렬기준중량, C.DUAL_FACTOR 병렬팩터, C.REP_BLK_LIST 블록구성
    FROM TSEA002 A, TSAA002 B, TSFN201 C
    WHERE A.DPT_COD IN (:WHERE_DPT_COD) --('C71000')
    AND A.WRK_STG = 'N' AND A.WRK_TYP = '41'
    AND A.PLN_ST BETWEEN :ST_DATE AND :FI_DATE --'20190608' AND '20190908'
    AND A.FIG_SHP = B.FIG_SHP
    AND A.FIG_SHP = C.FIG_SHP
    AND A.ACT_COD = C.ACT_COD
    ORDER BY A.PLN_ST, A.ITM_COD
  </TSFN201_REPORT1>
  <TSFN201_TSEA002_CASE_NO_FIG_SHP_SELECT>
    --TSFN201_TSEA002_CASE_NO_FIG_SHP_SELECT
    SELECT :CASE_NO CASE_NO
    , A.FIG_SHP, A.ITM_COD, A.ACT_COD, A.SHP_COD, A.MIS_COD, A.ACT_DES ITM_DES
    , C.BLK_LST REP_BLK_LIST
    , B.CRANE1,B.CRANE2,B.CRANE3
    , B.CRANE1_CNT,B.CRANE2_CNT,B.CRANE3_CNT
    , A.PLN_ST MID_ST
    -- 시작일자 로직변경 19.10.30 신성훈
    --, NVL(B.PLN_ST, A.PLN_ST) PLN_ST
    , A.PLN_ST PLN_ST
    , B.EST_ST, B.RST_ST
    , C.BLK_WGT MUL_WGT
    , C.BLK_LEN, C.BLK_WID, C.BLK_HEI
    , B.GC_EREC_TIME, B.GC_PE_TIME,B.TRANS_PE_TIME, B.DUAL_YN, B.DUAL_WEIGHT, B.DUAL_FACTOR, B.ETC_SUPP_TIME, B.USE_YN
    , B.RMK, B.IP, B.PID, B.IN_DAT, B.UP_DAT, B.IN_USR, B.UP_USR
    , :FIG_NO FIG_NO
    , :SHP_REV SHP_REV
    FROM TSEA002 A, TSFN201 B, TSED002 C, TSAA002 D
    WHERE A.FIG_SHP = :FIG_SHP
    AND A.WRK_STG = 'N' AND A.WRK_TYP = '41'
    AND A.FIG_SHP = C.FIG_SHP(+)
    AND A.ITM_COD = C.ITM_COD(+)
    AND A.FIG_SHP = D.FIG_SHP
    AND :CASE_NO = B.CASE_NO(+)
    AND A.FIG_SHP = B.FIG_SHP(+)
    AND A.ACT_COD = B.ACT_COD(+)
    ORDER BY A.PLN_ST
  </TSFN201_TSEA002_CASE_NO_FIG_SHP_SELECT>
  <TSFN201_TSEA002_CASE_NO_FIG_SHP_BP_SELECT>
    --TSFN201_TSEA002_CASE_NO_FIG_SHP_BP_SELECT
    SELECT DISTINCT :CASE_NO CASE_NO
    , A.FIG_SHP, A.ITM_COD, A.ACT_COD, A.SHP_COD, A.MIS_COD, A.ACT_DES ITM_DES
    , C.BLK_LST REP_BLK_LIST
    , B.CRANE1,B.CRANE2,B.CRANE3
    , B.CRANE1_CNT,B.CRANE2_CNT,B.CRANE3_CNT
    , A.PLN_ST MID_ST
    -- 시작일자 로직변경 19.10.30 신성훈
    --, NVL(B.PLN_ST, A.PLN_ST) PLN_ST
    , A.PLN_ST PLN_ST
    , B.EST_ST, B.RST_ST
    , C.BLK_WGT MUL_WGT
    , C.BLK_LEN, C.BLK_WID, C.BLK_HEI
    , B.GC_EREC_TIME, B.GC_PE_TIME,B.TRANS_PE_TIME, B.DUAL_YN, B.DUAL_WEIGHT, B.DUAL_FACTOR, B.ETC_SUPP_TIME, B.USE_YN
    , B.RMK, B.IP, B.PID, B.IN_DAT, B.UP_DAT, B.IN_USR, B.UP_USR
    , :FIG_NO FIG_NO
    , :SHP_REV SHP_REV
    FROM TSEG005 A, TSFN201 B, TSEG008 C, TSAA002 D
    WHERE A.FIG_SHP = :FIG_SHP
    AND   A.FIG_NO = :FIG_NO
    AND A.WRK_STG = 'N' AND A.WRK_TYP = '41'
    AND A.FIG_SHP = C.FIG_SHP(+)
    AND A.ITM_COD = C.ITM_COD(+)
    AND A.FIG_NO =  C.FIG_NO(+)
    AND A.FIG_SHP = D.FIG_SHP
    AND :CASE_NO = B.CASE_NO(+)
    AND A.FIG_SHP = B.FIG_SHP(+)
    AND A.ACT_COD = B.ACT_COD(+)
    ORDER BY A.PLN_ST
  </TSFN201_TSEA002_CASE_NO_FIG_SHP_BP_SELECT>
  <TSFN201_CASE_NO_FIG_SHP_SELECT>
    --TSFN201_CASE_NO_FIG_SHP_SELECT
    SELECT * FROM TSFN201
    WHERE CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    ORDER BY ACT_COD
  </TSFN201_CASE_NO_FIG_SHP_SELECT>
  <TSFN201_CASE_NO_FIG_SHP_ACT_COD_SELECT>
    -- TSFN201_CASE_NO_FIG_SHP_ACT_COD_SELECT
    SELECT
    *
    FROM
    TSFN201
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND ACT_COD = :ACT_COD
  </TSFN201_CASE_NO_FIG_SHP_ACT_COD_SELECT>
  <!--TSFN201 END-->

  <!--TSAA002 BEGIN-->
  <TSAA002_FIG_SHP_ST_YEAR_SELECT>
    --TSAA002_FIG_SHP_ST_YEAR_SELECT
    SELECT *
    FROM TSAA002
    WHERE WC &gt;= :ST_YEAR
    ORDER BY FIG_SHP
  </TSAA002_FIG_SHP_ST_YEAR_SELECT>
  <TSAA002_FIG_SHP_SELECT>
    -- TSAA002_FIG_SHP_SELECT
    SELECT
    SHP_COD
    ,SHP_DES
    ,FIG_SHP
    ,YD_GBN
    ,DCK_COD
    ,STD_SHP
    ,MAK_TM
    ,SHP_KND
    ,SHP_TYP
    ,SHP_TYP_QTY
    ,SHP_TYP_NM
    ,WC
    ,KL
    ,FT
    ,LC
    ,DL
    ,PNT_YN
    ,BLD_COD
    ,LOA
    ,LBP
    ,WID
    ,DEP
    ,TOT_TON
    ,CG_TON
    ,ORI_OWN_NM
    ,ORI_NAT
    ,SFIG_NO
    ,FIG_NO
    ,PLN_YN
    ,SHP_GBN
    ,SHP_STS
    ,REL_FIG_SHP
    ,BD_STA
    ,PSP_NR
    ,IN_DAT
    ,UP_DAT
    ,DE_DAT
    ,IN_USR
    ,UP_USR
    ,WCT
    ,WCH
    ,CPY_SHP
    ,OWNRP_NM
    ,NW_GEN_FLG
    ,PRJ_GBN
    ,KL2
    ,FT2
    ,FT3
    ,KL_DCK
    ,KL2_DCK
    ,FT_DCK
    ,FT2_DCK
    ,FT3_DCK
    FROM
    TSAA002
    WHERE
    FIG_SHP = :FIG_SHP
  </TSAA002_FIG_SHP_SELECT>
  <INSERT_TSAA002>
    -- INSERT_TSAA002
    INSERT INTO TSAA002 (
    SHP_COD
    ,SHP_DES
    ,FIG_SHP
    ,YD_GBN
    ,DCK_COD
    ,STD_SHP
    ,MAK_TM
    ,SHP_KND
    ,SHP_TYP
    ,SHP_TYP_QTY
    ,SHP_TYP_NM
    ,WC
    ,KL
    ,FT
    ,LC
    ,DL
    ,PNT_YN
    ,BLD_COD
    ,LOA
    ,LBP
    ,WID
    ,DEP
    ,TOT_TON
    ,CG_TON
    ,ORI_OWN_NM
    ,ORI_NAT
    ,SFIG_NO
    ,FIG_NO
    ,PLN_YN
    ,SHP_GBN
    ,SHP_STS
    ,REL_FIG_SHP
    ,BD_STA
    ,PSP_NR
    ,IN_DAT
    ,DE_DAT
    ,IN_USR
    ,WCT
    ,WCH
    ,CPY_SHP
    ,OWNRP_NM
    ,NW_GEN_FLG
    ,PRJ_GBN
    ,KL2
    ,FT2
    ,FT3
    ,KL_DCK
    ,KL2_DCK
    ,FT_DCK
    ,FT2_DCK
    ,FT3_DCK
    )
    VALUES (
    :SHP_COD
    ,:SHP_DES
    ,:FIG_SHP
    ,:YD_GBN
    ,:DCK_COD
    ,:STD_SHP
    ,:MAK_TM
    ,:SHP_KND
    ,:SHP_TYP
    ,:SHP_TYP_QTY
    ,:SHP_TYP_NM
    ,:WC
    ,:KL
    ,:FT
    ,:LC
    ,:DL
    ,:PNT_YN
    ,:BLD_COD
    ,:LOA
    ,:LBP
    ,:WID
    ,:DEP
    ,:TOT_TON
    ,:CG_TON
    ,:ORI_OWN_NM
    ,:ORI_NAT
    ,:SFIG_NO
    ,:FIG_NO
    ,:PLN_YN
    ,:SHP_GBN
    ,:SHP_STS
    ,:REL_FIG_SHP
    ,:BD_STA
    ,:PSP_NR
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:DE_DAT
    ,:IN_USR
    ,:WCT
    ,:WCH
    ,:CPY_SHP
    ,:OWNRP_NM
    ,:NW_GEN_FLG
    ,:PRJ_GBN
    ,:KL2
    ,:FT2
    ,:FT3
    ,:KL_DCK
    ,:KL2_DCK
    ,:FT_DCK
    ,:FT2_DCK
    ,:FT3_DCK
    )
  </INSERT_TSAA002>
  <UPDATE_TSAA002>
    -- UPDATE_TSAA002
    UPDATE TSAA002 SET
    SHP_DES = :SHP_DES
    ,FIG_SHP = :FIG_SHP
    ,YD_GBN = :YD_GBN
    ,DCK_COD = :DCK_COD
    ,STD_SHP = :STD_SHP
    ,MAK_TM = :MAK_TM
    ,SHP_KND = :SHP_KND
    ,SHP_TYP = :SHP_TYP
    ,SHP_TYP_QTY = :SHP_TYP_QTY
    ,SHP_TYP_NM = :SHP_TYP_NM
    ,WC = :WC
    ,KL = :KL
    ,FT = :FT
    ,LC = :LC
    ,DL = :DL
    ,PNT_YN = :PNT_YN
    ,BLD_COD = :BLD_COD
    ,LOA = :LOA
    ,LBP = :LBP
    ,WID = :WID
    ,DEP = :DEP
    ,TOT_TON = :TOT_TON
    ,CG_TON = :CG_TON
    ,ORI_OWN_NM = :ORI_OWN_NM
    ,ORI_NAT = :ORI_NAT
    ,SFIG_NO = :SFIG_NO
    ,FIG_NO = :FIG_NO
    ,PLN_YN = :PLN_YN
    ,SHP_GBN = :SHP_GBN
    ,SHP_STS = :SHP_STS
    ,REL_FIG_SHP = :REL_FIG_SHP
    ,BD_STA = :BD_STA
    ,PSP_NR = :PSP_NR
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,DE_DAT = :DE_DAT
    ,UP_USR = :UP_USR
    ,WCT = :WCT
    ,WCH = :WCH
    ,CPY_SHP = :CPY_SHP
    ,OWNRP_NM = :OWNRP_NM
    ,NW_GEN_FLG = :NW_GEN_FLG
    ,PRJ_GBN = :PRJ_GBN
    ,KL2 = :KL2
    ,FT2 = :FT2
    ,FT3 = :FT3
    ,KL_DCK = :KL_DCK
    ,KL2_DCK = :KL2_DCK
    ,FT_DCK = :FT_DCK
    ,FT2_DCK = :FT2_DCK
    ,FT3_DCK = :FT3_DCK
    WHERE
    SHP_COD = :SHP_COD
  </UPDATE_TSAA002>
  <DELETE_TSAA002>
    -- DELETE_TSAA002
    DELETE TSAA002
    WHERE
    SHP_COD = :SHP_COD
  </DELETE_TSAA002>
  <!--TSAA002 END-->

  <!--TSFN202 BEGIN-->
  <TSFN202_ALL_CAL_TM_SELECT>
    --TSFN202_ALL_CAL_TM_SELECT
    SELECT *  FROM TSFN202
    WHERE SUBSTR(CAL_TM, 1, 8) BETWEEN :ST_DATE AND :FI_DATE
    ORDER BY CASE_NO
  </TSFN202_ALL_CAL_TM_SELECT>
  <TSFN202_ALL_SELECT>
    --TSFN202_ALL_SELECT
    SELECT * FROM TSFN202
    ORDER BY CASE_NO
  </TSFN202_ALL_SELECT>
  <TSFN202_CASE_NO_SELECT>
    -- TSFN202_CASE_NO_SELECT
    SELECT
    CASE_NO
    ,CASE_NAME
    ,CASE_TYPE
    ,CASE_DESC
    ,CAL_TM
    ,FIG_NO
    ,APP_ST
    ,APP_FI
    ,APP_EVT
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN202
    WHERE
    CASE_NO = :CASE_NO
  </TSFN202_CASE_NO_SELECT>
  <INSERT_TSFN202>
    -- INSERT_TSFN202
    INSERT INTO TSFN202 (
    CASE_NO
    ,CASE_NAME
    ,CASE_TYPE
    ,CASE_DESC
    ,CAL_TM
    ,FIG_NO
    ,APP_ST
    ,APP_FI
    ,APP_EVT
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:CASE_NAME
    ,:CASE_TYPE
    ,:CASE_DESC
    ,:CAL_TM
    ,:FIG_NO
    ,:APP_ST
    ,:APP_FI
    ,:APP_EVT
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN202>
  <UPDATE_TSFN202>
    -- UPDATE_TSFN202
    UPDATE TSFN202 SET
    CASE_NAME = :CASE_NAME
    ,CASE_TYPE = :CASE_TYPE
    ,CASE_DESC = :CASE_DESC
    ,CAL_TM = :CAL_TM
    ,FIG_NO = :FIG_NO
    ,APP_ST = :APP_ST
    ,APP_FI = :APP_FI
    ,APP_EVT = :APP_EVT
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
  </UPDATE_TSFN202>
  <DELETE_TSFN202>
    -- DELETE_TSFN202
    DELETE TSFN202
    WHERE
    CASE_NO = :CASE_NO
  </DELETE_TSFN202>
  <TSFN202_MAX_CASENO>
    -- MAX_CASENO_TSFN202
    SELECT LPAD(MAX(CASE_NO)+1,12,'0') CASE_NO
    FROM   TSFN202
  </TSFN202_MAX_CASENO>
  <!--TSFN202 END-->

  <!--TSFN203 BEGIN-->
  <EREC_REVISION_SELECT>
    --EREC_REVISION_SELECT
    SELECT DISTINCT A.SHP_REV, A.SHP_REV||' '||A.ACT_NW_DES||DECODE(A.FIRM_YN,'Y',('   *확정*'),'') ACT_NW_DES
    FROM TSEB016 A
    WHERE A.SHP_COD = :SHP_COD
    ORDER BY SHP_REV DESC
  </EREC_REVISION_SELECT>
  <EREC_FIG_NO_SELECT>
    --EREC_FIG_NO_SELECT
    SELECT DISTINCT A.FIG_NO, B.FIG_NO||' '||B.FIG_DES FIG_DES
    FROM   TSEG012 A
    ,      TSAC003 B
    WHERE  A.FIG_NO = B.FIG_NO
    AND    A.SHP_COD = :SHP_COD
    ORDER BY A.FIG_NO DESC
  </EREC_FIG_NO_SELECT>
  <TSFN203_KL_DATE_SELECT>
    --TSFN203_KL_DATE_SELECT
    SELECT  :CASE_NO CASE_NO,
    NVL(B.FIG_SHP,A.FIG_SHP) FIG_SHP,
    NVL(A.BP_YN, 'Y') BP_YN,
    NVL(A.SHP_REV, -1) SHP_REV,
    A.ACT_NW_DES,
    NVL (A.SHP_COD, B.SHP_COD) SHP_COD,
    NVL (A.SHP_DES, B.SHP_DES) SHP_DES,
    NVL (A.YD_GBN, B.YD_GBN) YD_GBN,
    NVL (A.DCK_COD, B.DCK_COD) DCK_COD,
    NVL (A.SHP_KND, B.SHP_KND) SHP_KND,
    NVL (A.SHP_TYP, B.SHP_TYP) SHP_TYP,
    NVL (A.SHP_TYP_QTY, B.SHP_TYP_QTY) SHP_TYP_QTY,
    NVL (A.SHP_TYP_NM, B.SHP_TYP_NM) SHP_TYP_NM,
    NVL (A.WC, B.WC) WC,
    NVL (A.KL, B.KL) KL,
    NVL (A.FT, B.FT) FT,
    NVL (A.LC, B.LC) LC,
    NVL (A.DL, B.DL) DL,
    NVL (A.BLD_COD, B.BLD_COD) BLD_COD,
    NVL (A.ORI_OWN_NM, B.ORI_OWN_NM) ORI_OWN_NM,
    NVL (A.OWNRP_NM, B.OWNRP_NM) OWNRP_NM,
    NVL (A.PRJ_GBN, B.PRJ_GBN) PRJ_GBN,
    A.CPY_SHP,
    A.REF_CASE_NO,
    A.REF_FIG_SHP,
    A.CNF_YN,
    A.CNF_DAT,
    A.CNF_USR,
    A.RMK,
    A.IP,
    A.PID,
    A.IN_DAT,
    A.UP_DAT,
    A.IN_USR,
    A.UP_USR
    FROM TSFN203 A, TSAA002 B
    WHERE   B.KL BETWEEN :ST_DATE AND :FI_DATE
    AND B.DCK_COD IN (:WHERE_DOCK_LIST)
    AND A.SHP_COD(+) = B.SHP_COD
    AND A.CASE_NO(+) = :CASE_NO
    ORDER BY A.FIG_SHP
  </TSFN203_KL_DATE_SELECT>
  <TSFN203_WC_LC_DATE_SELECT>
    --TSFN203_WC_LC_DATE_SELECT
    SELECT  :CASE_NO CASE_NO,
    NVL(B.FIG_SHP,A.FIG_SHP) FIG_SHP,
    NVL(A.BP_YN, 'Y') BP_YN,
    NVL(A.SHP_REV, -1) SHP_REV,
    A.ACT_NW_DES,
    NVL (A.SHP_COD, B.SHP_COD) SHP_COD,
    NVL (A.SHP_DES, B.SHP_DES) SHP_DES,
    NVL (A.YD_GBN, B.YD_GBN) YD_GBN,
    NVL (A.DCK_COD, B.DCK_COD) DCK_COD,
    NVL (A.SHP_KND, B.SHP_KND) SHP_KND,
    NVL (A.SHP_TYP, B.SHP_TYP) SHP_TYP,
    NVL (A.SHP_TYP_QTY, B.SHP_TYP_QTY) SHP_TYP_QTY,
    NVL (A.SHP_TYP_NM, B.SHP_TYP_NM) SHP_TYP_NM,
    NVL (A.WC, B.WC) WC,
    NVL (A.KL, B.KL) KL,
    NVL (A.FT, B.FT) FT,
    NVL (A.LC, B.LC) LC,
    NVL (A.DL, B.DL) DL,
    NVL (A.BLD_COD, B.BLD_COD) BLD_COD,
    NVL (A.ORI_OWN_NM, B.ORI_OWN_NM) ORI_OWN_NM,
    NVL (A.OWNRP_NM, B.OWNRP_NM) OWNRP_NM,
    NVL (A.PRJ_GBN, B.PRJ_GBN) PRJ_GBN,
    A.CPY_SHP,
    A.REF_CASE_NO,
    A.REF_FIG_SHP,
    A.CNF_YN,
    A.CNF_DAT,
    A.CNF_USR,
    A.RMK,
    A.IP,
    A.PID,
    A.IN_DAT,
    A.UP_DAT,
    A.IN_USR,
    A.UP_USR,
    NVL(A.FIG_NO,'OP') FIG_NO,
    C.FIG_DES,
    DECODE(A.FIG_NO,'OP','',A.FIG_NO) DISP_FIG_DES
    FROM TSFN203 A, TSAA002 B, TSAC003 C
    WHERE  NOT ( B.LC &lt; :ST_DATE OR B.WC &gt; :FI_DATE)
    AND B.DCK_COD IN (:WHERE_DOCK_LIST)
    AND A.SHP_COD(+) = B.SHP_COD
    AND A.CASE_NO(+) = :CASE_NO
    AND A.FIG_NO = C.FIG_NO(+)
    ORDER BY SHP_REV DESC, A.DCK_COD, A.KL, A.FIG_SHP
  </TSFN203_WC_LC_DATE_SELECT>
  <TSFN203_WC_LC_DATE_BP_SELECT>
    --TSFN203_WC_LC_DATE_BP_SELECT
    SELECT  :CASE_NO CASE_NO,
    NVL(B.FIG_SHP,A.FIG_SHP) FIG_SHP,
    NVL(A.BP_YN, 'Y') BP_YN,
    NVL(A.SHP_REV, -1) SHP_REV,
    A.ACT_NW_DES,
    NVL (A.SHP_COD, B.SHP_COD) SHP_COD,
    NVL (A.SHP_DES, B.SHP_DES) SHP_DES,
    NVL (A.YD_GBN, ' ') YD_GBN,
    NVL (A.DCK_COD, B.DCK_COD) DCK_COD,
    NVL (A.SHP_KND, B.SHP_KND) SHP_KND,
    NVL (A.SHP_TYP, B.SHP_TYP) SHP_TYP,
    NVL (A.SHP_TYP_QTY, B.SHP_TYP_QTY) SHP_TYP_QTY,
    NVL (A.SHP_TYP_NM, B.SHP_TYP_NM) SHP_TYP_NM,
    NVL (A.WC, B.WC) WC,
    NVL (A.KL, B.KL) KL,
    NVL (A.FT, B.FT) FT,
    NVL (A.LC, B.LC) LC,
    NVL (A.DL, B.DL) DL,
    NVL (A.BLD_COD, B.BLD_COD) BLD_COD,
    NVL (A.ORI_OWN_NM, ' ') ORI_OWN_NM,
    NVL (A.OWNRP_NM, B.OWNRP_NM) OWNRP_NM,
    NVL (A.PRJ_GBN, B.PRJ_GBN) PRJ_GBN,
    A.CPY_SHP,
    A.REF_CASE_NO,
    A.REF_FIG_SHP,
    A.CNF_YN,
    A.CNF_DAT,
    A.CNF_USR,
    A.RMK,
    A.IP,
    A.PID,
    A.IN_DAT,
    A.UP_DAT,
    A.IN_USR,
    A.UP_USR,
    B.FIG_NO,
    C.FIG_DES,
    DECODE(A.FIG_NO,'운영','','OP','',A.FIG_NO) DISP_FIG_DES
    FROM TSFN203 A, TSAD001 B, TSAC003 C
    WHERE  NOT ( B.LC &lt; :ST_DATE OR B.WC &gt; :FI_DATE)
    AND B.DCK_COD IN (:WHERE_DOCK_LIST)
    AND A.SHP_COD(+) = B.SHP_COD
    AND A.CASE_NO(+) = :CASE_NO
    AND A.FIG_NO = C.FIG_NO(+)
    AND B.FIG_NO = :FIG_NO
    ORDER BY SHP_REV DESC, A.DCK_COD, A.KL, A.FIG_SHP
  </TSFN203_WC_LC_DATE_BP_SELECT>
  <TSFN203_CASE_NO_DCK_LIST_SELECT>
    --TSFN203_CASE_NO_DCK_LIST_SELECT
    SELECT * FROM TSFN203
    WHERE CASE_NO = :CASE_NO
    AND DCK_COD IN (:WHERE_DOCK_LIST)
    ORDER BY FIG_SHP
  </TSFN203_CASE_NO_DCK_LIST_SELECT>
  <TSFN203_CASE_NO_SELECT>
    -- TSFN203_CASE_NO_SELECT
    SELECT
    CASE_NO
    ,FIG_SHP
    ,BP_YN
    ,SHP_REV
    ,ACT_NW_DES
    ,SHP_COD
    ,SHP_DES
    ,YD_GBN
    ,DCK_COD
    ,SHP_KND
    ,SHP_TYP
    ,SHP_TYP_QTY
    ,SHP_TYP_NM
    ,WC
    ,KL
    ,FT
    ,LC
    ,DL
    ,BLD_COD
    ,ORI_OWN_NM
    ,OWNRP_NM
    ,PRJ_GBN
    ,CPY_SHP
    ,REF_CASE_NO
    ,REF_FIG_SHP
    ,CNF_YN
    ,CNF_DAT
    ,CNF_USR
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN203
    WHERE
    CASE_NO = :CASE_NO
  </TSFN203_CASE_NO_SELECT>
  <INSERT_TSFN203>
    -- INSERT_TSFN203
    INSERT INTO TSFN203 (
    CASE_NO
    ,FIG_SHP
    ,BP_YN
    ,SHP_REV
    ,ACT_NW_DES
    ,SHP_COD
    ,SHP_DES
    ,YD_GBN
    ,DCK_COD
    ,SHP_KND
    ,SHP_TYP
    ,SHP_TYP_QTY
    ,SHP_TYP_NM
    ,WC
    ,KL
    ,FT
    ,LC
    ,DL
    ,BLD_COD
    ,ORI_OWN_NM
    ,OWNRP_NM
    ,PRJ_GBN
    ,CPY_SHP
    ,REF_CASE_NO
    ,REF_FIG_SHP
    ,CNF_YN
    ,CNF_DAT
    ,CNF_USR
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    ,FIG_NO
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,NVL(:BP_YN, 'Y')
    ,:SHP_REV
    ,:ACT_NW_DES
    ,:SHP_COD
    ,:SHP_DES
    ,:YD_GBN
    ,:DCK_COD
    ,:SHP_KND
    ,:SHP_TYP
    ,:SHP_TYP_QTY
    ,:SHP_TYP_NM
    ,:WC
    ,:KL
    ,:FT
    ,:LC
    ,:DL
    ,:BLD_COD
    ,:ORI_OWN_NM
    ,:OWNRP_NM
    ,:PRJ_GBN
    ,:CPY_SHP
    ,:REF_CASE_NO
    ,:REF_FIG_SHP
    ,:CNF_YN
    ,:CNF_DAT
    ,:CNF_USR
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:FIG_NO
    )
  </INSERT_TSFN203>
  <UPDATE_TSFN203>
    -- UPDATE_TSFN203
    UPDATE TSFN203 SET
    BP_YN = :BP_YN
    ,SHP_REV = :SHP_REV
    ,ACT_NW_DES = :ACT_NW_DES
    ,SHP_COD = :SHP_COD
    ,SHP_DES = :SHP_DES
    ,YD_GBN = :YD_GBN
    ,DCK_COD = :DCK_COD
    ,SHP_KND = :SHP_KND
    ,SHP_TYP = :SHP_TYP
    ,SHP_TYP_QTY = :SHP_TYP_QTY
    ,SHP_TYP_NM = :SHP_TYP_NM
    ,WC = :WC
    ,KL = :KL
    ,FT = :FT
    ,LC = :LC
    ,DL = :DL
    ,BLD_COD = :BLD_COD
    ,ORI_OWN_NM = :ORI_OWN_NM
    ,OWNRP_NM = :OWNRP_NM
    ,PRJ_GBN = :PRJ_GBN
    ,CPY_SHP = :CPY_SHP
    ,REF_CASE_NO = :REF_CASE_NO
    ,REF_FIG_SHP = :REF_FIG_SHP
    ,CNF_YN = :CNF_YN
    ,CNF_DAT = :CNF_DAT
    ,CNF_USR = :CNF_USR
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </UPDATE_TSFN203>
  <DELETE_TSFN203>
    -- DELETE_TSFN203
    DELETE TSFN203
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
  </DELETE_TSFN203>
  <!--TSFN203 END-->

  <!--TSFN211 BEGIN-->
  <TSFN211_CASE_NO_SHP_REV_SELECT>
    --TSFN211_CASE_NO_SHP_REV_SELECT
    --멀티호선
    SELECT * FROM TSFN211
    WHERE
    CASE_NO = :CASE_NO -- AND SHP_REV = :SHP_REV
    AND FIG_SHP IN :WHERE_FIG_SHP
    ORDER BY FIG_SHP, ERECT_BLK
  </TSFN211_CASE_NO_SHP_REV_SELECT>
  <TSFN211_CASE_NO_FIG_SHP_SHP_REV_SELECT>
    -- TSFN211_CASE_NO_FIG_SHP_SHP_REV_SELECT
    SELECT
    *
    FROM
    TSFN211
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND SHP_REV = :SHP_REV
  </TSFN211_CASE_NO_FIG_SHP_SHP_REV_SELECT>
  <INSERT_TSFN211>
    -- INSERT_TSFN211
    INSERT INTO TSFN211 (
    CASE_NO
    ,FIG_SHP
    ,SHP_REV
    ,ERECT_BLK
    ,ERECT_SEQ
    ,X_POS
    ,Y_POS
    ,ERECT_DT
    ,ERECT_DT_BACK
    ,LY_POS
    ,ERECT_BLK_NAME
    ,REG_EMP_ID
    ,ERECT_SCH_YN
    ,A_SEQ
    ,B_SEQ
    ,PRT_ERECT_BLK
    ,ROW_CNT
    ,PRT_ERECT_BLK_NOT
    ,BOX_ROW_IDX
    ,BOX_ROW_OFFSET
    ,LOAD_HOL_DT
    ,CRANE_CNT
    ,BLK_WT
    ,CRANE_HOUR
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:SHP_REV
    ,:ERECT_BLK
    ,:ERECT_SEQ
    ,:X_POS
    ,:Y_POS
    ,:ERECT_DT
    ,:ERECT_DT_BACK
    ,:LY_POS
    ,:ERECT_BLK_NAME
    ,:REG_EMP_ID
    ,:ERECT_SCH_YN
    ,:A_SEQ
    ,:B_SEQ
    ,:PRT_ERECT_BLK
    ,:ROW_CNT
    ,:PRT_ERECT_BLK_NOT
    ,:BOX_ROW_IDX
    ,:BOX_ROW_OFFSET
    ,:LOAD_HOL_DT
    ,:CRANE_CNT
    ,:BLK_WT
    ,:CRANE_HOUR
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN211>
  <UPDATE_TSFN211>
    -- UPDATE_TSFN211
    UPDATE TSFN211 SET
    ERECT_SEQ = :ERECT_SEQ
    ,X_POS = :X_POS
    ,Y_POS = :Y_POS
    ,ERECT_DT = :ERECT_DT
    ,ERECT_DT_BACK = :ERECT_DT_BACK
    ,LY_POS = :LY_POS
    ,ERECT_BLK_NAME = :ERECT_BLK_NAME
    ,REG_EMP_ID = :REG_EMP_ID
    ,ERECT_SCH_YN = :ERECT_SCH_YN
    ,A_SEQ = :A_SEQ
    ,B_SEQ = :B_SEQ
    ,PRT_ERECT_BLK = :PRT_ERECT_BLK
    ,ROW_CNT = :ROW_CNT
    ,PRT_ERECT_BLK_NOT = :PRT_ERECT_BLK_NOT
    ,BOX_ROW_IDX = :BOX_ROW_IDX
    ,BOX_ROW_OFFSET = :BOX_ROW_OFFSET
    ,LOAD_HOL_DT = :LOAD_HOL_DT
    ,CRANE_CNT = :CRANE_CNT
    ,BLK_WT = :BLK_WT
    ,CRANE_HOUR = :CRANE_HOUR
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND SHP_REV = :SHP_REV
    AND ERECT_BLK = :ERECT_BLK
  </UPDATE_TSFN211>
  <DELETE_TSFN211>
    -- DELETE_TSFN211
    DELETE TSFN211
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND SHP_REV = :SHP_REV
    AND ERECT_BLK = :ERECT_BLK
  </DELETE_TSFN211>
  <!--TSFN211 END-->

  <!--TSFN212 BEGIN-->
  <TSFN212_CASE_NO_SHP_REV_SELECT>
    --TSFN212_CASE_NO_SHP_REV_SELECT
    SELECT * FROM TSFN212
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP IN :WHERE_FIG_SHP
    ORDER BY FIG_SHP, B_ERECT_BLK, A_ERECT_BLK
  </TSFN212_CASE_NO_SHP_REV_SELECT>
  <TSFN212_CASE_NO_FIG_SHP_SHP_REV_SELECT>
    -- TSFN212_CASE_NO_FIG_SHP_SHP_REV_SELECT
    SELECT
    CASE_NO
    ,FIG_SHP
    ,SHP_REV
    ,B_GUBUN
    ,B_ERECT_BLK
    ,A_GUBUN
    ,A_ERECT_BLK
    ,PITCH_STD
    ,PITCH_EDIT
    ,LINE_POS
    ,LINE1_SX
    ,LINE1_SY
    ,LINE1_EX
    ,LINE1_EY
    ,LINE2_SX
    ,LINE2_SY
    ,LINE2_EX
    ,LINE2_EY
    ,LINE3_SX
    ,LINE3_SY
    ,LINE3_EX
    ,LINE3_EY
    ,A_SEQ
    ,B_SEQ
    ,LINE_TYPE
    ,LOAD_PITCH
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN212
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND SHP_REV = :SHP_REV
  </TSFN212_CASE_NO_FIG_SHP_SHP_REV_SELECT>
  <INSERT_TSFN212>
    -- INSERT_TSFN212
    INSERT INTO TSFN212 (
    CASE_NO
    ,FIG_SHP
    ,SHP_REV
    ,B_GUBUN
    ,B_ERECT_BLK
    ,A_GUBUN
    ,A_ERECT_BLK
    ,PITCH_STD
    ,PITCH_EDIT
    ,LINE_POS
    ,LINE1_SX
    ,LINE1_SY
    ,LINE1_EX
    ,LINE1_EY
    ,LINE2_SX
    ,LINE2_SY
    ,LINE2_EX
    ,LINE2_EY
    ,LINE3_SX
    ,LINE3_SY
    ,LINE3_EX
    ,LINE3_EY
    ,A_SEQ
    ,B_SEQ
    ,LINE_TYPE
    ,LOAD_PITCH
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:SHP_REV
    ,:B_GUBUN
    ,:B_ERECT_BLK
    ,:A_GUBUN
    ,:A_ERECT_BLK
    ,:PITCH_STD
    ,:PITCH_EDIT
    ,:LINE_POS
    ,:LINE1_SX
    ,:LINE1_SY
    ,:LINE1_EX
    ,:LINE1_EY
    ,:LINE2_SX
    ,:LINE2_SY
    ,:LINE2_EX
    ,:LINE2_EY
    ,:LINE3_SX
    ,:LINE3_SY
    ,:LINE3_EX
    ,:LINE3_EY
    ,:A_SEQ
    ,:B_SEQ
    ,:LINE_TYPE
    ,:LOAD_PITCH
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN212>
  <UPDATE_TSFN212>
    -- UPDATE_TSFN212
    UPDATE TSFN212 SET
    B_GUBUN = :B_GUBUN
    ,A_GUBUN = :A_GUBUN
    ,PITCH_STD = :PITCH_STD
    ,PITCH_EDIT = :PITCH_EDIT
    ,LINE_POS = :LINE_POS
    ,LINE1_SX = :LINE1_SX
    ,LINE1_SY = :LINE1_SY
    ,LINE1_EX = :LINE1_EX
    ,LINE1_EY = :LINE1_EY
    ,LINE2_SX = :LINE2_SX
    ,LINE2_SY = :LINE2_SY
    ,LINE2_EX = :LINE2_EX
    ,LINE2_EY = :LINE2_EY
    ,LINE3_SX = :LINE3_SX
    ,LINE3_SY = :LINE3_SY
    ,LINE3_EX = :LINE3_EX
    ,LINE3_EY = :LINE3_EY
    ,A_SEQ = :A_SEQ
    ,B_SEQ = :B_SEQ
    ,LINE_TYPE = :LINE_TYPE
    ,LOAD_PITCH = :LOAD_PITCH
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND SHP_REV = :SHP_REV
    AND B_ERECT_BLK = :B_ERECT_BLK
    AND A_ERECT_BLK = :A_ERECT_BLK
  </UPDATE_TSFN212>
  <DELETE_TSFN212>
    -- DELETE_TSFN212
    DELETE TSFN212
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND SHP_REV = :SHP_REV
    AND B_ERECT_BLK = :B_ERECT_BLK
    AND A_ERECT_BLK = :A_ERECT_BLK
  </DELETE_TSFN212>
  <!--TSFN212 END-->

  <!--TSFN204 BEGIN-->
  <TSFN204_CASE_NO_SELECT>
    --TSFN204_CASE_NO_SELECT
    SELECT * FROM TSFN204
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP IN :WHERE_FIG_SHP
    ORDER BY FIG_SHP, B_BLOCK, A_BLOCK
  </TSFN204_CASE_NO_SELECT>
  <TSFN204_CASE_NO_FIG_SHP_SHP_REV_SELECT>
    -- TSFN204_CASE_NO_FIG_SHP_SHP_REV_SELECT
    SELECT
    CASE_NO
    ,FIG_SHP
    ,SHP_REV
    ,B_M_ACT
    ,A_M_ACT
    ,B_BLOCK
    ,A_BLOCK
    ,LINK_TYPE
    ,ST_OFFSET
    ,FI_OFFSET
    ,LINE_TYPE
    ,HEAD_TYPE
    ,LINE_STK
    ,LINE_TICK
    ,HEAD_STK
    ,HEAD_OUT_STK
    ,HEAD_OUT_TICK
    ,LINE_POINTS
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN204
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND SHP_REV = :SHP_REV
  </TSFN204_CASE_NO_FIG_SHP_SHP_REV_SELECT>
  <INSERT_TSFN204>
    -- INSERT_TSFN204
    INSERT INTO TSFN204 (
    CASE_NO
    ,FIG_SHP
    ,SHP_REV
    ,B_M_ACT
    ,A_M_ACT
    ,B_BLOCK
    ,A_BLOCK
    ,LINK_TYPE
    ,ST_OFFSET
    ,FI_OFFSET
    ,LINE_TYPE
    ,HEAD_TYPE
    ,LINE_STK
    ,LINE_TICK
    ,HEAD_STK
    ,HEAD_OUT_STK
    ,HEAD_OUT_TICK
    ,LINE_POINTS
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:SHP_REV
    ,:B_M_ACT
    ,:A_M_ACT
    ,:B_BLOCK
    ,:A_BLOCK
    ,:LINK_TYPE
    ,:ST_OFFSET
    ,:FI_OFFSET
    ,:LINE_TYPE
    ,:HEAD_TYPE
    ,:LINE_STK
    ,:LINE_TICK
    ,:HEAD_STK
    ,:HEAD_OUT_STK
    ,:HEAD_OUT_TICK
    ,:LINE_POINTS
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN204>
  <UPDATE_TSFN204>
    -- UPDATE_TSFN204
    UPDATE TSFN204 SET
    B_BLOCK = :B_BLOCK
    ,A_BLOCK = :A_BLOCK
    ,LINK_TYPE = :LINK_TYPE
    ,ST_OFFSET = :ST_OFFSET
    ,FI_OFFSET = :FI_OFFSET
    ,LINE_TYPE = :LINE_TYPE
    ,HEAD_TYPE = :HEAD_TYPE
    ,LINE_STK = :LINE_STK
    ,LINE_TICK = :LINE_TICK
    ,HEAD_STK = :HEAD_STK
    ,HEAD_OUT_STK = :HEAD_OUT_STK
    ,HEAD_OUT_TICK = :HEAD_OUT_TICK
    ,LINE_POINTS = :LINE_POINTS
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND SHP_REV = :SHP_REV
    AND B_M_ACT = :B_M_ACT
    AND A_M_ACT = :A_M_ACT
  </UPDATE_TSFN204>
  <DELETE_TSFN204>
    -- DELETE_TSFN204
    DELETE TSFN204
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND SHP_REV = :SHP_REV
    AND B_M_ACT = :B_M_ACT
    AND A_M_ACT = :A_M_ACT
  </DELETE_TSFN204>
  <!--TSFN204 END-->

  <!--TSFN205 BEGIN-->
  <TSFN205_CASE_NO_SELECT>
    --TSFN205_CASE_NO_SELECT
    SELECT * FROM TSFN205
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP IN :WHERE_FIG_SHP
    ORDER BY FIG_SHP, SEQ
  </TSFN205_CASE_NO_SELECT>
  <TSFN205_CASE_NO_FIG_SHP_SHP_REV_SELECT>
    -- TSFN205_CASE_NO_FIG_SHP_SHP_REV_SELECT
    SELECT
    CASE_NO
    ,FIG_SHP
    ,SHP_REV
    ,SEQ
    ,REL_BLOCK
    ,NODE_DESC
    ,ST_DT
    ,FI_DT
    ,LINE_THICK
    ,LINE_COLOR
    ,NODE_COLOR
    ,DASH_TYPE
    ,FONT_SIZE
    ,ROW_INDEX
    ,ROW_OFFSET
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN205
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND SHP_REV = :SHP_REV
  </TSFN205_CASE_NO_FIG_SHP_SHP_REV_SELECT>
  <INSERT_TSFN205>
    -- INSERT_TSFN205
    INSERT INTO TSFN205 (
    CASE_NO
    ,FIG_SHP
    ,SHP_REV
    ,SEQ
    ,REL_BLOCK
    ,NODE_DESC
    ,ST_DT
    ,FI_DT
    ,LINE_THICK
    ,LINE_COLOR
    ,NODE_COLOR
    ,DASH_TYPE
    ,FONT_SIZE
    ,ROW_INDEX
    ,ROW_OFFSET
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:SHP_REV
    ,:SEQ
    ,:REL_BLOCK
    ,:NODE_DESC
    ,:ST_DT
    ,:FI_DT
    ,:LINE_THICK
    ,:LINE_COLOR
    ,:NODE_COLOR
    ,:DASH_TYPE
    ,:FONT_SIZE
    ,:ROW_INDEX
    ,:ROW_OFFSET
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN205>
  <UPDATE_TSFN205>
    -- UPDATE_TSFN205
    UPDATE TSFN205 SET
    REL_BLOCK = :REL_BLOCK
    ,NODE_DESC = :NODE_DESC
    ,ST_DT = :ST_DT
    ,FI_DT = :FI_DT
    ,LINE_THICK = :LINE_THICK
    ,LINE_COLOR = :LINE_COLOR
    ,NODE_COLOR = :NODE_COLOR
    ,DASH_TYPE = :DASH_TYPE
    ,FONT_SIZE = :FONT_SIZE
    ,ROW_INDEX = :ROW_INDEX
    ,ROW_OFFSET = :ROW_OFFSET
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND SHP_REV = :SHP_REV
    AND SEQ = :SEQ
  </UPDATE_TSFN205>
  <DELETE_TSFN205>
    -- DELETE_TSFN205
    DELETE TSFN205
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND SHP_REV = :SHP_REV
    AND SEQ = :SEQ
  </DELETE_TSFN205>
  <!--TSFN205 END-->

  <!--TSFN206 BEGIN-->
  <TSFN206_EVENT_ID_SELECT>
    -- TSFN206_EVENT_ID_SELECT
    SELECT
    EVENT_ID
    ,EVENT_CD
    ,EVENT_NM
    ,EVENT_YAK
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN206
    WHERE
    EVENT_ID = :EVENT_ID
  </TSFN206_EVENT_ID_SELECT>
  <INSERT_TSFN206>
    -- INSERT_TSFN206
    INSERT INTO TSFN206 (
    EVENT_ID
    ,EVENT_CD
    ,EVENT_NM
    ,EVENT_YAK
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :EVENT_ID
    ,:EVENT_CD
    ,:EVENT_NM
    ,:EVENT_YAK
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN206>
  <UPDATE_TSFN206>
    -- UPDATE_TSFN206
    UPDATE TSFN206 SET
    EVENT_CD = :EVENT_CD
    ,EVENT_NM = :EVENT_NM
    ,EVENT_YAK = :EVENT_YAK
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    EVENT_ID = :EVENT_ID
  </UPDATE_TSFN206>
  <DELETE_TSFN206>
    -- DELETE_TSFN206
    DELETE TSFN206
    WHERE
    EVENT_ID = :EVENT_ID
  </DELETE_TSFN206>
  <!--TSFN206 END-->

  <!--TSFN213 BEGIN-->
  <TSFN213_CASE_NO_AGG_SELECT>
    -- TSFN213_CASE_NO_AGG_SELECT
    SELECT
    *
    FROM
    TSFN213
    WHERE
    CASE_NO = :CASE_NO
    ORDER BY CAPA_GROUP_ID
  </TSFN213_CASE_NO_AGG_SELECT>
  <TSFN213_CASE_NO_SELECT>
    -- TSFN213_CASE_NO_SELECT
    SELECT
    *
    FROM
    TSFN213
    WHERE
    CASE_NO = :CASE_NO
    AND CAPA_TYPE IS NULL
    ORDER BY CAPA_GROUP_ID
  </TSFN213_CASE_NO_SELECT>
  <TSFN213_CASE_NO_CAPA_GROUP_ID_SELECT>
    -- TSFN213_CASE_NO_CAPA_GROUP_ID_SELECT
    SELECT
    *
    FROM
    TSFN213
    WHERE
    CASE_NO = :CASE_NO
    AND CAPA_GROUP_ID = :CAPA_GROUP_ID
  </TSFN213_CASE_NO_CAPA_GROUP_ID_SELECT>
  <INSERT_TSFN213>
    -- INSERT_TSFN213
    INSERT INTO TSFN213 (
    CASE_NO
    ,CAPA_GROUP_ID
    ,CAPA_GROUP_NAME
    ,CAPA_DESC
    ,USE_YN
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    ,DCK_COD1
    ,DCK_COD2
    ,DPT_COD
    ,DPT_NAME
    ,CAPA_TYPE
    ,REF_CAPA_GROUP_ID1
    ,REF_CAPA_GROUP_ID2
    ,REF_CAPA_GROUP_ID3
    )
    VALUES (
    :CASE_NO
    ,:CAPA_GROUP_ID
    ,:CAPA_GROUP_NAME
    ,:CAPA_DESC
    ,:USE_YN
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:DCK_COD1
    ,:DCK_COD2
    ,:DPT_COD
    ,:DPT_NAME
    ,:CAPA_TYPE

    ,:REF_CAPA_GROUP_ID1
    ,:REF_CAPA_GROUP_ID2
    ,:REF_CAPA_GROUP_ID3
    )
  </INSERT_TSFN213>
  <UPDATE_TSFN213>
    -- UPDATE_TSFN213
    UPDATE TSFN213 SET
    CAPA_GROUP_NAME = :CAPA_GROUP_NAME
    ,CAPA_DESC = :CAPA_DESC
    ,USE_YN = :USE_YN
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    ,DCK_COD1 = :DCK_COD1
    ,DCK_COD2 = :DCK_COD2
    ,DPT_COD = :DPT_COD
    ,DPT_NAME = :DPT_NAME
    ,CAPA_TYPE = :CAPA_TYPE
    ,REF_CAPA_GROUP_ID1 = :REF_CAPA_GROUP_ID1
    ,REF_CAPA_GROUP_ID2 = :REF_CAPA_GROUP_ID2
    ,REF_CAPA_GROUP_ID3 = :REF_CAPA_GROUP_ID3
    WHERE
    CASE_NO = :CASE_NO
    AND CAPA_GROUP_ID = :CAPA_GROUP_ID
  </UPDATE_TSFN213>
  <DELETE_TSFN213>
    -- DELETE_TSFN213
    DELETE TSFN213
    WHERE
    CASE_NO = :CASE_NO
    AND CAPA_GROUP_ID = :CAPA_GROUP_ID
  </DELETE_TSFN213>
  <!--TSFN213 END-->

  <!--TSFN214 BEGIN-->
  <TSFN214_CASE_NO_SELECT>
    --TSFN214_CASE_NO_SELECT
    SELECT * FROM
    TSFN214
    WHERE
    CASE_NO = :CASE_NO
    ORDER BY CAPA_GROUP_ID
  </TSFN214_CASE_NO_SELECT>
  <TSFN214_CASE_NO_CAPA_GROUP_ID_SELECT>
    -- TSFN214_CASE_NO_CAPA_GROUP_ID_SELECT
    SELECT * FROM TSFN214
    WHERE CASE_NO = :CASE_NO
    AND CAPA_GROUP_ID = :CAPA_GROUP_ID
  </TSFN214_CASE_NO_CAPA_GROUP_ID_SELECT>
  <TSFN214_CASE_NO_CAPA_GROUP_ID1_ID2_SELECT>
    -- TSFN214_CASE_NO_CAPA_GROUP_ID1_ID2_SELECT
    SELECT * FROM TSFN214
    WHERE CASE_NO = :CASE_NO
    AND (CAPA_GROUP_ID = :REF_CAPA_GROUP_ID1 OR CAPA_GROUP_ID = :REF_CAPA_GROUP_ID2)
  </TSFN214_CASE_NO_CAPA_GROUP_ID1_ID2_SELECT>
  <TSFN214_CASE_NO_CAPA_GROUP_ID1_ID2_ID3_SELECT>
    -- TSFN214_CASE_NO_CAPA_GROUP_ID1_ID2_SELECT
    SELECT * FROM TSFN214
    WHERE CASE_NO = :CASE_NO
    AND (CAPA_GROUP_ID = :REF_CAPA_GROUP_ID1 OR CAPA_GROUP_ID = :REF_CAPA_GROUP_ID2 OR CAPA_GROUP_ID = :REF_CAPA_GROUP_ID3)
  </TSFN214_CASE_NO_CAPA_GROUP_ID1_ID2_ID3_SELECT>
  <INSERT_TSFN214>
    -- INSERT_TSFN214
    INSERT INTO TSFN214 (
    CASE_NO
    ,CAPA_GROUP_ID
    ,APP_ST
    ,APP_FI
    ,WGT_CAPA
    ,CNT_CAPA
    ,GC_TM_CAPA
    ,ETC_TM_CAPA
    ,DBL_WGT_CAPA
    ,DBL_LENGHT_LIMIT
    ,DBL_TON_LIMIT
    ,DBL_EQUP_TON
    ,CRANE_CNT
    ,CRANE_DESC
    ,CRANE1
    ,CRANE2
    ,CRANE3
    ,CRANE4
    ,CRANE5
    ,PE_AREA
    ,ETC_AREA
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:CAPA_GROUP_ID
    ,:APP_ST
    ,:APP_FI
    ,:WGT_CAPA
    ,:CNT_CAPA
    ,:GC_TM_CAPA
    ,:ETC_TM_CAPA
    ,:DBL_WGT_CAPA
    ,:DBL_LENGHT_LIMIT
    ,:DBL_TON_LIMIT
    ,:DBL_EQUP_TON
    ,:CRANE_CNT
    ,:CRANE_DESC
    ,:CRANE1
    ,:CRANE2
    ,:CRANE3
    ,:CRANE4
    ,:CRANE5
    ,:PE_AREA
    ,:ETC_AREA
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN214>
  <UPDATE_TSFN214>
    -- UPDATE_TSFN214
    UPDATE TSFN214 SET
    APP_FI = :APP_FI
    ,WGT_CAPA = :WGT_CAPA
    ,CNT_CAPA = :CNT_CAPA
    ,GC_TM_CAPA = :GC_TM_CAPA
    ,ETC_TM_CAPA = :ETC_TM_CAPA
    ,DBL_WGT_CAPA = :DBL_WGT_CAPA
    ,DBL_LENGHT_LIMIT = :DBL_LENGHT_LIMIT
    ,DBL_TON_LIMIT = :DBL_TON_LIMIT
    ,DBL_EQUP_TON = :DBL_EQUP_TON
    ,CRANE_CNT = :CRANE_CNT
    ,CRANE_DESC = :CRANE_DESC
    ,CRANE1 = :CRANE1
    ,CRANE2 = :CRANE2
    ,CRANE3 = :CRANE3
    ,CRANE4 = :CRANE4
    ,CRANE5 = :CRANE5
    ,PE_AREA = :PE_AREA
    ,ETC_AREA = :ETC_AREA
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND CAPA_GROUP_ID = :CAPA_GROUP_ID
    AND APP_ST = :APP_ST
  </UPDATE_TSFN214>
  <DELETE_TSFN214>
    -- DELETE_TSFN214
    DELETE TSFN214
    WHERE
    CASE_NO = :CASE_NO
    AND CAPA_GROUP_ID = :CAPA_GROUP_ID
    AND APP_ST = :APP_ST
  </DELETE_TSFN214>
  <!--TSFN214 END-->

  <!--TSFN201 BEGIN-->
  <TSFN201_CASE_NO_SHP_REV_SELECT>
    --TSFN201_CASE_NO_SHP_REV_SELECT
    --멀티호선
    SELECT  A.CASE_NO,
    A.FIG_SHP,
    A.ITM_COD,
    A.ACT_COD,
    A.SHP_COD,
    A.MIS_COD,
    A.ITM_DES,
    A.REP_BLK_LIST,
    A.CRANE1,
    A.CRANE1_CNT,
    A.CRANE2,
    A.CRANE2_CNT,
    A.CRANE3,
    A.CRANE3_CNT,
    A.MID_ST,
    A.PLN_ST,
    A.EST_ST,
    A.RST_ST,
    A.MUL_WGT,
    A.GC_EREC_TIME,
    A.GC_PE_TIME,
    A.TRANS_PE_TIME,
    A.ETC_SUPP_TIME,
    A.DUAL_YN,
    A.DUAL_WEIGHT,
    A.DUAL_FACTOR,
    A.USE_YN,
    A.RMK,
    A.IP,
    A.PID,
    A.IN_DAT,
    A.UP_DAT,
    A.IN_USR,
    A.UP_USR
    FROM TSFN201 A
    WHERE
    A.CASE_NO = :CASE_NO
    AND A.FIG_SHP IN :WHERE_FIG_SHP
    AND A.FIG_NO = :FIG_NO
    ORDER BY A.FIG_SHP, A.ITM_COD
  </TSFN201_CASE_NO_SHP_REV_SELECT>
  <TSFN201_CASE_NO_SHP_REV_CRANE_SELECT>
    --TSFN201_CASE_NO_SHP_REV_CRANE_SELECT
    --멀티호선
    SELECT * FROM TSFN201
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP IN :WHERE_FIG_SHP
    AND (CRANE1 = :CAPA_GROUP_ID OR CRANE2 = :CAPA_GROUP_ID)
    AND FIG_NO = :FIG_NO
    ORDER BY FIG_SHP, ITM_COD
  </TSFN201_CASE_NO_SHP_REV_CRANE_SELECT>

  <TSFN201_CASE_NO_FIG_SHP_ITM_COD_SELECT>
    -- TSFN201_CASE_NO_FIG_SHP_ITM_COD_SELECT
    SELECT
    *
    FROM
    TSFN201
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND ITM_COD = :ITM_COD
  </TSFN201_CASE_NO_FIG_SHP_ITM_COD_SELECT>
  <!--TSFN201 END-->

  <!--TSFN207 BEGIN-->
  <TSFN207_CASE_NO_SHP_REV_SELECT>
    --TSFN207_CASE_NO_SHP_REV_SELECT
    --멀티호선
    SELECT *
    FROM TSFN207
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP IN :WHERE_FIG_SHP
    AND FIG_NO = :FIG_NO
    ORDER BY FIG_SHP, ACT_COD, LOW_BLK
  </TSFN207_CASE_NO_SHP_REV_SELECT>
  <TSFN207_CASE_NO_SHP_REV_CRANE_SELECT>
    --TSFN207_CASE_NO_SHP_REV_SELECT
    --멀티호선
    SELECT *
    FROM TSFN207
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP IN :WHERE_FIG_SHP
    AND (CRANE1 = :CAPA_GROUP_ID OR CRANE2 = :CAPA_GROUP_ID)
    AND FIG_NO = :FIG_NO
    ORDER BY FIG_SHP, ACT_COD, LOW_BLK
  </TSFN207_CASE_NO_SHP_REV_CRANE_SELECT>

  <TSFN207_TSEA002_TSED007_FIG_SHP_SELECT>
    --TSFN207_TSEA002_TSED007_FIG_SHP_SELECT
    SELECT
    TA.CASE_NO
    ,TA.FIG_SHP
    ,TA.LOW_BLK
    ,TA.ITM_COD
    ,TA.ACT_COD
    ,TA.N41_ACT_COD
    ,TA.SHP_COD
    ,TA.ITM_DES
    ,TA.LAYER
    ,TA.SEQ_NO
    ,TA.DECK
    ,TA.PE_AREA
    ,TA.PE_TYPE
    ,TA.LOW_SIZE
    ,TA.ITM_SIZE
    ,TA.CRANE1
    ,TA.CRANE2
    ,TA.CRANE3
    ,TA.CRANE1_CNT
    ,TA.CRANE2_CNT
    ,TA.CRANE3_CNT
    ,TA.BLK_PE_OST_MID
    ,TA.BLK_PE_OST_PS
    ,TA.BLK_PE_OST_PP
    ,TA.L41_ST
    ,TA.N41_ST
    ,TA.L41_N41_OST
    ,TA.MID_ST
    ,TA.PLN_ST
    ,TA.EST_ST
    ,TA.RST_ST
    ,TA.ITM_MUL_WGT
    ,TA.LOW_MUL_WGT
    ,TA.GC_PE_TIME
    ,TA.TRANS_PE_TIME
    ,TA.ETC_SUPP_TIME
    ,TA.PE_AREA_ST
    ,TA.PE_AREA_FI
    ,CASE WHEN TA.LOW_NUMBER = 1 THEN TA.PE_AREA_VOL ELSE 0 END PE_AREA_VOL
    ,TA.USE_YN
    ,TA.RMK
    ,TA.IP
    ,TA.PID
    ,TA.IN_DAT
    ,TA.UP_DAT
    ,TA.IN_USR
    ,TA.UP_USR
    ,TA.FIG_NO
    ,TA.SHP_REV
    ,TA.IO_DIV
    FROM (
    SELECT
    :CASE_NO CASE_NO
    ,A.FIG_SHP
    ,NVL(C.LOW_BLK, B.LOW_BLK) LOW_BLK
    ,NVL(C.ITM_COD, B.ITM_COD) ITM_COD
    ,A.ACT_COD
    ,E.ACT_COD N41_ACT_COD
    ,A.SHP_COD
    ,A.ACT_DES ITM_DES
    ,NVL(C.LAYER, B.LAYER) LAYER
    ,NVL(C.SEQ_NO, B.SEQ_NO) SEQ_NO
    ,NVL(C.DECK, B.DECK) DECK
    --,NVL(C.PE_AREA, G.PE_AREA) PE_AREA
    -- PE_AREA 값 가져오는 부분 수정(2019.10.02 아미시스 왕정휘)
    ,NVL(C.PE_AREA, F.PE_AREA) PE_AREA
    ,C.PE_TYPE
    ,G.BLK_LEN_BD||'x'||G.BLK_WID_BD||'x'||G.BLK_HEI_BD LOW_SIZE
    ,F.BLK_LEN_BD ||'x'||F.BLK_WID_BD||'x'||F.BLK_HEI_BD ITM_SIZE
    ,C.CRANE1
    ,C.CRANE2
    ,C.CRANE3
    ,C.CRANE1_CNT
    ,C.CRANE2_CNT
    ,C.CRANE3_CNT
    ,NVL(C.BLK_PE_OST_MID, B.BLK_PE_OST_PS) BLK_PE_OST_MID
    ,NVL(C.BLK_PE_OST_PS, B.BLK_PE_OST_PS) BLK_PE_OST_PS
    ,NVL(C.BLK_PE_OST_PP, B.BLK_PE_OST_PP) BLK_PE_OST_PP
    ,NVL(C.L41_ST, A.PLN_ST) L41_ST
    ,NVL(C.N41_ST, E.PLN_ST) N41_ST
    ,NVL(C.L41_N41_OST, FC_GET_OFFSET(E.PLN_ST, A.PLN_ST)) L41_N41_OST
    ,NVL(C.MID_ST, FN_CALC_NET_DAY_FROM(A.PLN_ST, B.BLK_PE_OST_PS)) MID_ST
    ,NVL(C.PLN_ST, FN_CALC_NET_DAY_FROM(A.PLN_ST, B.BLK_PE_OST_PS)) PLN_ST
    ,C.EST_ST
    ,C.RST_ST
    ,NVL(C.ITM_MUL_WGT, F.WGT_TOT) ITM_MUL_WGT
    ,NVL(C.LOW_MUL_WGT, G.WGT_TOT) LOW_MUL_WGT
    ,C.GC_PE_TIME
    ,C.TRANS_PE_TIME
    ,C.ETC_SUPP_TIME
    ,NVL(C.PE_AREA_ST, NVL(C.PLN_ST, FN_CALC_NET_DAY_FROM(A.PLN_ST, B.BLK_PE_OST_PS))) PE_AREA_ST
    ,NVL(C.PE_AREA_FI, NVL(C.N41_ST, E.PLN_ST)) PE_AREA_FI
    ,(CASE WHEN NVL(C.LAYER, B.LAYER) = 1 THEN
    --NVL(C.PE_AREA_VOL, NVL(G.BLK_LEN_BD,0) * NVL(G.BLK_WID_BD,0)) ELSE 0 END)  PE_AREA_VOL
    NVL(C.PE_AREA_VOL, NVL(F.BLK_LEN_BD,0) * NVL(F.BLK_WID_BD,0)) ELSE 0 END)  PE_AREA_VOL

    ,row_number() over ( partition by NVL(C.ITM_COD, B.ITM_COD) order by   NVL(C.LAYER, B.LAYER),NVL(C.LOW_BLK, B.LOW_BLK) ) LOW_NUMBER
    ,C.USE_YN
    ,C.RMK
    ,C.IP
    ,C.PID
    ,C.IN_DAT
    ,C.UP_DAT
    ,C.IN_USR
    ,C.UP_USR
    ,:FIG_NO FIG_NO
    ,:SHP_REV SHP_REV
    ,C.IO_DIV
    FROM  TSEA002 A, TSED007 B,  TSFN207 C, TSEA002 E, TSED002 F, TSED002 G
    WHERE A.FIG_SHP = :FIG_SHP
    AND A.WRK_STG IN ('K', 'L') AND A.WRK_TYP = '41'
    AND B.FIG_SHP = A.FIG_SHP AND A.ITM_COD = B.ITM_COD
    AND :CASE_NO = C.CASE_NO(+)
    AND B.LOW_BLK = C.ITM_COD(+)
    AND A.FIG_SHP = E.FIG_SHP(+)
    AND FC_GET_P3_ACT(A.FIG_SHP,A.ACT_COD) = E.ACT_COD(+)
    AND A.FIG_SHP = F.FIG_SHP(+) AND A.ITM_COD = F.ITM_COD(+)
    AND B.FIG_SHP = G.FIG_SHP(+) AND B.LOW_BLK = G.ITM_COD(+)
    --ORDER BY PLN_ST, ITM_COD, ITM_DES
    ) TA
    ORDER BY TA.LOW_BLK,TA.PLN_ST, TA.ITM_COD, TA.ITM_DES
  </TSFN207_TSEA002_TSED007_FIG_SHP_SELECT>

  <TSFN207_TSEA002_TSED007_FIG_SHP_BP_SELECT>
    -- TSFN207_TSEA002_TSED007_FIG_SHP_BP_SELECT
    SELECT TA.CASE_NO
    ,TA.FIG_SHP
    ,TA.LOW_BLK
    ,TA.ITM_COD
    ,TA.ACT_COD
    ,TA.N41_ACT_COD
    ,TA.SHP_COD
    ,TA.ITM_DES
    ,TA.LAYER
    ,TA.SEQ_NO
    ,TA.DECK
    ,TA.PE_AREA
    ,TA.PE_TYPE
    ,TA.LOW_SIZE
    ,TA.ITM_SIZE
    ,TA.CRANE1
    ,TA.CRANE2
    ,TA.CRANE3
    ,TA.CRANE1_CNT
    ,TA.CRANE2_CNT
    ,TA.CRANE3_CNT
    ,TA.BLK_PE_OST_MID
    ,TA.BLK_PE_OST_PS
    ,TA.BLK_PE_OST_PP
    ,TA.L41_ST
    ,TA.N41_ST
    ,TA.L41_N41_OST
    ,TA.MID_ST
    ,TA.PLN_ST
    ,TA.EST_ST
    ,TA.RST_ST
    ,TA.ITM_MUL_WGT
    ,TA.LOW_MUL_WGT
    ,TA.GC_PE_TIME
    ,TA.TRANS_PE_TIME
    ,TA.ETC_SUPP_TIME
    ,TA.PE_AREA_ST
    ,TA.PE_AREA_FI
    ,CASE WHEN TA.LOW_NUMBER = 1 THEN TA.PE_AREA_VOL ELSE 0 END PE_AREA_VOL
    ,TA.USE_YN
    ,TA.RMK
    ,TA.IP
    ,TA.PID
    ,TA.IN_DAT
    ,TA.UP_DAT
    ,TA.IN_USR
    ,TA.UP_USR
    ,TA.FIG_NO
    ,TA.SHP_REV
    ,TA.IO_DIV
    FROM (
    SELECT
    :CASE_NO CASE_NO
    ,A.FIG_SHP
    ,NVL(C.LOW_BLK, B.LOW_BLK) LOW_BLK
    ,NVL(C.ITM_COD, B.ITM_COD) ITM_COD
    ,A.ACT_COD
    ,E.ACT_COD N41_ACT_COD
    ,A.SHP_COD
    ,A.ACT_DES ITM_DES
    ,NVL(C.LAYER, B.LAYER) LAYER
    ,NVL(C.SEQ_NO, B.SEQ_NO) SEQ_NO
    ,NVL(C.DECK, B.DECK) DECK
    --,NVL(C.PE_AREA, G.PE_AREA) PE_AREA
    -- PE_AREA 값 가져오는 부분 수정(2019.10.02 아미시스 왕정휘)
    ,NVL(C.PE_AREA, F.PE_AREA) PE_AREA
    ,C.PE_TYPE
    ,G.BLK_LEN_BD||'x'||G.BLK_WID_BD||'x'||G.BLK_HEI_BD LOW_SIZE
    ,F.BLK_LEN_BD ||'x'||F.BLK_WID_BD||'x'||F.BLK_HEI_BD ITM_SIZE
    ,C.CRANE1
    ,C.CRANE2
    ,C.CRANE3
    ,C.CRANE1_CNT
    ,C.CRANE2_CNT
    ,C.CRANE3_CNT
    ,NVL(C.BLK_PE_OST_MID, B.BLK_PE_OST_PS) BLK_PE_OST_MID
    ,NVL(C.BLK_PE_OST_PS, B.BLK_PE_OST_PS) BLK_PE_OST_PS
    ,NVL(C.BLK_PE_OST_PP, B.BLK_PE_OST_PP) BLK_PE_OST_PP
    ,NVL(C.L41_ST, A.PLN_ST) L41_ST
    ,NVL(C.N41_ST, E.PLN_ST) N41_ST
    ,NVL(C.L41_N41_OST, FC_GET_OFFSET(E.PLN_ST, A.PLN_ST)) L41_N41_OST
    ,NVL(C.MID_ST, FN_CALC_NET_DAY_FROM(A.PLN_ST, B.BLK_PE_OST_PS)) MID_ST
    ,NVL(C.PLN_ST, FN_CALC_NET_DAY_FROM(A.PLN_ST, B.BLK_PE_OST_PS)) PLN_ST
    ,C.EST_ST
    ,C.RST_ST
    ,NVL(C.ITM_MUL_WGT, F.WGT_TOT) ITM_MUL_WGT
    ,NVL(C.LOW_MUL_WGT, G.WGT_TOT) LOW_MUL_WGT
    ,C.GC_PE_TIME
    ,C.TRANS_PE_TIME
    ,C.ETC_SUPP_TIME
    ,NVL(C.PE_AREA_ST, NVL(C.PLN_ST, FN_CALC_NET_DAY_FROM(A.PLN_ST, B.BLK_PE_OST_PS))) PE_AREA_ST
    ,NVL(C.PE_AREA_FI, NVL(C.N41_ST, E.PLN_ST)) PE_AREA_FI
    ,(CASE WHEN NVL(C.LAYER, B.LAYER) = 1 THEN
    NVL(C.PE_AREA_VOL, NVL(G.BLK_LEN_BD,0) * NVL(G.BLK_WID_BD,0)) ELSE 0 END)  PE_AREA_VOL
    ,row_number() over ( partition by NVL(C.ITM_COD, B.ITM_COD) order by  NVL(C.LAYER, B.LAYER),NVL(C.LOW_BLK, B.LOW_BLK) ) LOW_NUMBER
    ,C.USE_YN
    ,C.RMK
    ,C.IP
    ,C.PID
    ,C.IN_DAT
    ,C.UP_DAT
    ,C.IN_USR
    ,C.UP_USR
    ,:FIG_NO FIG_NO
    ,:SHP_REV SHP_REV
    ,C.IO_DIV
    FROM  TSEG005 A, TSEG025 B,  TSFN207 C, TSEG005 E, TSEG008 F, TSEG008 G
    WHERE A.FIG_SHP = :FIG_SHP
    AND   A.FIG_NO = :FIG_NO
    AND A.WRK_STG IN ('K', 'L') AND A.WRK_TYP = '41'
    AND B.FIG_SHP = A.FIG_SHP AND A.ITM_COD = B.ITM_COD AND B.FIG_NO = A.FIG_NO
    AND :CASE_NO = C.CASE_NO(+)
    AND B.LOW_BLK = C.ITM_COD(+)
    AND A.FIG_SHP = E.FIG_SHP
    AND A.FIG_NO = E.FIG_NO
    AND FC_GET_P3_BP_ACT(A.FIG_NO,A.FIG_SHP,A.ACT_COD) = E.ACT_COD
    AND A.FIG_SHP = F.FIG_SHP(+) AND A.ITM_COD = F.ITM_COD(+) AND A.FIG_NO = F.FIG_NO(+)
    AND B.FIG_SHP = G.FIG_SHP(+) AND B.LOW_BLK = G.ITM_COD(+) AND B.FIG_NO = G.FIG_NO(+)
    ) TA
    ORDER BY PLN_ST, ITM_COD, ITM_DES
  </TSFN207_TSEA002_TSED007_FIG_SHP_BP_SELECT>

  <TSFN207_CASE_NO_FIG_SHP_SELECT>
    --TSFN207_CASE_NO_FIG_SHP_SELECT
    SELECT * FROM TSFN207
    WHERE
    CASE_NO = :CASE_NO AND FIG_SHP = :FIG_SHP
    ORDER BY ITM_COD
  </TSFN207_CASE_NO_FIG_SHP_SELECT>

  <TSFN207_CASE_NO_FIG_SHP_ITM_COD_SELECT>
    -- TSFN207_CASE_NO_FIG_SHP_ITM_COD_SELECT
    SELECT
    *
    FROM
    TSFN207
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND ITM_COD = :ITM_COD
  </TSFN207_CASE_NO_FIG_SHP_ITM_COD_SELECT>
  <INSERT_TSFN207>
    -- INSERT_TSFN207
    INSERT INTO TSFN207 (
    CASE_NO
    ,FIG_SHP
    ,LOW_BLK
    ,ITM_COD
    ,ACT_COD
    ,N41_ACT_COD
    ,SHP_COD
    ,ITM_DES
    ,LAYER
    ,SEQ_NO
    ,DECK
    ,PE_AREA
    ,PE_TYPE
    ,LOW_SIZE
    ,ITM_SIZE
    ,CRANE1
    ,CRANE2
    ,CRANE3
    ,CRANE1_CNT
    ,CRANE2_CNT
    ,CRANE3_CNT
    ,BLK_PE_OST_MID
    ,BLK_PE_OST_PS
    ,BLK_PE_OST_PP
    ,L41_ST
    ,N41_ST
    ,L41_N41_OST
    ,MID_ST
    ,PLN_ST
    ,EST_ST
    ,RST_ST
    ,LOW_MUL_WGT
    ,ITM_MUL_WGT
    ,GC_PE_TIME
    ,TRANS_PE_TIME
    ,ETC_SUPP_TIME
    ,PE_AREA_ST
    ,PE_AREA_FI
    ,PE_AREA_VOL
    ,USE_YN
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    ,FIG_NO
    ,SHP_REV
    ,IO_DIV
    )
    VALUES (
    :CASE_NO
    ,:FIG_SHP
    ,:LOW_BLK
    ,:ITM_COD
    ,:ACT_COD
    ,:N41_ACT_COD
    ,:SHP_COD
    ,:ITM_DES
    ,:LAYER
    ,:SEQ_NO
    ,:DECK
    ,:PE_AREA
    ,:PE_TYPE
    ,:LOW_SIZE
    ,:ITM_SIZE
    ,:CRANE1
    ,:CRANE2
    ,:CRANE3
    ,:CRANE1_CNT
    ,:CRANE2_CNT
    ,:CRANE3_CNT
    ,:BLK_PE_OST_MID
    ,:BLK_PE_OST_PS
    ,:BLK_PE_OST_PP
    ,:L41_ST
    ,:N41_ST
    ,:L41_N41_OST
    ,:MID_ST
    ,:PLN_ST
    ,:EST_ST
    ,:RST_ST
    ,:LOW_MUL_WGT
    ,:ITM_MUL_WGT
    ,:GC_PE_TIME
    ,:TRANS_PE_TIME
    ,:ETC_SUPP_TIME
    ,:PE_AREA_ST
    ,:PE_AREA_FI
    ,:PE_AREA_VOL
    ,:USE_YN
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    ,:FIG_NO
    ,:SHP_REV
    ,:IO_DIV
    )
  </INSERT_TSFN207>
  <UPDATE_TSFN207>
    -- UPDATE_TSFN207
    UPDATE TSFN207 SET
    ACT_COD = :ACT_COD
    ,N41_ACT_COD = :N41_ACT_COD
    ,SHP_COD = :SHP_COD
    ,ITM_DES = :ITM_DES
    ,LAYER = :LAYER
    ,SEQ_NO = :SEQ_NO
    ,DECK = :DECK
    ,PE_AREA = :PE_AREA
    ,PE_TYPE = :PE_TYPE
    ,LOW_SIZE = :LOW_SIZE
    ,ITM_SIZE = :ITM_SIZE
    ,CRANE1 = :CRANE1
    ,CRANE2 = :CRANE2
    ,CRANE3 = :CRANE3
    ,CRANE1_CNT = :CRANE1_CNT
    ,CRANE2_CNT = :CRANE2_CNT
    ,CRANE3_CNT = :CRANE3_CNT
    ,BLK_PE_OST_MID = :BLK_PE_OST_MID
    ,BLK_PE_OST_PS = :BLK_PE_OST_PS
    ,BLK_PE_OST_PP = :BLK_PE_OST_PP
    ,L41_ST = :L41_ST
    ,N41_ST = :N41_ST
    ,L41_N41_OST = :L41_N41_OST
    ,MID_ST = :MID_ST
    ,PLN_ST = :PLN_ST
    ,EST_ST = :EST_ST
    ,RST_ST = :RST_ST
    ,LOW_MUL_WGT = :LOW_MUL_WGT
    ,ITM_MUL_WGT = :ITM_MUL_WGT
    ,GC_PE_TIME = :GC_PE_TIME
    ,TRANS_PE_TIME = :TRANS_PE_TIME
    ,ETC_SUPP_TIME = :ETC_SUPP_TIME
    ,PE_AREA_ST = :PE_AREA_ST
    ,PE_AREA_FI = :PE_AREA_FI
    ,PE_AREA_VOL = :PE_AREA_VOL
    ,USE_YN = :USE_YN
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    ,FIG_NO = :FIG_NO
    ,SHP_REV = :SHP_REV
    ,IO_DIV = :IO_DIV
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND LOW_BLK = :LOW_BLK
    AND ITM_COD = :ITM_COD
  </UPDATE_TSFN207>
  <DELETE_TSFN207>
    -- DELETE_TSFN207
    DELETE TSFN207
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND LOW_BLK = :LOW_BLK
  </DELETE_TSFN207>
  <!--TSFN207 END-->


  <!--TSFN208 BEGIN-->
  <TSFN208_CASE_NO_SELECT>
    -- TSFN208_CASE_NO_SELECT
    SELECT
    CASE_NO
    ,RES_ID
    ,RES_NAME
    ,RES_DESC
    ,APP_ST
    ,APP_FI
    ,DCK_COD1
    ,DCK_COD2
    ,PE_AREA_VOL
    ,GC_IN_VOL
    ,ETC_AREA_VOL
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSFN208
    WHERE
    CASE_NO = :CASE_NO
  </TSFN208_CASE_NO_SELECT>
  <INSERT_TSFN208>
    -- INSERT_TSFN208
    INSERT INTO TSFN208 (
    CASE_NO
    ,RES_ID
    ,RES_NAME
    ,RES_DESC
    ,APP_ST
    ,APP_FI
    ,DCK_COD1
    ,DCK_COD2
    ,PE_AREA_VOL
    ,GC_IN_VOL
    ,ETC_AREA_VOL
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:RES_ID
    ,:RES_NAME
    ,:RES_DESC
    ,:APP_ST
    ,:APP_FI
    ,:DCK_COD1
    ,:DCK_COD2
    ,:PE_AREA_VOL
    ,:GC_IN_VOL
    ,:ETC_AREA_VOL
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN208>
  <UPDATE_TSFN208>
    -- UPDATE_TSFN208
    UPDATE TSFN208 SET
    RES_NAME = :RES_NAME
    ,RES_DESC = :RES_DESC
    ,APP_FI = :APP_FI
    ,DCK_COD1 = :DCK_COD1
    ,DCK_COD2 = :DCK_COD2
    ,PE_AREA_VOL = :PE_AREA_VOL
    ,GC_IN_VOL = :GC_IN_VOL
    ,ETC_AREA_VOL = :ETC_AREA_VOL
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND RES_ID = :RES_ID
    AND APP_ST = :APP_ST
  </UPDATE_TSFN208>
  <DELETE_TSFN208>
    -- DELETE_TSFN208
    DELETE TSFN208
    WHERE
    CASE_NO = :CASE_NO
    AND RES_ID = :RES_ID
    AND APP_ST = :APP_ST
  </DELETE_TSFN208>
  <!--TSFN208 END-->

  <!--TSFN207 BEGIN-->
  <TSFN207_CASE_NO_FIG_SHP_LOW_BLK_SELECT>
    -- TSFN207_CASE_NO_FIG_SHP_LOW_BLK_SELECT
    SELECT
    *
    FROM
    TSFN207
    WHERE
    CASE_NO = :CASE_NO
    AND FIG_SHP = :FIG_SHP
    AND LOW_BLK = :LOW_BLK
  </TSFN207_CASE_NO_FIG_SHP_LOW_BLK_SELECT>
  <!--TSFN207 END-->

  <!--TSFN208 BEGIN-->
  <TSFN208_SELECT>
    -- TSFN208_SELECT
    SELECT
    *
    FROM
    TSFN208
    WHERE
    CASE_NO = :CASE_NO
  </TSFN208_SELECT>
  <!--TSFN208 END-->

  <!--TSFN209 BEGIN-->
  <TSFN209_CASE_NO_RES_ID_SELECT>
    --TSFN209_CASE_NO_RES_ID_SELECT
    SELECT
    *
    FROM
    TSFN209
    WHERE
    CASE_NO = :CASE_NO
    AND RES_ID = :RES_ID
    ORDER BY APP_ST
  </TSFN209_CASE_NO_RES_ID_SELECT>
  <TSFN209_CASE_NO_RES_ID_APP_ST_SELECT>
    -- TSFN209_CASE_NO_RES_ID_APP_ST_SELECT
    SELECT
    *
    FROM
    TSFN209
    WHERE
    CASE_NO = :CASE_NO
    AND RES_ID = :RES_ID
    AND APP_ST = :APP_ST
  </TSFN209_CASE_NO_RES_ID_APP_ST_SELECT>
  <INSERT_TSFN209>
    -- INSERT_TSFN209
    INSERT INTO TSFN209 (
    CASE_NO
    ,RES_ID
    ,APP_ST
    ,APP_FI
    ,PE_AREA_VOL
    ,GC_IN_VOL
    ,ETC_AREA_VOL
    ,RMK
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :CASE_NO
    ,:RES_ID
    ,:APP_ST
    ,:APP_FI
    ,:PE_AREA_VOL
    ,:GC_IN_VOL
    ,:ETC_AREA_VOL
    ,:RMK
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSFN209>
  <UPDATE_TSFN209>
    -- UPDATE_TSFN209
    UPDATE TSFN209 SET
    APP_FI = :APP_FI
    ,PE_AREA_VOL = :PE_AREA_VOL
    ,GC_IN_VOL = :GC_IN_VOL
    ,ETC_AREA_VOL = :ETC_AREA_VOL
    ,RMK = :RMK
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    CASE_NO = :CASE_NO
    AND RES_ID = :RES_ID
    AND APP_ST = :APP_ST
  </UPDATE_TSFN209>
  <DELETE_TSFN209>
    -- DELETE_TSFN209
    DELETE TSFN209
    WHERE
    CASE_NO = :CASE_NO
    AND RES_ID = :RES_ID
    AND APP_ST = :APP_ST
  </DELETE_TSFN209>
  <!--TSFN209 END-->
  <PE_SERVICE_REPORT>
    SELECT  B.CASE_NO, B.FIG_SHP, B.LOW_BLK, B.ITM_COD, B.ACT_COD, B.N41_ACT_COD, B.SHP_COD, B.ITM_DES,
    B.LAYER, B.SEQ_NO, B.DECK,
    CASE WHEN B.PE_AREA IS NOT NULL THEN 'GCIN' ELSE 'GCOUT' END GC_GUBUN,
    B.PE_TYPE, B.LOW_SIZE, B.ITM_SIZE,
    B.CRANE1, B.CRANE1_CNT,B.CRANE2, B.CRANE2_CNT,B.CRANE3, B.CRANE3_CNT,
    B.BLK_PE_OST_MID, B.BLK_PE_OST_PS, B.BLK_PE_OST_PP, B.L41_ST, B.N41_ST,
    B.L41_N41_OST, B.MID_ST, B.PLN_ST, B.EST_ST, B.RST_ST, B.LOW_MUL_WGT,
    B.ITM_MUL_WGT, B.GC_PE_TIME, B.TRANS_PE_TIME, B.ETC_SUPP_TIME, B.USE_YN, B.RMK,
    B.PE_AREA_ST, B.PE_AREA_FI, B.PE_AREA_VOL,
    C.ERP_DPT_COD DPT_COD
    FROM    OPT.TSFN203 A, OPT.TSFN207 B,
    (
    SELECT FIG_SHP,ACT_COD,ERP_DPT_COD
    FROM    OPT.TSEA002
    WHERE (ERP_DPT_COD = 'C71000' OR ERP_DPT_COD = 'C74000' OR ERP_DPT_COD = 'C8C000' OR ERP_DPT_COD = 'C94000')
    AND     SUBSTR(ITM_COD,1,3) != 'M31'
    AND     SUBSTR(ITM_COD,1,3) != 'H11'
    AND     SUBSTR(ITM_COD,1,3) != 'H23'
    AND     SUBSTR(ITM_COD,5,1) IN ('2','3')
    UNION ALL
    SELECT FIG_SHP,ACT_COD,DPT_COD
    FROM    OPT.TSFA001
    WHERE (DPT_COD = 'C71000' OR DPT_COD = 'C74000' OR DPT_COD = 'C8C000' OR DPT_COD = 'C94000')
    AND     SUBSTR(ITM_COD,1,3) != 'M31'
    AND     SUBSTR(ITM_COD,1,3) != 'H11'
    AND     SUBSTR(ITM_COD,1,3) != 'H23'
    AND     SUBSTR(ITM_COD,5,1) IN ('2','3')
    ) C
    WHERE   A.CASE_NO = :CASE_NO
    AND     A.CASE_NO = B.CASE_NO
    AND     A.FIG_SHP = B.FIG_SHP
    AND     A.DCK_COD IN (:WHERE_DOCK)
    AND     ((:ST_DATE BETWEEN B.PE_AREA_ST AND B.PE_AREA_FI)
    OR      (:FI_DATE BETWEEN B.PE_AREA_ST AND B.PE_AREA_FI )
    OR      (B.PE_AREA_ST BETWEEN :ST_DATE AND :FI_DATE )
    OR      (B.PE_AREA_FI BETWEEN :ST_DATE AND :FI_DATE ))
    AND     SUBSTR(B.ITM_COD,1,3) != 'M31'
    AND     SUBSTR(B.ITM_COD,1,3) != 'H11'
    AND     SUBSTR(B.ITM_COD,1,3) != 'H23'
    AND     SUBSTR(B.ITM_COD,5,1) IN ('2','3')
    AND     B.FIG_SHP = C.FIG_SHP
    AND     B.ACT_COD = C.ACT_COD
    AND     C.ERP_DPT_COD IN (:WHERE_DEPT)
  </PE_SERVICE_REPORT>
  <PE_CAPA_SERVICE_REPORT>
    SELECT  B.CASE_NO, B.RES_ID, B.APP_ST, B.APP_FI, B.PE_AREA_VOL, B.GC_IN_VOL, B.ETC_AREA_VOL,B.RMK,
    (CASE WHEN A.DCK_COD1 IN ('1','2') OR A.DCK_COD2 IN ('1','2') THEN 'C71000' ELSE
    (CASE WHEN A.DCK_COD1 = '3' OR A.DCK_COD2 = '3' THEN 'C74000' ELSE
    (CASE WHEN A.DCK_COD1 IN ('4','5') OR A.DCK_COD2 IN ('4','5') THEN 'C8C000' ELSE 'C94000' END) END) END) DPT_COD
    FROM    OPT.TSFN208 A, OPT.TSFN209 B
    WHERE   A.CASE_NO = :CASE_NO
    AND     A.CASE_NO = B.CASE_NO
    AND     A.RES_ID = B.RES_ID
    AND     (A.DCK_COD1 IN (:WHERE_DOCK) OR A.DCK_COD2 IN (:WHERE_DOCK))
    AND     ((:ST_DATE BETWEEN B.APP_ST AND B.APP_FI)
    OR      (:FI_DATE BETWEEN B.APP_ST AND B.APP_FI)
    OR      (B.APP_ST BETWEEN :ST_DATE AND :FI_DATE)
    OR      (B.APP_FI BETWEEN :ST_DATE AND :FI_DATE))
  </PE_CAPA_SERVICE_REPORT>
  <!--GCRANE SERVICE TIME REPORT BEGIN-->
  <GCRANE_SERVICE_TIME_MONTHLY_REPORT>
    --GCRANE_SERVICE_TIME_MONTHLY_REPORT
    SELECT X.DPT_DES, X.DCK_COD
    ,(CASE WHEN X.DCK_COD IN ('1','2') THEN 'C71000' ELSE
    (CASE WHEN X.DCK_COD = '3' THEN 'C74000' ELSE
    (CASE WHEN X.DCK_COD IN ('4','5') THEN 'C8C000' ELSE 'C94000' END) END) END) DPT_COD
    , X.FIG_SHP, X.YEAR_MON, SUM(X.GC_TIME) GC_TIME
    FROM
    (SELECT A.FIG_SHP, B.DCK_COD
    , (CASE WHEN B.DCK_COD IN ('1','2') THEN '건조1부' ELSE
    (CASE WHEN B.DCK_COD = '3' THEN '건조2부' ELSE
    (CASE WHEN B.DCK_COD IN ('4','5') THEN '건조3부' ELSE '건조5부' END) END) END) DPT_DES
    , SUBSTR(A.PLN_ST, 1, 6) YEAR_MON , A.PLN_ST
    , NVL(A.GC_EREC_TIME,0) GC_TIME
    FROM TSFN201 A, TSFN203 B
    WHERE
    A.CASE_NO = :CASE_NO
    AND A.CASE_NO = B.CASE_NO
    AND A.FIG_SHP = B.FIG_SHP
    AND B.DCK_COD IN (:WHERE_DOCK)
    AND A.PLN_ST BETWEEN :ST_DATE AND :FI_DATE
    AND NVL(A.GC_EREC_TIME,0) &gt; 0
    UNION ALL
    SELECT A.FIG_SHP, B.DCK_COD
    , (CASE WHEN B.DCK_COD IN ('1','2') THEN '건조1부' ELSE
    (CASE WHEN B.DCK_COD = '3' THEN '건조2부' ELSE
    (CASE WHEN B.DCK_COD IN ('4','5') THEN '건조3부' ELSE '건조5부' END) END) END) DPT_DES
    , SUBSTR(A.PLN_ST, 1, 6) YEAR_MON , A.PLN_ST
    , NVL(A.GC_PE_TIME,0) GC_TIME
    FROM TSFN207 A, TSFN203 B
    WHERE
    A.CASE_NO = :CASE_NO
    AND A.CASE_NO = B.CASE_NO
    AND A.FIG_SHP = B.FIG_SHP
    AND B.DCK_COD IN (:WHERE_DOCK)
    AND A.PLN_ST BETWEEN :ST_DATE AND :FI_DATE
    AND NVL(A.GC_PE_TIME,0) &gt; 0) X
    GROUP BY X.DPT_DES, X.DCK_COD, X.FIG_SHP, X.YEAR_MON
  </GCRANE_SERVICE_TIME_MONTHLY_REPORT>
  <GCRANE_SERVICE_TIME_DAILY_REPORT>
    --GCRANE_SERVICE_TIME_DAILY_REPORT
    SELECT  X.DPT_DES, X.DCK_COD
    ,(CASE WHEN X.DCK_COD IN ('1','2') THEN 'C71000' ELSE
    (CASE WHEN X.DCK_COD = '3' THEN 'C74000' ELSE
    (CASE WHEN X.DCK_COD IN ('4','5') THEN 'C8C000' ELSE 'C94000' END) END) END) DPT_COD
    , X.FIG_SHP, X.PLN_ST, SUM(X.GC_TIME) GC_TIME
    FROM (SELECT A.FIG_SHP, B.DCK_COD
    , (CASE WHEN B.DCK_COD IN ('1','2') THEN '건조1부' ELSE
    (CASE WHEN B.DCK_COD = '3' THEN '건조2부' ELSE
    (CASE WHEN B.DCK_COD IN ('4','5') THEN '건조3부' ELSE '건조5부' END) END) END) DPT_DES
    , SUBSTR(A.PLN_ST, 1, 6) YEAR_MON , A.PLN_ST
    , SUM(NVL(A.GC_EREC_TIME,0)) GC_TIME
    FROM TSFN201 A, TSFN203 B
    WHERE
    A.CASE_NO = :CASE_NO
    AND A.CASE_NO = B.CASE_NO
    AND A.FIG_SHP = B.FIG_SHP
    AND B.DCK_COD IN (:WHERE_DOCK)
    AND A.PLN_ST BETWEEN  :ST_DATE AND :FI_DATE
    AND NVL(A.GC_EREC_TIME,0) &gt; 0
    GROUP BY A.FIG_SHP, B.DCK_COD, A.PLN_ST
    UNION
    SELECT A.FIG_SHP, B.DCK_COD
    , (CASE WHEN B.DCK_COD IN ('1','2') THEN '건조1부' ELSE
    (CASE WHEN B.DCK_COD = '3' THEN '건조2부' ELSE
    (CASE WHEN B.DCK_COD IN ('4','5') THEN '건조3부' ELSE '건조5부' END) END) END) DPT_DES
    , SUBSTR(A.PLN_ST, 1, 6) YEAR_MON , A.PLN_ST
    , SUM(NVL(A.GC_PE_TIME,0)) GC_TIME
    FROM TSFN207 A, TSFN203 B
    WHERE
    A.CASE_NO = :CASE_NO
    AND A.CASE_NO = B.CASE_NO
    AND A.FIG_SHP = B.FIG_SHP
    AND B.DCK_COD IN (:WHERE_DOCK)
    AND A.PLN_ST BETWEEN  :ST_DATE AND :FI_DATE
    AND NVL(A.GC_PE_TIME,0) &gt; 0
    GROUP BY A.FIG_SHP, B.DCK_COD, A.PLN_ST  ) X
    GROUP BY X.DPT_DES, X.DCK_COD, X.FIG_SHP, X.PLN_ST
  </GCRANE_SERVICE_TIME_DAILY_REPORT>
  <GCRANE_SERVICE_TIME_REPORT_DETAIL>
    SELECT A.FIG_SHP, B.DCK_COD, A.ITM_COD, A.ACT_COD, A.ITM_DES, '' LOW_SIZE, '' ITM_SIZE
    , (CASE WHEN B.DCK_COD IN ('1','2') THEN '건조1부' ELSE
    (CASE WHEN B.DCK_COD = '3' THEN '건조2부' ELSE
    (CASE WHEN B.DCK_COD IN ('4','5') THEN '건조3부' ELSE '건조5부' END) END) END) DPT_DES
    , SUBSTR(A.PLN_ST, 1, 6) YEAR_MON , A.PLN_ST
    , NVL(A.GC_EREC_TIME,0) GC_TIME
    FROM TSFN201 A, TSFN203 B
    WHERE
    A.CASE_NO = :CASE_NO
    AND A.CASE_NO = B.CASE_NO
    AND A.FIG_SHP = B.FIG_SHP
    AND B.DCK_COD IN (:WHERE_DOCK)
    AND A.PLN_ST BETWEEN :ST_DATE AND :FI_DATE
    AND NVL(A.GC_EREC_TIME,0) &gt; 0
    UNION ALL
    SELECT A.FIG_SHP, B.DCK_COD, A.ITM_COD, A.ACT_COD, A.ITM_DES, A.LOW_SIZE, A.ITM_SIZE
    , (CASE WHEN B.DCK_COD IN ('1','2') THEN '건조1부' ELSE
    (CASE WHEN B.DCK_COD = '3' THEN '건조2부' ELSE
    (CASE WHEN B.DCK_COD IN ('4','5') THEN '건조3부' ELSE '건조5부' END) END) END) DPT_DES
    , SUBSTR(A.PLN_ST, 1, 6) YEAR_MON , A.PLN_ST
    , NVL(A.GC_PE_TIME,0) GC_TIME
    FROM TSFN207 A, TSFN203 B
    WHERE
    A.CASE_NO = :CASE_NO
    AND A.CASE_NO = B.CASE_NO
    AND A.FIG_SHP = B.FIG_SHP
    AND B.DCK_COD IN (:WHERE_DOCK)
    AND A.PLN_ST BETWEEN :ST_DATE AND :FI_DATE
    AND NVL(A.GC_PE_TIME,0) &gt; 0
  </GCRANE_SERVICE_TIME_REPORT_DETAIL>
  <TSFN214_DAILY_DPT_CAPA_SELECT>
    --TSFN214_DAILY_DPT_CAPA_SELECT
    SELECT A.DCK_COD1, A.DCK_COD2, B.APP_ST, B.APP_FI, B.GC_TM_CAPA
    FROM TSFN213 A, TSFN214 B
    WHERE A.CASE_NO =:CASE_NO  AND A.DPT_COD = :DPT_COD
    AND NOT ( B.APP_ST &gt; :FI_DATE  OR :ST_DATE &gt; B.APP_FI)
    AND A.CASE_NO = B.CASE_NO AND A.CAPA_GROUP_ID = B.CAPA_GROUP_ID
  </TSFN214_DAILY_DPT_CAPA_SELECT>
  <!--GCRANE SERVICE TIME REPORT END-->

  <!--TSAG131 BEGIN-->
  <TSAG131_SELECT>
    -- TSAG131_SELECT
    SELECT
    STDMHF
    ,STDTYP
    ,STDMHF_NM
    ,ARBEI
    ,UNIT
    ,CHG_FACTOR
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSAG131
  </TSAG131_SELECT>
  <INSERT_TSAG131>
    -- INSERT_TSAG131
    INSERT INTO TSAG131 (
    STDMHF
    ,STDTYP
    ,STDMHF_NM
    ,ARBEI
    ,UNIT
    ,CHG_FACTOR
    ,IP
    ,PID
    ,IN_DAT
    ,IN_USR
    )
    VALUES (
    :STDMHF
    ,:STDTYP
    ,:STDMHF_NM
    ,:ARBEI
    ,:UNIT
    ,:CHG_FACTOR
    ,:IP
    ,:PID
    ,TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,:IN_USR
    )
  </INSERT_TSAG131>
  <UPDATE_TSAG131>
    -- UPDATE_TSAG131
    UPDATE TSAG131 SET
    STDTYP = :STDTYP
    ,STDMHF_NM = :STDMHF_NM
    ,ARBEI = :ARBEI
    ,UNIT = :UNIT
    ,CHG_FACTOR = :CHG_FACTOR
    ,IP = :IP
    ,PID = :PID
    ,UP_DAT = TO_CHAR (SYSDATE, 'YYYYMMDDHH24MI')
    ,UP_USR = :UP_USR
    WHERE
    STDMHF = :STDMHF
  </UPDATE_TSAG131>
  <DELETE_TSAG131>
    -- DELETE_TSAG131
    DELETE TSAG131
    WHERE
    STDMHF = :STDMHF
  </DELETE_TSAG131>
  <!--TSAG131 END-->

  <!--TSAG131 BEGIN-->
  <TSAG131_STDMHF_SELECT>
    -- TSAG131_STDMHF_SELECT
    SELECT
    STDMHF
    ,STDTYP
    ,STDMHF_NM
    ,ARBEI
    ,UNIT
    ,CHG_FACTOR
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSAG131
    WHERE
    STDMHF = :STDMHF
  </TSAG131_STDMHF_SELECT>
  <TSAG131_STDMHF_SELECTALL>
    -- TSAG131_STDMHF_SELECT
    SELECT
    STDMHF
    ,STDTYP
    ,STDMHF_NM
    ,ARBEI
    ,UNIT
    ,CHG_FACTOR
    ,IP
    ,PID
    ,IN_DAT
    ,UP_DAT
    ,IN_USR
    ,UP_USR
    FROM
    TSAG131

  </TSAG131_STDMHF_SELECTALL>
  <!--TSAG131 END-->

<!--TSFG006 BEGIN-->
<TSFG006_FIG_NO_FIG_SHP_SELECT>
  -- TSFG006_FIG_NO_FIG_SHP_SELECT
  SELECT
  A.FIG_NO
  ,A.FIG_SHP
  ,A.ACT_COD
  ,A.WRK_STG
  ,A.WRK_TYP
  ,A.MATNR
  ,A.MAKTX
  ,A.ZZMAKTX1
  ,A.ZZPUMCOD
  --20.08.24
  --,B.STDMHF_NM
  ,(SELECT STDMHF_NM FROM TSAG131 WHERE STDMHF = A.ZZPUMCOD) AS STDMHF_NM
  ,A.MENGE
  ,A.MEINS
  ,A.CHG_FACTOR
  ,A.CHG_QTY_MUL
  ,A.BRGEW
  ,A.ZIDWGNO
  FROM TSFG006 A
  --20.08.24
  --TSFG006 A, TSAG131 B
  --WHERE
  --A.ZZPUMCOD = B.STDMHF(+)
  --AND FIG_NO = :FIG_NO
  --AND FIG_SHP = :FIG_SHP
  WHERE FIG_SHP = :FIG_SHP
</TSFG006_FIG_NO_FIG_SHP_SELECT>
<INSERT_TSFG006>
	-- INSERT_TSFG006
		INSERT INTO TSFG006 (
		FIG_NO
		,FIG_SHP
		,ACT_COD
		,WRK_STG
		,WRK_TYP
		,MATNR
		,MAKTX
		,ZZMAKTX1
		,ZZPUMCOD
		,MENGE
		,MEINS
		,CHG_FACTOR
		,CHG_QTY_MUL
		,BRGEW
		,ZIDWGNO
		)
		VALUES (
		:FIG_NO
		,:FIG_SHP
		,:ACT_COD
		,:WRK_STG
		,:WRK_TYP
		,:MATNR
		,:MAKTX
		,:ZZMAKTX1
		,:ZZPUMCOD
		,:MENGE
		,:MEINS
		,:CHG_FACTOR
		,:CHG_QTY_MUL
		,:BRGEW
		,:ZIDWGNO
		)
</INSERT_TSFG006>
<UPDATE_TSFG006>
	-- UPDATE_TSFG006
		UPDATE TSFG006 SET 
		ACT_COD = :ACT_COD
		,WRK_STG = :WRK_STG
		,WRK_TYP = :WRK_TYP
		,MATNR = :MATNR
		,MAKTX = :MAKTX
		,ZZMAKTX1 = :ZZMAKTX1
		,ZZPUMCOD = :ZZPUMCOD
		,MENGE = :MENGE
		,MEINS = :MEINS
		,CHG_FACTOR = :CHG_FACTOR
		,CHG_QTY_MUL = :CHG_QTY_MUL
		,BRGEW = :BRGEW
		,ZIDWGNO = :ZIDWGNO
		WHERE
		 FIG_NO = :FIG_NO
		 AND FIG_SHP = :FIG_SHP
</UPDATE_TSFG006>
<DELETE_TSFG006>
	-- DELETE_TSFG006
		DELETE TSFG006 
		WHERE
		 FIG_NO = :FIG_NO
		 AND FIG_SHP = :FIG_SHP
</DELETE_TSFG006>
<!--TSFG006 END-->
</AppAftMidPlanQuerySource>
